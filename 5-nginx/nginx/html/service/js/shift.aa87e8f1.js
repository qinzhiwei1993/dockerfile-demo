(window.webpackJsonp=window.webpackJsonp||[]).push([["shift"],{1003:function(e,t,a){"use strict";var n=a("d3a0");a.n(n).a},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf26","./gom-deva.js":"aaf26","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id="4678"},6304:function(e,t,a){},6446:function(e,t,a){"use strict";a.r(t);a("097d"),a("96cf");var n,s,r=a("3b8d"),i=a("a474"),o=a("6167"),c=a("c1df"),d=a.n(c),l={name:"consultshift",data:function(){return{serviceCenterId:"",serviceCenterList:"",weekDay:"",tableData:[],intervalList:[],scheduleList:[],onlineAdvisers:[],dataList:{},loading:!1,numTransWeek:{1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},todayTime:"",currentIsEdit:!1,weekDayList:[]}},methods:{serviceCenterChange:(s=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.g)({cityCode:this.userInfo.cityCode,serviceId:this.serviceCenterId});case 3:this.onlineAdvisers=e.sent,this.getDataByDate(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.$Message.error({content:"初始化失败："+e.t0.message||!1,duration:5});case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return s.apply(this,arguments)}),getDataByDate:function(){var e=this;this.currentIsEdit=-1!==this.weekDayList.findIndex((function(t){return t.date===e.weekDay}))&&this.weekDayList[this.weekDayList.findIndex((function(t){return t.date===e.weekDay}))].editable,this.loading=!0,Object(i.h)({cityCode:this.userInfo.cityCode,serviceId:this.serviceCenterId,date:this.weekDay}).then((function(t){e.scheduleList=t})).catch((function(t){e.$Message.error({content:"查询排班信息错误："+t.message,duration:5})})).finally((function(){e.loading=!1}))},changeSchedule:function(e,t){if(2!==this.userInfo.crmRoleId){var a=this.scheduleList.find((function(a){return a.workHour===e.workHour&&a.onlineIdentityId===String(t.identityId)}));a?a.deleted=0===a.deleted?1:0:this.scheduleList.push({workStartTime:e.workStartTime,workEndTime:e.workEndTime,deleted:0,onlineIdentityId:String(t.identityId),workHour:e.workHour,userWorkCode:t.userWorkCode})}else this.$Message.warning({content:"城市经理不能设置排班",duration:5})},save:function(){var e=this;this.$Modal.confirm({title:"保存排班",content:'<p>1.编辑完成一天的排班后请务必保存后再继续编辑；连续编辑多天排班后再点击保存时，系统只会保存最后一天的排班；</p><p>2.排班更改将在点击"确定"后实时生效，是否仍要更改？</p>',onOk:function(){Object(i.m)({details:e.scheduleList,localDate:e.weekDay}).then((function(t){e.$Message.success({content:"保存成功",duration:5}),e.$Modal.remove(),e.getDataByDate()})).catch((function(t){e.$Message.error({content:"保存失败："+t.message,duration:5})}))}})},isAuthorize:function(e,t){var a=this.scheduleList.find((function(a){return a.workHour===e.workHour&&a.onlineIdentityId===String(t.identityId)&&a.isAuthorize}));return!!a&&0===a.deleted},displayOnOff:function(e,t){var a=this.scheduleList.find((function(a){return a.workHour===e.workHour&&a.onlineIdentityId===String(t.identityId)}));return!!a&&0===a.deleted},queryWeekDay:function(){var e=this;Object(i.k)().then((function(t){e.weekDayList=t})).catch((function(t){e.$Message.error({content:"初始化失败："+t.message||!1,duration:5})}))}},computed:{userInfo:function(){return this.$store.state.roleRelativeData.userInfo}},mounted:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,this.todayTime=d()(new Date).format("YYYY-MM-DD"),this.weekDay=this.todayTime,this.queryWeekDay(),2!==this.userInfo.crmRoleId){e.next=12;break}return e.next=8,Object(o.l)({areaCode:this.userInfo.cityCode,isActive:1});case 8:this.serviceCenterList=e.sent,this.serviceCenterId=this.serviceCenterList[0].id,e.next=13;break;case 12:this.serviceCenterId=this.userInfo.crmDeptId;case 13:return e.next=15,Object(i.g)({cityCode:this.userInfo.cityCode,serviceId:this.serviceCenterId});case 15:return this.onlineAdvisers=e.sent,e.next=18,Object(i.i)();case 18:for(t=e.sent,a=t.startHour;a<=t.endHour;a++)this.intervalList.push({workHour:a,workStartTime:"".concat(a,":00"),workEndTime:"".concat(a+1,":00")});this.getDataByDate(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),this.$Message.error({content:"初始化失败："+e.t0.message||!1,duration:5});case 26:return e.prev=26,this.loading=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[0,23,26,29]])}))),function(){return n.apply(this,arguments)})},u=(a("1003"),a("2877")),f=Object(u.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"gary",attrs:{id:"onlineAdviserSchedule"}},[this.serviceCenterList.length?a("Form",[a("FormItem",{attrs:{label:"服务中心筛选："}},[a("Select",{staticStyle:{width:"300px"},attrs:{filterable:""},on:{"on-change":e.serviceCenterChange},model:{value:e.serviceCenterId,callback:function(t){e.serviceCenterId=t},expression:"serviceCenterId"}},e._l(e.serviceCenterList,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.deptName))])})),1)],1)],1):e._e(),e._v(" "),a("Radio-group",{attrs:{type:"button",size:"large"},on:{"on-change":e.getDataByDate},model:{value:e.weekDay,callback:function(t){e.weekDay=t},expression:"weekDay"}},e._l(e.weekDayList,(function(t){return a("Radio",{key:t.date,staticClass:"radio_margin",attrs:{label:t.date}},[e._v("\n      "+e._s(e.numTransWeek[t.week]+" ("+t.date.slice(5)+")")+"\n    ")])})),1),e._v(" "),a("div",{staticClass:"notice"},[a("p",[e._v("【注意事项】")]),e._v(" "),a("p",[e._v("\n      1.编辑完成一天的排班后请务必保存后再继续编辑；连续编辑多天排班后再点击保存时，系统只会保存最后一天的排班；\n    ")]),e._v(" "),a("p",[e._v("2.点击保存后，排班更改实时生效，请确认编辑无误后再保存；")]),e._v(" "),a("p",[e._v("3.建议每次编辑后，将排班表整体核实一遍，以免编辑错误影响工作；")]),e._v(" "),a("p",[e._v("\n      4.排班列表右上角黄色角标代表该顾问在该时段已委托给他人代维护，详细代班关系查询请移步至“代班管理”页面查看；\n    ")])]),e._v(" "),e.loading?a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}})],1):a("table",{staticStyle:{"table-layout":"fixed",border:"1px solid #ddd","border-collapse":"collapse","margin-top":"10px"},attrs:{border:"1",cellspacing:"0",cellpadding:"0",bgcolor:"#ffffff",bordercolordark:"#ffffff",bordercolorlight:"#000000"}},[a("thead",[a("tr",{},[a("th",{staticStyle:{height:"50px"}},[e._v(" ")]),e._v(" "),e._l(e.onlineAdvisers,(function(t){return a("th",{key:t.identityId,staticStyle:{"font-size":"16px","font-weight":"bold",color:"#444",width:"20px","font-family":"'Microsoft YaHei'","word-break":"break-all"}},[e._v("\n          "+e._s(t.userName)+"\n        ")])}))],2)]),e._v(" "),a("tbody",e._l(e.intervalList,(function(t){return a("tr",{key:t.workHour},[a("td",{staticStyle:{"text-align":"center",width:"100px","font-size":"16px","font-weight":"bold",color:"#333","min-width":"100px","white-space":"nowrap"}},[e._v("\n          "+e._s(t.workStartTime+"-"+t.workEndTime)+"\n        ")]),e._v(" "),e._l(e.onlineAdvisers,(function(n){return a("td",{key:n.identityId,class:e.displayOnOff(t,n)?"schedule-on":"schedule-off",on:{click:function(a){return e.changeSchedule(t,n)}}},[e.isAuthorize(t,n)?a("div",{staticClass:"icon"},[e._v("代")]):e._e()])}))],2)})),0)]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[a("Button",{directives:[{name:"show",rawName:"v-show",value:e.currentIsEdit&&2!==e.userInfo.crmRoleId,expression:"currentIsEdit && userInfo.crmRoleId !== 2"}],attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)}),[],!1,null,"52782386",null);t.default=f.exports},7703:function(e,t,a){},a5f4:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var n=a("3b8d"),s=a("bd86"),r=a("a474"),i=a("2f62"),o=a("c1df"),c=a.n(o),d=a("325c"),l=a("f121"),u=a("c276");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h,m=Object(u.n)(),v={exportUrl:l.a.baseUrl[m]+"/SPLAT/crmPanelList/serviceNotShiftDownload"},g={name:"shiftWatch",data:function(){var e=this;return{timeTfield:{"9:00-10:00":"nine","10:00-11:00":"ten","11:00-12:00":"eleven","12:00-13:00":"twelve","13:00-14:00":"thirteen","14:00-15:00":"fourteen","15:00-16:00":"fifteen","16:00-17:00":"sixteen","17:00-18:00":"seventeen","18:00-19:00":"eighteen","19:00-20:00":"nineteen","20:00-21:00":"twenty"},tableData:[],btnLoading:!1,tableLoading:!1,loading:!1,formData:{date:""},searchParams:{},pickerOptions:{disabledDate:function(t){return e.dealDisabledDate(t)}}}},computed:b({},Object(i.e)("roleRelativeData",["userInfo"])),mounted:function(){var e=c()(new Date).add(-1,"days").format("yyyy-MM-DD");this.formData.date=e,this.searchParams={date:this.formData.date,areaCode:this.userInfo.cityCode},this.queryTableData(this.searchParams)},methods:{queryTableData:(h=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableData=[],this.btnLoading=!0,this.tableLoading=!0,e.prev=3,e.next=6,Object(r.p)(t);case 6:this.tableData=e.sent,this.btnLoading=!1,this.tableLoading=!1,e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),this.$message.error(e.t0.message),this.btnLoading=!1,this.tableLoading=!1;case 16:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e){return h.apply(this,arguments)}),search:function(){this.btnLoading=!0;var e=b(b({},this.searchParams),this.formData);this.queryTableData(e)},upload:function(){var e=b(b({},this.searchParams),this.formData);d.a.download(v.exportUrl,e,"get")},dealDisabledDate:function(e){var t=Date.now()-864e5;return e.getTime()>=t}}},p=(a("fddf"),a("2877")),y=Object(p.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-data"},[a("el-card",{staticClass:"search-box"},[a("el-form",{attrs:{model:e.formData,"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{prop:"date",label:"日期"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",size:"small",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.btnLoading,size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",disabled:0===e.tableData.length},on:{click:e.upload}},[e._v("导出")])],1)],1)],1),e._v(" "),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData}},[a("el-table-column",{attrs:{fixed:!0,prop:"schoolName",label:"分校"}}),e._v(" "),a("el-table-column",{attrs:{fixed:!0,prop:"serviceDeptName",width:"180",label:"服务中心"}}),e._v(" "),a("el-table-column",{attrs:{fixed:!0,prop:"notLoginTimeSum",width:"130",label:"累计未排班时长(单位：分钟)"}}),e._v(" "),e._l(Object.keys(e.timeTfield),(function(t){return a("el-table-column",{key:t,attrs:{prop:e.timeTfield[t],align:"center",label:t,width:"105"}})}))],2)],1)],1)}),[],!1,null,"86b37de4",null);t.default=y.exports},ac53:function(e,t,a){"use strict";a.r(t);a("96cf");var n,s=a("3b8d"),r=(a("f751"),a("6762"),a("2fdb"),a("097d"),a("a474")),i={name:"entrustshift",data:function(){return{weekDay:"1",tableData:[],intervalList:[],scheduleList:[],advisers:[],formData:{agentIdentityId:"",agentIds:[],workHours:[]},loading:!1,tableColumns:[{type:"selection",width:50,align:"center"},{title:"委托时段",slot:"workHour",width:150,align:"center"},{title:"代班顾问",key:"agentWorkName",align:"center"},{title:"原顾问",slot:"agents",align:"center"}],ruleForm:{agentIdentityId:[{required:!0,message:"代班顾问不能为空",trigger:"change",type:"number"}],agentIds:[{required:!0,message:"原顾问不能为空",trigger:"change",type:"array"}],workHours:[{required:!0,message:"代班时段不能为空",trigger:"change",type:"array"}]},addModal:!1,ids:[]}},methods:{getDataByDate:function(e){var t=this;this.ids=[],this.loading=!0,Object(r.f)({cityCode:"010",weekDay:e}).then((function(e){t.tableData=e})).catch((function(e){t.$Message.error({content:"查询顾问委托列表错误："+e.message,duration:5})})).finally((function(){t.loading=!1}))},openAdd:function(){this.addModal=!0},save:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=e.advisers.filter((function(t){return e.formData.agentIds.includes(t.identityId)})).map((function(e){return{assignorIdentityId:String(e.identityId),assignorWorkCode:e.userWorkCode,assignorWorkName:e.userName}})),n=e.advisers.find((function(t){return t.identityId===e.formData.agentIdentityId})),s=Object.assign({},e.formData,{agentIdentityId:String(n.identityId),agentWorkCode:n.userWorkCode,agentWorkName:n.userName,agents:a,weekDay:e.weekDay});Object(r.l)(s).then((function(t){e.$Message.success({content:"保存成功",duration:5}),e.cancel(),e.getDataByDate(e.weekDay)})).catch((function(t){e.$Modal.error({title:"保存失败",render:function(e){return e("div",[e("p","请修改后重试！"),e("p","1.代班顾问在选中的时段中不得同时存在“原顾问”身份；"),e("p","2.原顾问在选中的时段内不得同时被两个人代班；")])},content:"保存失败："+t.message})}))}else e.$Message.warning({content:"请完善必填信息",duration:5})}))},cancel:function(){this.addModal=!1,this.formData={agentIdentityId:"",agentIds:[],workHours:[]},this.$refs.form.resetFields()},selectionChange:function(e){this.ids=e.map((function(e){return e.ids}))},deleteAgent:function(){var e=this;this.$Modal.confirm({title:"删除确认",content:"选中的代班设置执行“删除”操作在点击“确认”后将实时生效，是否仍要更改？",onOk:function(){Object(r.d)(e.ids).then((function(){e.$Message.success("删除成功！"),e.getDataByDate(e.weekDay)})).catch((function(t){e.$Message.error("删除失败："+t.message)}))}})}},computed:{dayName:function(){switch(this.weekDay){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日";default:return""}}},mounted:(n=Object(s.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,Object(r.g)();case 4:return this.advisers=e.sent,e.next=7,Object(r.i)({});case 7:for(t=e.sent,a=t.startHour;a<=t.endHour;a++)this.intervalList.push({workHour:a,workStartTime:"".concat(a,":00"),workEndTime:"".concat(a+1,":00")});this.getDataByDate(1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this.$Message.error({content:"初始化失败："+e.t0.message||!1,duration:5}),this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return n.apply(this,arguments)})},o=(a("e727"),a("2877")),c=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"gary",attrs:{id:"entrust-wrapper"}},[a("div",{staticClass:"header"},[a("RadioGroup",{attrs:{type:"button",size:"large"},on:{"on-change":e.getDataByDate},model:{value:e.weekDay,callback:function(t){e.weekDay=t},expression:"weekDay"}},[a("Radio",{attrs:{label:"1"}},[e._v("周一")]),e._v(" "),a("Radio",{attrs:{label:"2"}},[e._v("周二")]),e._v(" "),a("Radio",{attrs:{label:"3"}},[e._v("周三")]),e._v(" "),a("Radio",{attrs:{label:"4"}},[e._v("周四")]),e._v(" "),a("Radio",{attrs:{label:"5"}},[e._v("周五")]),e._v(" "),a("Radio",{attrs:{label:"6"}},[e._v("周六")]),e._v(" "),a("Radio",{attrs:{label:"7"}},[e._v("周日")])],1),e._v(" "),e.$haveAuthority("roleRelativeData","/shift/entrustshift/edit")?a("div",[a("Button",{staticClass:"add-btn",attrs:{type:"primary",icon:"md-add"},on:{click:e.openAdd}},[e._v("新增代班设置")]),e._v(" "),a("Button",{attrs:{icon:"md-trash",disabled:!e.ids.length},on:{click:e.deleteAgent}},[e._v("删除代班设置")])],1):e._e()],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"table-wrapper"},[e.loading?a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}})],1):e._e(),e._v(" "),a("Table",{attrs:{border:"",columns:e.tableColumns,data:e.tableData},on:{"on-selection-change":e.selectionChange},scopedSlots:e._u([{key:"workHour",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.workHour+":00-"+(a.workHour+1)+":00")+"\n        ")]}},{key:"agents",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.agents.map((function(e){return e.assignorWorkName})).join(","))+"\n        ")]}}])})],1),e._v(" "),a("div",{staticClass:"notice"},[a("p",{staticClass:"title"},[e._v("【代班功能说明】")]),e._v(" "),a("p",[e._v(" 1.代班功能主要解决顾问伙伴在其他伙伴休假倒班时需用盘古登录服务中心他人账号进行IM维护的问题；通过代班机制可以实现在代班期间代班顾问仅需登录自己的账号即可同时维护原顾问的IM中用户发来的全部文字及语音消息。")]),e._v(" "),a("p",[e._v(" 2.代班期间所产生的全部文字，语音的消息响应时长均不计入代办顾问与原顾问的响应时长中。")]),e._v(" "),a("p",[e._v(" 3.在代班期间内，原顾问的盘古端将接收不到用户发来的消息，均转移至代办顾问账号下；但手机端云客CRM则不受影响。")]),e._v(" "),a("p",[e._v(" 4.在代班期间内，代班顾问和家长没有建立沟通的情况下，原顾问仍可通过自己的盘古系统发送消息给用户。")]),e._v(" "),a("p",{staticClass:"title"},[e._v("【代班设置规则】")]),e._v(" "),a("p",[e._v(" 1.代班功能的代班顾问与原顾问均为同服务中心顾问角色。")]),e._v(" "),a("p",[e._v(" 2.一个顾问在同一时段内不能既为代班顾问又为原顾问。")]),e._v(" "),a("p",[e._v(" 3.一个顾问作为原顾问在同一时段内不能委托给两个顾问代班。")])])]),e._v(" "),a("Modal",{attrs:{title:"新增代班设置","footer-hide":"",closable:!1,"mask-closable":!1},on:{cancel:e.cancel},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[a("Form",{ref:"form",attrs:{"label-width":80,rules:e.ruleForm,model:e.formData}},[a("FormItem",{attrs:{label:"代班日期"}},[e._v("\n        "+e._s(e.dayName)+"\n      ")]),e._v(" "),a("FormItem",{attrs:{label:"代班顾问",prop:"agentIdentityId"}},[a("Select",{attrs:{clearable:"",filterable:""},on:{"on-clear":function(t){e.formData.agentIds=[]}},model:{value:e.formData.agentIdentityId,callback:function(t){e.$set(e.formData,"agentIdentityId",t)},expression:"formData.agentIdentityId"}},e._l(e.advisers,(function(t,n){return a("Option",{key:n,attrs:{value:t.identityId}},[e._v(e._s(t.userName))])})),1)],1),e._v(" "),a("FormItem",{attrs:{label:"原顾问",prop:"agentIds"}},[a("Select",{attrs:{multiple:"",clearable:"",filterable:"",disabled:!e.formData.agentIdentityId},model:{value:e.formData.agentIds,callback:function(t){e.$set(e.formData,"agentIds",t)},expression:"formData.agentIds"}},e._l(e.advisers,(function(t,n){return a("Option",{key:n,attrs:{disabled:e.formData.agentIdentityId===t.identityId,value:t.identityId}},[e._v(e._s(t.userName))])})),1)],1),e._v(" "),a("FormItem",{attrs:{label:"代班时段",prop:"workHours"}},[a("Select",{attrs:{multiple:"",clearable:"",disabled:!e.formData.agentIdentityId||!e.formData.agentIds.length},model:{value:e.formData.workHours,callback:function(t){e.$set(e.formData,"workHours",t)},expression:"formData.workHours"}},e._l(e.intervalList,(function(t,n){return a("Option",{key:n,attrs:{value:t.workHour}},[e._v(e._s(t.workStartTime+"-"+t.workEndTime))])})),1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)],1)}),[],!1,null,"1e37f11a",null);t.default=c.exports},d3a0:function(e,t,a){},e727:function(e,t,a){"use strict";var n=a("6304");a.n(n).a},fddf:function(e,t,a){"use strict";var n=a("7703");a.n(n).a}}]);
//# sourceMappingURL=shift.aa87e8f1.js.map