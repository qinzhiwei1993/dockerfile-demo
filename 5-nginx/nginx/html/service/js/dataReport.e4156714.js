(window.webpackJsonp=window.webpackJsonp||[]).push([["dataReport"],{"0084":function(e,t,a){},"00b6":function(e,t,a){"use strict";var r=a("d7de");a.n(r).a},"0153":function(e,t,a){},"0286":function(e,t,a){"use strict";var r=a("0e14");a.n(r).a},"02e3":function(e,t,a){"use strict";a.r(t);var r=a("8598"),n=a("1616"),s={name:"KanbanDay",mixins:[r.a],components:{SelectAll:n.a},mounted:function(){this.performanceType=1}},i=(a("92ec"),a("2877")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"选择日期："}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.queryUserList},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"展示数据："}},[2===e.roleId?a("el-radio",{attrs:{size:"small",label:"2"},model:{value:e.collectType,callback:function(t){e.collectType=t},expression:"collectType"}},[e._v("分校汇总数据")]):e._e(),e._v(" "),2===e.roleId||4===e.roleId?a("el-radio",{attrs:{size:"small",label:"4"},model:{value:e.collectType,callback:function(t){e.collectType=t},expression:"collectType"}},[e._v("服务中心汇总")]):e._e(),e._v(" "),a("el-radio",{attrs:{size:"small",label:"5"},model:{value:e.collectType,callback:function(t){e.collectType=t},expression:"collectType"}},[e._v("个人明细")])],1),e._v(" "),2===e.roleId&&"4"===e.collectType?a("el-form-item",{attrs:{label:"服务中心："}},[a("select-all",{attrs:{"data-list":e.scList,"init-select":e.scIds,"value-key":"deptCode","label-key":"deptName"},model:{value:e.scIds,callback:function(t){e.scIds=t},expression:"scIds"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1):e._e(),e._v(" "),2!==e.roleId&&4!==e.roleId||"5"!==e.collectType?e._e():a("el-form-item",{attrs:{label:"家庭顾问："}},[a("select-all",{attrs:{"data-list":e.userList,"init-select":e.userIds,"value-key":"identityId","label-key":"userName"},model:{value:e.userIds,callback:function(t){e.userIds=t},expression:"userIds"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.search(1)}}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"localDate",align:"center",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",align:"center",label:"分校"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptName",align:"center",label:"服务中心"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"顾问"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flowLabel",align:"center",label:"流量情况"}},[a("template",{slot:"header"},[a("span",[e._v("流量情况")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"拉流流量指6个月内顾问帮用户注册且资源未发生流转，顾问维护量计为0；自然流量指非拉流流量的其他所有情况，注册量计为0",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"newCount",align:"center",label:"注册量"}},[a("template",{slot:"header"},[a("span",[e._v("注册量")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在选择日期内，全分校缴费用户中，通过顾问的盘古账号完成注册的数量；若同一用户报名3次，则注册量计为3",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"defendCount",align:"center",label:"维护量"}},[a("template",{slot:"header"},[a("span",[e._v("维护量")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在选择日期内，全分校缴费用户中，绑定在顾问的盘古账号下的数量；若同一用户报名3次，则维护量计为3",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"registCount",align:"center"}},[a("template",{slot:"header"},[a("span",[e._v("报名人次")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在选择日期内，全分校缴费用户中，顾问通过盘古账号帮助家长进行报名的人次",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2)],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.pageNo,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"191230b8",null);t.default=l.exports},"054d":function(e,t,a){"use strict";a.r(t);var r=a("8c32"),n=a("ce61"),s={name:"LongPRKanban",mixins:[r.a],components:{ScrollWrap:n.a},data:function(){return{source:"refund",isLongTerm:1,queryId:1313,maxTableHeight:null}},methods:{handleOnResize:function(e){this.maxTableHeight=e.clientHeight-120}}},i=(a("0608"),a("2877")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-data"},[a("el-form",{attrs:{"label-width":"120px",inline:!0,size:"medium"}},[a("el-form-item",{attrs:{label:"退费月份："}},[a("el-date-picker",{attrs:{type:"monthrange","range-separator":"~","value-format":"yyyy-MM","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1),e._v(" "),1===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"分校："}},[a("select-all",{attrs:{"data-list":e.allCityList,"init-select":e.areaCodeList,"value-key":"id","label-key":"name"},model:{value:e.areaCodeList,callback:function(t){e.areaCodeList=t},expression:"areaCodeList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"学期："}},[a("select-all",{attrs:{"data-list":e.termList,"init-select":e.claTermIdList,"value-key":"schoolId","label-key":"name"},model:{value:e.claTermIdList,callback:function(t){e.claTermIdList=t},expression:"claTermIdList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"年级："}},[a("select-all",{attrs:{"data-list":e.gradeList,"init-select":e.claGradeIdList,"value-key":"schoolId","label-key":"name"},model:{value:e.claGradeIdList,callback:function(t){e.claGradeIdList=t},expression:"claGradeIdList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1),e._v(" "),2===e.roleId||4===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"家庭顾问："}},[a("select-all",{attrs:{"data-list":e.advisoryList,"init-select":e.advisoryEmpNosChecked,"value-key":"empNo","label-key":"empName"},model:{value:e.advisoryEmpNosChecked,callback:function(t){e.advisoryEmpNosChecked=t},expression:"advisoryEmpNosChecked"}}),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small",disabled:0===e.advisoryEmpNosChecked.length},on:{click:e.updateAdvisoryGroup}},[e._v("保存为顾问组")]),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"学员姓名"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuName,callback:function(t){e.$set(e.formData,"stuName",t)},expression:"formData.stuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学员编号"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuLoginName,callback:function(t){e.$set(e.formData,"stuLoginName",t)},expression:"formData.stuLoginName"}})],1)],2),e._v(" "),!e.advisoryGroup.length||2!==e.roleId&&4!==e.roleId?e._e():a("div",{staticClass:"advisory-group"},[a("el-checkbox",{staticStyle:{"margin-right":"5px"},model:{value:e.formData.useAdvisoryGroup,callback:function(t){e.$set(e.formData,"useAdvisoryGroup",t)},expression:"formData.useAdvisoryGroup"}}),e._v(" "),a("Tooltip",{staticClass:"item",attrs:{effect:"dark","max-width":"500",content:e.advisoryGroupString,placement:"top"}},[a("p",{staticClass:"advisory-names"},[e._v("已保存顾问组："+e._s(e.advisoryGroupString))])]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:function(t){return e.updateAdvisoryGroup("delete")}}},[e._v("删除顾问组")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{staticStyle:{width:"100px"},attrs:{loading:e.loading,type:"primary",size:"small"},on:{click:function(t){return e.search(1)}}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.exportIng,size:"small"},on:{click:function(t){return e.exportData(1,467)}}},[e._v("导出")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:e.downloadExcel}},[e._v("绩效规则")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("ScrollWrap",{attrs:{"open-resize":"","cus-style":{"max-height":"calc(100vh - 70px)"}},on:{"on-resize":e.handleOnResize}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":e.maxTableHeight}},[a("el-table-column",{attrs:{prop:"date",label:"时间信息",align:"center","label-class-name":"date-info"}},[a("el-table-column",{attrs:{align:"center",prop:"jxMonth",label:"绩效月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundDate",label:"退费日期"}})],1),e._v(" "),a("el-table-column",{staticStyle:{background:"#000"},attrs:{prop:"date",label:"学员信息",align:"center","label-class-name":"student-info"}},[a("el-table-column",{attrs:{align:"center",prop:"stuId",label:"stu_id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuUid",label:"学员uid"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuLoginname",label:"学员编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuName",label:"学员姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"zcQd",label:"注册渠道"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuFlag",label:"学员标签"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"llBq",label:"流量标签"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"班级信息",align:"center","label-class-name":"class-info"}},[a("el-table-column",{attrs:{align:"center",prop:"regId",label:"报班ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claYear",label:"学年"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claTermName",label:"学期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGtName",label:"学部"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGradeName",label:"年级"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claSubjectNames",label:"科目"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claLevelName",label:"班次名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claPrice",label:"班级金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"finaPayprice",label:"实缴总金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claId",label:"班级ID"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"注册人信息",align:"center","label-class-name":"register-info"}},[a("el-table-column",{attrs:{align:"center",prop:"tsEmpFlag",label:"注册人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsCreateDate",label:"学员注册时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpName",label:"注册人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsDeptName",label:"注册人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsAreaName",label:"所属区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifEarlywarnZhuce",label:"注册预警"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s("1"===t.row.ifEarlywarnZhuce?"是":"否")+"\n          ")]}}])})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"维护人信息",align:"center","label-class-name":"preserve-info"}},[a("el-table-column",{attrs:{align:"center",prop:"whTime",label:"维护开始时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserName",label:"维护人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserWorkCode",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whServicecenterName",label:"维护人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whAreaName",label:"维护人所属区域"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"报名信息",align:"center","label-class-name":"apply-info"}},[a("el-table-column",{attrs:{align:"center",prop:"trEmpFlag",label:"报名人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpName",label:"报名人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trDeptName",label:"报名人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trAreaName",label:"报名人所属区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"regCreateDateOld",label:"报名时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"finaCreateDate",label:"缴费时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifCarlywarnRegist",label:"报名预警"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s("1"===t.row.ifCarlywarnRegist?"是":"否")+"\n          ")]}}])})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"退费信息",align:"center","label-class-name":"apply-info"}},[a("el-table-column",{attrs:{align:"center",prop:"ifKqt",label:"是否退费扣除"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"rcCreateDate",label:"退费时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifKqtKkq",label:"开课前全额退费"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifKqtCb",label:"插班未刷课时退费"}})],1)],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.formData.pageNo,"page-sizes":e.formData.pageSizes,"page-size":e.formData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.formData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"3fda7b46",null);t.default=l.exports},"0608":function(e,t,a){"use strict";var r=a("35f0");a.n(r).a},"07f7":function(e,t,a){"use strict";var r={props:{label:{type:String,default:"学科："},paramKey:{type:String,default:"subjectid"}},data:function(){return{list:["全部","语文","数学","英语","物理","化学","生物","历史","政治","地理","综合","科学","编程","科学实践","围棋","文综"],type:""}},watch:{type:function(e){var t=e;"全部"===e&&(t="all");var a={};a[this.paramKey]=t,this.$emit("getParams",a)}},mounted:function(){this.type="全部"},methods:{}},n=a("2877"),s=Object(n.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:e.label}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1)}),[],!1,null,"28dd5b57",null);t.a=s.exports},"0b8a":function(e,t,a){},"0e14":function(e,t,a){},1445:function(e,t,a){},1501:function(e,t,a){"use strict";t.a=function(e,t){var a={msg:"",check:!0},r=e.collect,n=e.cities,s=e.areas,i=e.servcenters,l=e.users;switch(r){case"1":n||(a.check=!1,a.msg="城市不能为空");break;case"2":s||(a.check=!1,a.msg="区域不能为空");break;case"3":i||(a.check=!1,a.msg="服务中心不能为空");break;default:var o="家庭顾问不能为空";2===t&&(o="电呼坐席不能为空"),l||(a.check=!1,a.msg=o)}return a}},"15c5":function(e,t,a){},1616:function(e,t,a){"use strict";var r=a("75fc"),n=a("7618"),s=(a("6762"),a("2fdb"),{props:{placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!0},dataList:{type:Array,default:function(){return[]}},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},allValue:{type:String,default:"all"},allKey:{type:String,default:"全部"},initSelect:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},data:function(){return{list:[],select:[],oldAllSelect:[],pageDisabled:!1}},computed:{},watch:{dataList:function(e){this.list=this.allList(e)},initSelect:function(e){this.select=this.allListValue(e),this.oldAllSelect[0]=this.select},disabled:function(){this.pageDisabled=this.disabled}},mounted:function(){this.list=this.dataList,this.select=this.initSelect,this.pageDisabled=this.disabled},methods:{handelChange:function(e){this.select=e;for(var t=[],a=0;a<this.list.length;a++)t.push(this.list[a][this.valueKey]);var r=1===this.oldAllSelect.length?this.oldAllSelect[0]:[];if(e.includes(this.allValue)&&(this.select=t),r.includes(this.allValue)&&!e.includes(this.allValue)&&(this.select=[]),r.includes(this.allValue)&&e.includes(this.allValue)){var n=e.indexOf(this.allValue);e.splice(n,1),this.select=e}r.includes(this.allValue)||e.includes(this.allValue)||e.length===t.length-1&&(this.select=[this.allValue].concat(e)),this.oldAllSelect[0]=this.select;var s=this.removeAll(this.select);this.$emit("input",s),this.$emit("change",s)},allList:function(e){var t="object"===Object(n.a)(e)?Object(r.a)(e):[],a=this.labelKey,s=this.allKey,i=this.valueKey,l=this.allValue;if(t.length>1){var o={};o[a]=s,o[i]=l,t=[o].concat(t)}return t},allListValue:function(e){var t=this.dataList,a=this.initSelect,s=this.allValue,i="object"===Object(n.a)(e)?Object(r.a)(e):[];return t.length>1&&t.length===a.length&&(i=[s].concat(i)),i},removeAll:function(e){var t=Object(r.a)(e);if(t.includes(this.allValue)){var a=t.indexOf(this.allValue);t.splice(a,1)}return t}}}),i=(a("7896"),a("2877")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticStyle:{width:"400px"},attrs:{size:"small",clearable:e.clearable,placeholder:e.placeholder,value:e.select,disabled:e.pageDisabled,filterable:e.filterable,multiple:""},on:{change:e.handelChange}},e._l(e.list,(function(t){return a("el-option",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})})),1)}),[],!1,null,null,null);t.a=l.exports},"1cf2":function(e,t,a){},"1d41":function(e,t,a){"use strict";var r=a("5365");a.n(r).a},2801:function(e,t,a){"use strict";a("96cf");var r,n=a("3b8d");t.a={data:function(){return{classDetail:{id:"",show:!1}}},methods:{showClassDetail:function(e){var t=this;this.classDetail.id=e,this.$nextTick((function(){t.classDetail.show=!0}))},showSchooltime:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.talSchooltime.seeDetail(t);case 2:(a=e.sent)&&this.$Message.error({content:"获取上课时间失败: ".concat(a)});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}}},"2b3f":function(e,t,a){},"35f0":function(e,t,a){},3794:function(e,t,a){"use strict";var r=a("15c5");a.n(r).a},"381c":function(e,t,a){"use strict";a.r(t);a("28a5");var r=a("8598"),n=a("1616"),s=a("c24f"),i={name:"KanbanRange",mixins:[r.a],components:{SelectAll:n.a},data:function(){return{date:"",dateSection:[]}},methods:{getDateSection:function(){var e=this;Object(s.d)().then((function(t){e.dateSection=t})).catch((function(t){e.$message.error("查询考勤周期切片错误："+t.message)}))},selectChange:function(){this.dateRange=this.date.split(" ~ "),this.queryUserList(this.dateRange)}},mounted:function(){this.performanceType=2,this.getDateSection()}},l=(a("6a89"),a("2877")),o=Object(l.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"选择日期："}},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择",filterable:""},on:{change:e.selectChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},e._l(e.dateSection,(function(e){return a("el-option",{key:e.startDate+" ~ "+e.endDate,attrs:{label:e.startDate+" ~ "+e.endDate,value:e.startDate+" ~ "+e.endDate}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"展示数据："}},[2===e.roleId?a("el-radio",{attrs:{size:"small",label:"2"},model:{value:e.collectType,callback:function(t){e.collectType=t},expression:"collectType"}},[e._v("分校汇总数据")]):e._e(),e._v(" "),2===e.roleId||4===e.roleId?a("el-radio",{attrs:{size:"small",label:"4"},model:{value:e.collectType,callback:function(t){e.collectType=t},expression:"collectType"}},[e._v("服务中心汇总")]):e._e(),e._v(" "),a("el-radio",{attrs:{size:"small",label:"5"},model:{value:e.collectType,callback:function(t){e.collectType=t},expression:"collectType"}},[e._v("个人明细")])],1),e._v(" "),2===e.roleId&&"4"===e.collectType?a("el-form-item",{attrs:{label:"服务中心："}},[a("select-all",{attrs:{"data-list":e.scList,"init-select":e.scIds,"value-key":"deptCode","label-key":"deptName"},model:{value:e.scIds,callback:function(t){e.scIds=t},expression:"scIds"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1):e._e(),e._v(" "),2!==e.roleId&&4!==e.roleId||"5"!==e.collectType?e._e():a("el-form-item",{attrs:{label:"家庭顾问："}},[a("select-all",{attrs:{"data-list":e.userList,"init-select":e.userIds,"value-key":"identityId","label-key":"userName"},model:{value:e.userIds,callback:function(t){e.userIds=t},expression:"userIds"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.search(1)}}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"ddate",align:"center","min-width":100,label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",align:"center",label:"分校"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptName",align:"center",label:"服务中心"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"顾问"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flowLabel",align:"center",label:"流量情况"}},[a("template",{slot:"header"},[a("span",[e._v("流量情况")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"拉流流量指6个月内顾问帮用户注册且资源未发生流转，顾问维护量计为0；自然流量指非拉流流量的其他所有情况，注册量计为0",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"payCount",align:"center",label:"缴费量"}},[a("template",{slot:"header"},[a("span",[e._v("缴费量")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在选择日期内，全分校缴费用户总数",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"registCount",align:"center"}},[a("template",{slot:"header"},[a("span",[e._v("报名量")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在选择日期内，全分校缴费用户中，顾问通过盘古账号帮助家长进行报名的人次",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"registRank",align:"center",label:"报名量排名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"defendCount",align:"center",label:"维护量"}},[a("template",{slot:"header"},[a("span",[e._v("维护量")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在选择日期内，全分校缴费用户中，绑定在顾问的盘古账号下的数量；若同一用户报名3次，则维护量计为3",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"defendRank",align:"center",label:"维护量排名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newCount",align:"center",label:"注册量"}},[a("template",{slot:"header"},[a("span",[e._v("注册量")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在选择日期内，全分校缴费用户中，通过顾问的盘古账号完成注册的数量；若同一用户报名3次，则注册量计为3",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"newRank",align:"center",label:"注册量排名"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.pageNo,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"0666a1c8",null);t.default=o.exports},"3b7d":function(e,t,a){},"3b83":function(e,t,a){"use strict";var r=a("f904");a.n(r).a},"3cef":function(e,t,a){"use strict";var r=a("e4a8");a.n(r).a},"40f5":function(e,t,a){"use strict";a.r(t);a("7f7f"),a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var r=a("3b8d"),n=a("bd86"),s=(a("386d"),a("325c")),i=a("4bca"),l=a("a7c5"),o=a("1501"),c=a("ccbd"),u=a("f121"),m=a("c276");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h,b=Object(m.n)(),g={exportUrl:u.a.baseUrl[b]+"/SPLAT/crmPanelList/download"},f={components:{selectArea:i.a,deadlineTime:l.a},data:function(){return{total:0,params:{deadline:"",cities:"",areas:"",servcenters:"",collect:"",users:"",pagesize:10,page:1},historyParams:{},loading:!1,tableData:[]}},mounted:function(){},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},getParams:function(e){var t=d(d({},this.params),e);this.params=t},searchButton:function(){this.params.page=1,this.search()},search:(h=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||d({},this.params),(r=Object(o.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:return a.operate="imcoverage",this.historyParams=a,e.prev=7,this.loading=!0,e.next=11,Object(c.h)(a);case 11:n=e.sent,this.tableData=n.records||[],this.total=n.totalCount,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),this.$Message.error({content:"获取列表失败："+e.t0.message});case 19:return e.prev=19,this.loading=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[7,16,19,22]])}))),function(e){return h.apply(this,arguments)}),exprot:function(){s.a.download(g.exportUrl,this.historyParams)}}},v=(a("3b83"),a("2877")),y=Object(v.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("deadline-time",{on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"end-time":e.params.deadline},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"时间","min-width":"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          截止"+e._s(t.row.queryDate)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindingStudentNumber",label:"已绑定学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedCommunicateStudentNum",label:"已绑定学员沟通人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedCommunicateStudentRate",label:"已绑定学员沟通率","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedMaintainStudentNum",label:"已绑定维护中学员人数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedMaintainCommunicateNum",label:"已绑定维护中学员沟通人数","min-width":"140",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedMaintainCommunicateRate",label:"已绑定维护中学员沟通率","min-width":"100",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{size:"small","current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)}),[],!1,null,"7d1b9880",null).exports;a("28a5");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var w={props:{initParams:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{list:[],date:"",time:"",endTime:"",startTime:"",cutStart:"",params:{},pickerTime:{disabledDate:function(t){return t.getTime()>new Date(e.time)||t.getTime()<new Date(e.startTime)}}}},watch:{endTime:function(e){var t=s.a.formatTime(new Date(e).getTime());this.$emit("getParams",{deadline:t.FullDate+" 23:59:59"})},date:function(e){var t,a,r=this.date.split("-"),n=s.a.getDayTime(1).FullDate,i=r[0],l=parseInt(r[1]),o=1===(l+"").length?"0".concat(l):l,c="",u="";u="".concat(i,"-").concat(o,"-19"),u=new Date(u).getTime()>new Date(n).getTime()?n:u,a=l<=1?i-1:i,c=1===((c=l<=1?12:l-1)+"").length?"0".concat(c):c,t="".concat(a,"-").concat(c,"-19"),this.startTime=t,this.time=u,this.params.deadline?(this.endTime=this.initParams.deadline,this.params.deadline=""):this.endTime=u},startTime:function(e){var t=s.a.formatTime(new Date(e).getTime()+864e5);this.cutStart=t.FullDate}},mounted:function(){this.params=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.initParams),this.getList()},methods:{getList:function(){var e=s.a.getDayTime(1).year,t=s.a.getDayTime(1).month,a=t;s.a.getDayTime(1).day>=20&&(a=t+1<=12?t+1:1,e=t+1<=12?e:e+1);for(var r=12,n=[],i=2018;i<=e;i++){var l=1;for(2018===i&&(l=5),i===e&&(r=a);l<=r;l++){var o=1===(l+"").length?"0".concat(l):l;n.push({date:"".concat(i,"-").concat(o),name:"".concat(i,"年").concat(o,"月绩效月")})}}if(this.list=n,this.params.deadline){var c=this.initParams.deadline.split("-");this.date="".concat(c[0],"-").concat(c[1])}else this.date=n[n.length-1].date}}},k=Object(v.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"选择绩效月："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},e._l(e.list,(function(e){return a("el-option",{key:e.date,attrs:{label:e.name,value:e.date}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{size:"small","picker-options":e.pickerTime,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v(e._s(e.cutStart)+"到"+e._s(e.endTime)+"的平均首次响应时长")])],1)],1)],1)}),[],!1,null,"864ace48",null).exports,x=a("a279");function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=Object(m.n)(),O={exportUrl:u.a.baseUrl[P]+"/SPLAT/crmPanelList/download"},T={components:{selectArea:i.a,selectJxMonth:k,selectTime:x.a},data:function(){return{total:0,params:{deadline:"",starttime:"",endtime:"",cities:"",areas:"",servcenters:"",collect:"",users:"",pagesize:10,page:1},historyParams:{},tableData:[],loading:!1}},computed:{storageParams:function(){return this.$store.state.data.replyParams||{}}},watch:{},mounted:function(){this.params=D(D({},this.params),this.storageParams)},methods:{look:function(e){this.$router.push({name:"dataReportImChat",query:{id:e.userId}})},handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},searchButton:function(){this.params.page=1,this.search()},search:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||D({},this.params),(r=Object(o.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:return a.operate="imduration",this.historyParams=a,this.$store.commit("data/setReplyParams",a),e.prev=8,this.loading=!0,e.next=12,Object(c.h)(a);case 12:n=e.sent,this.tableData=n.records||[],this.total=n.totalCount,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),this.$Message.error({content:"获取列表失败："+e.t0.message});case 20:return e.prev=20,this.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[8,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),getParams:function(e){var t=D(D({},this.params),e);this.params=t},exprot:function(){s.a.download(O.exportUrl,this.historyParams)}}},j=(a("d28f"),{name:"dataReportImChatList",components:{cover:y,reply:Object(v.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("selectJxMonth",{attrs:{"init-params":e.storageParams},on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"end-time":e.params.deadline,"init-params":e.storageParams},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"时间","min-width":"130",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendNum",label:"推送消息条数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recvNum",label:"接收消息条数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgFirstResponseTime",label:"平均首次响应时长","min-width":"140",align:"center"}}),e._v(" "),"4"===e.storageParams.collect||"5"===e.storageParams.collect?a("el-table-column",{attrs:{fixed:"right",label:"查看IM聊天数据","min-width":"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.look(t.row)}}},[e._v("查看")])]}}],null,!1,4221173880)}):e._e()],1)],1),e._v(" "),a("el-pagination",{attrs:{size:"small","current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)}),[],!1,null,"6441ee38",null).exports},data:function(){return{activeName:""}},computed:{name:function(){return this.$store.state.data.showImTag}},watch:{name:function(){this.activeName=this.name},activeName:function(e){this.reset()}},mounted:function(){this.activeName=this.name},destroyed:function(){this.reset(),this.$store.commit("data/setShowImTag","cover")},methods:{reset:function(){if("cover"===this.activeName){this.$store.commit("data/setReplyParams",{cities:"",areas:"",servcenters:"",users:""})}},handleClick:function(){this.$store.commit("data/setShowImTag",this.activeName)}}}),S=(a("3794"),Object(v.a)(j,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"IM覆盖率",name:"cover"}},["cover"===e.name?a("cover"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"平均首次响应时长",name:"reply"}},["reply"===e.name?a("reply"):e._e()],1)],1)],1)])}),[],!1,null,"c416325c",null));t.default=S.exports},4158:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var r=a("3b8d"),n=a("bd86"),s=(a("386d"),a("4bca")),i=a("a279"),l=a("8e75"),o=a("a8ff"),c=a("7e42"),u=a("07f7"),m=a("325c"),p=a("1501"),d=a("ccbd"),h=a("f121"),b=a("c276");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v,y=Object(b.n)(),_={exportUrl:h.a.baseUrl[y]+"/SPLAT/crmPanelList/download"},w={name:"dataReportOldSleeping",components:{selectArea:s.a,selectTime:i.a,selectYear:l.a,classType:o.a,classTerm:c.a,classSubject:u.a},data:function(){return{total:0,timeList:["1","2","3","5","6"],params:{starttime:"",endtime:"",counttime:"1",cities:"",areas:"",servcenters:"",collect:"",users:"",serviceline:"",awakeyear:"",pagesize:10,page:1},historyParams:{},tableData:[],loading:!1}},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},getParams:function(e){var t=f(f({},this.params),e);this.params=t},searchButton:function(){this.params.page=1,this.search()},search:(v=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||f({},this.params),(r=Object(p.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:return a.type=a.counttime,a.operate="awaken",this.historyParams=a,e.prev=8,this.loading=!0,e.next=12,Object(d.h)(a);case 12:n=e.sent,this.tableData=n.records||[],this.total=n.totalCount,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),this.$Message.error({content:"获取列表失败："+e.t0.message});case 20:return e.prev=20,this.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[8,17,20,23]])}))),function(e){return v.apply(this,arguments)}),exprot:function(){m.a.download(_.exportUrl,this.historyParams)}}},k=(a("d02d"),a("2877")),x=Object(k.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("select-time",{attrs:{"type-list":e.timeList},on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"end-time":e.params.endtime},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("class-type",{on:{getParams:e.getParams}}),e._v(" "),a("select-year",{attrs:{"param-key":"awakeyear"},on:{getParams:e.getParams}}),e._v(" "),a("class-term",{on:{getParams:e.getParams}}),e._v(" "),a("class-subject",{on:{getParams:e.getParams}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"时间","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sleepStudentNum",label:"沉睡老学员人数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payManTime",label:"缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netPayNum",label:"净缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netPayManTime",label:"净缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"awakeRate",label:"唤醒率","min-width":"100",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"40bf9f80",null);t.default=x.exports},"432b":function(e,t,a){"use strict";var r=a("0b8a");a.n(r).a},4555:function(e,t,a){"use strict";var r=a("3b7d");a.n(r).a},"45ba":function(e,t,a){"use strict";var r=a("78b1");a.n(r).a},4862:function(e,t,a){"use strict";var r=a("0084");a.n(r).a},"4bca":function(e,t,a){"use strict";a("8e6e"),a("cadf"),a("456d"),a("28a5"),a("ac6a"),a("6762"),a("2fdb");var r=a("75fc"),n=(a("96cf"),a("3b8d")),s=a("bd86"),i=a("1616"),l=a("325c"),o=a("ccbd");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var u,m,p,d,h,b,g,f,v,y,_={components:{selectAll:i.a},props:{initParams:{type:Object,default:function(){return{cities:"",areas:"",servcenters:"",users:""}}},startTime:{type:String,default:""},endTime:{type:String,default:""},hasTime:{type:Boolean,default:!1}},data:function(){return{cityList:[],regionList:[],serviceList:[],city:[],region:[],service:[],collect:"1",usersList:[],users:[],params:{},initGetList:!0}},computed:{userInfo:function(){return this.$store.state.roleRelativeData.userInfo},roleId:function(){return this.userInfo.crmRoleId},showCity:function(){return 1===this.roleId||2===this.roleId},showRegion:function(){return 1===this.roleId||2===this.roleId||3===this.roleId},showService:function(){return 1===this.roleId||2===this.roleId||3===this.roleId||4===this.roleId},handler:function(){return{roleId:this.roleId,endTime:this.endTime,hasTime:this.hasTime,startTime:this.startTime}},handlerParams:function(){return{city:this.city,region:this.region,service:this.service,users:this.users}}},watch:{handlerParams:function(e){this.emithandle()},collect:function(e){this.emithandle(),5!==this.roleId&&this.getUsersList(this.service,1)},handler:function(e){var t=e.roleId,a=e.endTime,r=e.hasTime;t&&(r&&a?this.init(this.userInfo):r||this.init(this.userInfo))}},mounted:function(){this.params=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.initParams),this.roleId&&!this.hasTime&&this.init()},methods:{init:(y=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.roleId,e.next=1===e.t0?3:2===e.t0?6:3===e.t0?9:4===e.t0?12:5===e.t0?15:18;break;case 3:return this.getNewCollect("1"),this.getAllCity(),e.abrupt("break",18);case 6:return this.getNewCollect("1"),this.getMyCity(),e.abrupt("break",18);case 9:return this.getNewCollect("2"),this.getRegionList([]),e.abrupt("break",18);case 12:return this.getServiceList([]),this.getNewCollect("3"),e.abrupt("break",18);case 15:return this.collect="5",this.getUsersList([]),e.abrupt("break",18);case 18:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)}),emithandle:function(){var e={collect:this.collect,cities:this.city.join(","),areas:this.region.join(","),servcenters:this.service.join(","),users:this.users.join(",")};if("4"!==e.collect&&"5"!==e.collect&&(e.users=""),this.$emit("getParams",e),this.initGetList)switch(this.roleId){case 5:this.users.length>0&&(this.initGetList=!1,this.$emit("getInitList"));break;default:"4"===this.collect||"5"===this.collect?this.users.length>0&&(this.initGetList=!1,this.$emit("getInitList")):this.service.length>0&&(this.initGetList=!1,this.$emit("getInitList"))}},changCity:function(e){this.getRegionList(e)},changeRegion:function(e){this.getServiceList(e)},changeService:function(e){this.getUsersList(e)},getAllDentity:(v=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={startTime:l.a.getTimestamp(this.startTime,10)||0,endTime:l.a.getTimestamp(this.endTime,10)||0},e.prev=1,e.next=4,Object(o.c)(t);case 4:return a=e.sent,e.abrupt("return",a||[]);case 8:return e.prev=8,e.t0=e.catch(1),this.$Message.error({content:"获取身份对应信息失败："+e.t0.message}),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return v.apply(this,arguments)}),getDepart:(f=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length<1)){e.next=2;break}return e.abrupt("return",[]);case 2:return a={startTime:l.a.getTimestamp(this.startTime,10)||0,endTime:l.a.getTimestamp(this.endTime,10)||0,deptPids:t},e.prev=3,e.next=6,Object(o.b)(a);case 6:return r=e.sent,e.abrupt("return",r||[]);case 10:return e.prev=10,e.t0=e.catch(3),this.$Message.error({content:"根据上级deptPid获取下级部门失败："+e.t0.message}),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return f.apply(this,arguments)}),getUsers:(g=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(r.a)(t),!("4"!==this.collect&&"5"!==this.collect||t.length<=0)){e.next=3;break}return e.abrupt("return",[]);case 3:return n={startTime:l.a.getTimestamp(this.startTime,10)||0,endTime:l.a.getTimestamp(this.endTime,10)||0,deptId:a.join(",")},e.prev=4,e.next=7,Object(o.f)(n);case 7:return s=e.sent,e.abrupt("return",s||[]);case 11:return e.prev=11,e.t0=e.catch(4),this.$Message.error({content:"按服务中心查询家庭顾问失败："+e.t0.message}),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return g.apply(this,arguments)}),getUsersInit:(b=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("4"===this.collect||"5"===this.collect){e.next=2;break}return e.abrupt("return",[]);case 2:return t={startTime:l.a.getTimestamp(this.startTime,10)||0,endTime:l.a.getTimestamp(this.endTime,10)||0},e.prev=3,e.next=6,Object(o.e)(t);case 6:return(a=e.sent)&&a.length<=0&&(a=[{userId:this.userInfo.userId,userName:this.userInfo.userName}]),e.abrupt("return",a||[]);case 11:return e.prev=11,e.t0=e.catch(3),this.$Message.error({content:"初始化家庭顾问失败："+e.t0.message}),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(){return b.apply(this,arguments)}),getAllCity:(h=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDepart(["10"]);case 2:this.cityList=e.sent,t=this.cityList.map((function(e){return e.id})),this.params.cities.length>0?(this.city=this.strToIntArray(this.initParams.cities),this.params.cities=""):this.city=t,this.getRegionList(this.city);case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)}),getMyCity:(d=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllDentity();case 2:this.cityList=e.sent,t=this.cityList.map((function(e){return e.id})),this.params.cities.length>0?(this.city=this.strToIntArray(this.initParams.cities),this.params.cities=""):this.city=t,this.getRegionList(this.city);case 6:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)}),getRegionList:(p=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(r.a)(t),t.includes(12)&&(n=a.indexOf(12),a.splice(n,1)),3!==this.roleId){e.next=8;break}return e.next=5,this.getAllDentity();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this.getDepart(a);case 10:e.t0=e.sent;case 11:this.regionList=e.t0,s=this.regionList.map((function(e){return e.id})),this.params.areas.length>0?(this.region=this.strToIntArray(this.initParams.areas),this.params.areas=""):this.region=s,this.getServiceList(this.region);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)}),getServiceList:(m=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(r.a)(t),this.city.includes(12)&&(a=[12].concat(a)),4!==this.roleId){e.next=8;break}return e.next=5,this.getAllDentity();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this.getDepart(a);case 10:e.t0=e.sent;case 11:this.serviceList=e.t0,n=this.serviceList.map((function(e){return e.id})),this.service=n,this.params.servcenters.length>0?(this.service=this.strToIntArray(this.initParams.servcenters),this.params.servcenters=""):this.service=n,this.getUsersList(this.service);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)}),getUsersList:(u=Object(n.a)(regeneratorRuntime.mark((function e(t,a){var r,n,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(5!==this.roleId){e.next=6;break}return e.next=3,this.getUsersInit();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this.getUsers(t);case 8:e.t0=e.sent;case 9:r=e.t0,n={},s=[],r.forEach((function(e){n[e.userId]||(n[e.userId]=!0,s.push(e))})),this.usersList=[].concat(s),i=this.usersList.map((function(e){return e.userId})),this.params.users.length>0&&(1!==a||4===this.roleId)?(this.users=this.strToIntArray(this.params.users),this.params.users=""):this.users=i;case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)}),getNewCollect:function(e){this.params.collect?(this.collect=this.initParams.collect,this.params.collect=""):this.collect=e},strToIntArray:function(e){var t=e.split(",");return t.forEach((function(e,a){t[a]=parseInt(e)})),t}}},w=a("2877"),k=Object(w.a)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[e.showCity?a("el-form-item",{attrs:{label:"城市："}},[a("select-all",{attrs:{"data-list":e.cityList,"init-select":e.city,"value-key":"id","label-key":"deptName"},on:{change:e.changCity},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}}),e._v(" "),e.cityList.length>1?a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")]):e._e()],1):e._e(),e._v(" "),e.showRegion?a("el-form-item",{attrs:{label:"区域："}},[a("select-all",{attrs:{"data-list":e.regionList,"init-select":e.region,"value-key":"id","label-key":"deptName"},on:{change:e.changeRegion},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}}),e._v(" "),e.regionList.length>1||e.cityList.length>1?a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")]):e._e()],1):e._e(),e._v(" "),e.showService?a("el-form-item",{attrs:{label:"服务中心："}},[a("select-all",{attrs:{"data-list":e.serviceList,"init-select":e.service,"value-key":"id","label-key":"deptName"},on:{change:e.changeService},model:{value:e.service,callback:function(t){e.service=t},expression:"service"}}),e._v(" "),e.serviceList.length>1||e.regionList.length>1?a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")]):e._e()],1):e._e(),e._v(" "),e.showService?a("el-form-item",{attrs:{label:"展示数据："}},[e.showCity?a("el-radio",{attrs:{size:"small",label:"1"},model:{value:e.collect,callback:function(t){e.collect=t},expression:"collect"}},[e._v("城市汇总数据")]):e._e(),e._v(" "),e.showRegion?a("el-radio",{attrs:{size:"small",label:"2"},model:{value:e.collect,callback:function(t){e.collect=t},expression:"collect"}},[e._v("区域汇总数据")]):e._e(),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.collect,callback:function(t){e.collect=t},expression:"collect"}},[e._v("服务中心汇总数据")]),e._v(" "),e.showRegion?a("el-radio",{attrs:{size:"small",label:"4"},model:{value:e.collect,callback:function(t){e.collect=t},expression:"collect"}},[e._v("家庭顾问明细数据")]):e._e(),e._v(" "),5===e.roleId||4===e.roleId?a("el-radio",{attrs:{size:"small",label:"5"},model:{value:e.collect,callback:function(t){e.collect=t},expression:"collect"}},[e._v("家庭顾问明细数据")]):e._e()],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:("4"===e.collect||"5"===e.collect)&&e.showService,expression:"(collect === '4' || collect === '5') && showService"}],attrs:{label:"家庭顾问："}},[a("select-all",{attrs:{"data-list":e.usersList,"init-select":e.users,"value-key":"userId","label-key":"userName"},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)],1)],1)}),[],!1,null,"02ef0022",null);t.a=k.exports},5253:function(e,t,a){},5365:function(e,t,a){},"5ed4":function(e,t,a){"use strict";var r=a("dca8");a.n(r).a},"61c6":function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var r=a("3b8d"),n=(a("386d"),a("bd86")),s=a("1501"),i=a("325c"),l=a("4bca"),o=a("a279"),c=a("ccbd"),u=a("f121"),m=a("c276");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h,b,g=Object(m.n)(),f={exportUrl:u.a.baseUrl[g]+"/SPLAT/crmPanelList/download"},v={name:"dataReportSatisfaction",components:{selectArea:l.a,selectTime:o.a},data:function(){return{total:0,exportUrl:f.exportUrl,params:{starttime:"",endtime:"",cities:"",areas:"",servcenters:"",collect:"",counttime:"",users:"",page:1,pagesize:10},historyParams:{},tableData:[],loading:!1}},computed:{storageParams:function(){return this.$store.state.data.satisfactionParams||{}}},mounted:function(){this.params=d(d({},this.params),this.storageParams)},destroyed:function(){this.$store.commit("data/setSatisfactionParams",{cities:"",areas:"",servcenters:"",users:""})},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},look:function(e){this.$router.push({name:"dataReportSatisfactionEvaluation",query:{id:e.userId}})},searchButton:function(){this.params.page=1,this.search()},search:(b=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||d({},this.params),(r=Object(s.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:return a.operate="evaluation",this.historyParams=a,this.$store.commit("data/setSatisfactionParams",a),e.prev=8,this.loading=!0,e.next=12,Object(c.h)(a);case 12:n=e.sent,this.tableData=n.records||[],this.total=n.totalCount,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),this.$Message.error({content:"获取列表失败："+e.t0.message});case 20:return e.prev=20,this.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[8,17,20,23]])}))),function(e){return b.apply(this,arguments)}),exprot:(h=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.historyParams.empNo="075757",i.a.download(f.exportUrl,this.historyParams);case 2:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)}),getParams:function(e){var t=d(d({},this.params),e);this.params=t}}},y=(a("432b"),a("2877")),_=Object(y.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("select-time",{attrs:{"init-params":e.storageParams},on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"start-time":e.params.starttime,"end-time":e.params.endtime,"init-params":e.storageParams},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"时间","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedMaintainStudentNum",label:"已绑定维护中学员人数","min-width":"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"evaluateStudentNumber",label:"实际评价学员人数","min-width":"140",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"evaluateNumber",label:"实际评价条数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"satisfacationScore",label:"满意度分数","min-width":"110",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"evaluateRatio",label:"评价率","min-width":"100",align:"center"}}),e._v(" "),"4"===e.storageParams.collect||"5"===e.storageParams.collect?a("el-table-column",{attrs:{prop:"id8",fixed:"right",label:"查看评价明细","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.look(t.row)}}},[e._v("查看")])]}}],null,!1,4221173880)}):e._e()],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"684babd4",null);t.default=_.exports},"65b2":function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var r=a("3b8d"),n=a("bd86"),s=(a("386d"),a("4bca")),i=a("a279"),l={data:function(){return{list:[{name:"全部",value:"0"},{name:"统计时间之前已注册",value:"2"},{name:"统计时间范围内新注册",value:"1"}],type:"0"}},watch:{type:function(e){this.$emit("getParams",{registtype:e})}},mounted:function(){this.$emit("getParams",{registtype:this.type})},methods:{}},o=a("2877"),c=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"新学员："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)}),[],!1,null,"638fa470",null).exports,u=a("8e75"),m=a("a8ff"),p=a("7e42"),d=a("07f7"),h=a("325c"),b=a("1501"),g=a("ccbd"),f=a("f121"),v=a("c276");function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w,k=Object(v.n)(),x={exportUrl:f.a.baseUrl[k]+"/SPLAT/crmPanelList/download"},C={name:"dataReportConversion",components:{selectArea:s.a,selectTime:i.a,selectStudent:c,selectYear:u.a,classType:m.a,classTerm:p.a,classSubject:d.a},data:function(){return{timeList:["1","2","3","5","6"],params:{starttime:"",endtime:"",cities:"",areas:"",servcenters:"",collect:"",users:"",serviceline:"",transyear:"",termid:"",subjectid:"",registtype:"",page:1,pagesize:10},historyParams:{},tableData:[],loading:!1,total:0}},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},getParams:function(e){var t=_(_({},this.params),e);this.params=t},searchButton:function(){this.params.page=1,this.search()},search:(w=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||_({},this.params),(r=Object(b.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:return a.operate="conversion",this.historyParams=a,e.prev=7,this.loading=!0,e.next=11,Object(g.h)(a);case 11:n=e.sent,this.tableData=n.records||[],this.total=n.totalCount,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),this.$Message.error({content:"获取列表失败："+e.t0.message});case 19:return e.prev=19,this.loading=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[7,16,19,22]])}))),function(e){return w.apply(this,arguments)}),exprot:function(){h.a.download(x.exportUrl,this.historyParams)}}},D=(a("6906"),Object(o.a)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("select-time",{attrs:{"type-list":e.timeList},on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"end-time":e.params.endtime},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("class-type",{on:{getParams:e.getParams}}),e._v(" "),a("select-year",{on:{getParams:e.getParams}}),e._v(" "),a("class-term",{on:{getParams:e.getParams}}),e._v(" "),a("class-subject",{on:{getParams:e.getParams}}),e._v(" "),a("select-student",{on:{getParams:e.getParams}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"时间","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directPayNum",label:"直接缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notDirectPayNum",label:"非直接缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payManTime",label:"缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directPayManTime",label:"直接缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notDirectPayManTime",label:"非直接缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perPayManTime",label:"人均缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directPerPayManTime",label:"直接人均缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notDirectPerPayManTime",label:"非直接人均缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netPayNum",label:"净缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directNetPayNum",label:"直接净缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notDirectNetPayNum",label:"非直接净缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netPayManTime",label:"净缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directNetPayManTime",label:"直接净缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notDirectNetPayManTime",label:"非直接净缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perNetPayManTime",label:"人均净缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directPerNetPayManTime",label:"直接人均净缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notDirectPerNetPayManTime",label:"非直接人均净缴费人次","min-width":"100",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"b27d06d6",null));t.default=D.exports},6906:function(e,t,a){"use strict";var r=a("2b3f");a.n(r).a},"6a89":function(e,t,a){"use strict";var r=a("916c");a.n(r).a},"6cac":function(e,t,a){"use strict";var r=a("d0df");a.n(r).a},"6eda":function(e,t,a){"use strict";a.r(t);var r=a("8c32"),n=a("ce61"),s={name:"longPdKanban",mixins:[r.a],components:{ScrollWrap:n.a},data:function(){return{source:"detail",isLongTerm:1,queryId:467,maxTableHeight:null}},methods:{handleOnResize:function(e){this.maxTableHeight=e.clientHeight-120}}},i=(a("6cac"),a("2877")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-data"},[a("el-form",{attrs:{"label-width":"120px",inline:!0,size:"medium"}},[a("el-form-item",{attrs:{label:"绩效月份："}},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"月份选择",filterable:""},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}},e._l(e.monthList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),1===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"分校："}},[a("select-all",{attrs:{"data-list":e.allCityList,"init-select":e.areaCodeList,"value-key":"id","label-key":"name"},model:{value:e.areaCodeList,callback:function(t){e.areaCodeList=t},expression:"areaCodeList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"学期："}},[a("select-all",{attrs:{"data-list":e.termList,"init-select":e.claTermIdList,"value-key":"schoolId","label-key":"name"},model:{value:e.claTermIdList,callback:function(t){e.claTermIdList=t},expression:"claTermIdList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"年级："}},[a("select-all",{attrs:{"data-list":e.gradeList,"init-select":e.claGradeIdList,"value-key":"schoolId","label-key":"name"},model:{value:e.claGradeIdList,callback:function(t){e.claGradeIdList=t},expression:"claGradeIdList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1),e._v(" "),2===e.roleId||4===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"家庭顾问："}},[a("select-all",{attrs:{"data-list":e.advisoryList,"init-select":e.advisoryEmpNosChecked,"value-key":"empNo","label-key":"empName"},model:{value:e.advisoryEmpNosChecked,callback:function(t){e.advisoryEmpNosChecked=t},expression:"advisoryEmpNosChecked"}}),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small",disabled:0===e.advisoryEmpNosChecked.length},on:{click:e.updateAdvisoryGroup}},[e._v("保存为顾问组")]),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"学员姓名"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuName,callback:function(t){e.$set(e.formData,"stuName",t)},expression:"formData.stuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学员编号"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuLoginName,callback:function(t){e.$set(e.formData,"stuLoginName",t)},expression:"formData.stuLoginName"}})],1)],2),e._v(" "),!e.advisoryGroup.length||2!==e.roleId&&4!==e.roleId?e._e():a("div",{staticClass:"advisory-group"},[a("el-checkbox",{staticStyle:{"margin-right":"5px"},model:{value:e.formData.useAdvisoryGroup,callback:function(t){e.$set(e.formData,"useAdvisoryGroup",t)},expression:"formData.useAdvisoryGroup"}}),e._v(" "),a("Tooltip",{staticClass:"item",attrs:{effect:"dark","max-width":"500",content:e.advisoryGroupString,placement:"top"}},[a("p",{staticClass:"advisory-names"},[e._v("已保存顾问组："+e._s(e.advisoryGroupString))])]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:function(t){return e.updateAdvisoryGroup("delete")}}},[e._v("删除顾问组")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{staticStyle:{width:"100px"},attrs:{loading:e.loading,type:"primary",size:"small"},on:{click:function(t){return e.search(1)}}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.exportIng,size:"small"},on:{click:e.exportData}},[e._v("导出")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:e.downloadExcel}},[e._v("绩效规则")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("ScrollWrap",{attrs:{"open-resize":"","cus-style":{"max-height":"calc(100vh - 70px)"}},on:{"on-resize":e.handleOnResize}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"max-height":e.maxTableHeight,data:e.tableData}},[a("el-table-column",{attrs:{prop:"date",label:"分校日期",align:"center","label-class-name":"date-info"}},[a("el-table-column",{attrs:{align:"center",prop:"jxMonth",label:"绩效月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"areaCode",label:"分校code"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"cityName",label:"分校"}})],1),e._v(" "),a("el-table-column",{staticStyle:{background:"#000"},attrs:{prop:"date",label:"学员信息",align:"center","label-class-name":"student-info"}},[a("el-table-column",{attrs:{align:"center",prop:"stuId",label:"stu_id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuUid",label:"学员uid"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuLoginName",label:"学员编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuName",label:"学员姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"regWay",label:"注册渠道"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuLabel",label:"学员标签"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"flowLabel",label:"流量标签"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"班次信息",align:"center","label-class-name":"class-info"}},[a("el-table-column",{attrs:{align:"center",prop:"regClassId",label:"报班ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claYear",label:"学年"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claTermName",label:"学期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGtName",label:"学部"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGradeName",label:"年级"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claSubjectNames",label:"科目"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claLevelName",label:"班次名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claPrice",label:"班级金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"finalPayPrice",label:"实缴总金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claId",label:"班级ID"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"注册人信息",align:"center","label-class-name":"register-info"}},[a("el-table-column",{attrs:{align:"center",prop:"tsEmpFlag",label:"注册人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsCreateDate",label:"学员注册时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpName",label:"注册人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsServiceCenterName",label:"注册人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsAreaName",label:"所属区域"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"维护人信息",align:"center","label-class-name":"preserve-info"}},[a("el-table-column",{attrs:{align:"center",prop:"whTime",label:"维护开始时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserName",label:"维护人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserWorkCode",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whServiceCenterName",label:"维护人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whAreaName",label:"维护人所属区域"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"报名信息",align:"center","label-class-name":"apply-info"}},[a("el-table-column",{attrs:{align:"center",prop:"trEmpFlag",label:"报名人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpName",label:"报名人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trServiceCenterName",label:"报名人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trAreaName",label:"报名人所属区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"regTime",label:"报名时间"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"缴费信息",align:"center","label-class-name":"pay-info"}},[a("el-table-column",{attrs:{align:"center",prop:"payTime",label:"缴费时间"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"预警信息",align:"center","label-class-name":"warning-info"}},[a("el-table-column",{attrs:{align:"center",prop:"isEarlyWarnZhuce",label:"注册预警"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"===t.row.isEarlyWarnZhuce?"是":"否"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"isEarlyWarnReg",label:"报名预警"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"===t.row.isEarlyWarnReg?"是":"否"))]}}])})],1),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"loadTime",label:"加载时间"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.formData.pageNo,"page-sizes":e.formData.pageSizes,"page-size":e.formData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.formData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"0457f9e2",null);t.default=l.exports},"6f86":function(e,t,a){"use strict";var r=a("1cf2");a.n(r).a},7014:function(e,t,a){"use strict";var r=a("a78e"),n=a.n(r);t.a={data:function(){return{teacherDetail:{cityCode:"",id:"",type:"",empNo:"",show:!1}}},mounted:function(){this.teacherDetail.empNo=JSON.parse(n.a.get("columbusUserInfo")).id},methods:{showTeacherDetail:function(e,t,a){var r=this;this.teacherDetail.show=!0,this.teacherDetail.cityCode=e,this.teacherDetail.id=t,this.teacherDetail.type=a||"0",this.$nextTick((function(){r.$refs.teacherRef.show()}))}}}},"77eb":function(e,t,a){},7896:function(e,t,a){"use strict";var r=a("9a2f3");a.n(r).a},"78b1":function(e,t,a){},"7ab2":function(e,t,a){},"7e42":function(e,t,a){"use strict";var r={props:{label:{type:String,default:"学期："},paramKey:{type:String,default:"termid"},hasShortTerm:{type:Boolean,default:!1}},data:function(){return{list:[{name:"春季班",id:"1"},{name:"春上",id:"11"},{name:"春下",id:"12"},{name:"暑假班",id:"2"},{name:"秋季班",id:"3"},{name:"秋上",id:"31"},{name:"秋下",id:"32"},{name:"寒假班",id:"4"}],type:""}},watch:{type:function(e){var t={};t[this.paramKey]=e,this.$emit("getParams",t)},hasShortTerm:function(e){this.addShortTerm()}},mounted:function(){this.type="1",this.addShortTerm()},methods:{addShortTerm:function(){if(this.hasShortTerm){this.list=this.list.concat([{name:"短期班",id:"5"},{name:"活动类",id:"6"},{name:"考试类",id:"ksl"},{name:"诊断类",id:"zdl"}])}}}},n=a("2877"),s=Object(n.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:e.label}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)}),[],!1,null,"71d387a6",null);t.a=s.exports},"84ba":function(e,t,a){"use strict";a.r(t);a("cadf"),a("456d"),a("ac6a");var r=a("2b0e"),n=a("75fc"),s=(a("55dd"),a("6c6e")),i=(a("c5f6"),a("22b4")),l=a("1be7"),o=a("4cb5"),c=a("f95e");i.a([o.a,c.a]);var u={name:"flow-item",props:{keyMap:Object,max:Number},watch:{max:function(e){e>=0&&this.renderChart()},"keyMap.value":function(e){e>=0&&this.renderChart()}},methods:{renderChart:function(){var e=this;this.$nextTick((function(){var t=l.b(e.$refs.chart);null==t&&(t=l.c(e.$refs.chart),window.addEventListener("resize",(function(){t.resize()})));var a={color:["#5B8FF9","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],legend:{show:!1,data:["Direct"]},grid:{left:1,right:1,top:1,bottom:1},xAxis:{show:!1,max:e.max},yAxis:{show:!1,type:"category",data:["Mon"]},series:[{type:"bar",stack:"total",showBackground:!0,data:[e.keyMap.value]}]};t.setOption(a)}))}},mounted:function(){var e=this;this.$nextTick((function(){e.renderChart()}))}},m=(a("4862"),a("2877")),p=Object(m.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item"},[a("div",{staticClass:"name-num"},[a("div",[a("span",{staticClass:"data-name"},[e._v(e._s(e.keyMap.name))]),e._v(" "),a("Tooltip",{attrs:{transfer:"",content:e.keyMap.tooltip,"max-width":"200"}},[a("Icon",{attrs:{type:"ios-information-circle-outline"}})],1)],1),e._v(" "),a("div",{staticClass:"data-num"},[e._v(e._s(e._f("toThousands")(e.keyMap.value)))])]),e._v(" "),a("div",{ref:"chart",staticClass:"chart"})])}),[],!1,null,"db2bad2c",null).exports,d={name:"FlowPoll",props:{queryParams:Object},components:{FlowItem:p},data:function(){return{flowData:{},keyMap:[{name:"加微",key:"addWx",tooltip:"所筛选的时间段内，加微用户量"},{name:"注册",key:"reg",tooltip:"所筛选的时间段内，注册用户量"},{name:"有效加微",key:"validAddWx",tooltip:"所筛选的时间段内，加微且备注手机号的用户量"},{name:"注册且加微",key:"regAndAddWx",tooltip:"所筛选的时间段内，加微的注册用户量"},{name:"注册有效加微",key:"validRegAndAddWx",tooltip:"所筛选的时间段内，加微且备注手机号的注册用户量"}],fontSize:"font16"}},mounted:function(){var e=this,t=this;window.addEventListener("resize",(function(){t.$nextTick((function(){t.fontSize=t.$refs.flowPoll.clientWidth>310?"font16":"font14"}))})),this.$nextTick((function(){e.fontSize=e.$refs.flowPoll.clientWidth>310?"font16":"font14"}))},computed:{keyValueList:function(){var e=this;return this.keyMap.map((function(t){return t.value=e.flowData[t.key],t})).sort((function(e,t){return t.value-e.value}))},max:function(){return Math.max.apply(Math,Object(n.a)(this.keyValueList.map((function(e){return e.value}))))}},methods:{initView:function(){var e=this;Object(s.a)(this.queryParams).then((function(t){e.flowData=t,e.$emit("theFlowData",e.flowData)})).catch((function(t){e.$Message.error({content:"查询流量池数据失败: "+t.message,duration:5})}))}}},h=(a("3cef"),Object(m.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"flowPoll",staticClass:"flow-poll"},[a("div",{staticClass:"title-wrapper"},[a("span",{staticClass:"title1"},[e._v("流量池")]),e._v(" "),a("Tooltip",{attrs:{transfer:"",content:"所筛选的时间段内，产生的资源数据统计","max-width":"200"}},[a("Icon",{attrs:{type:"ios-information-circle-outline",size:16}})],1)],1),e._v(" "),a("div",{staticClass:"data-wrapper"},[a("div",[a("div",{staticClass:"data-num"},[e._v(e._s(e._f("toThousands")(e.flowData.totalFlow)))]),e._v(" "),a("div",[a("span",{staticClass:"data-name"},[e._v("总流量")]),e._v(" "),a("Tooltip",{attrs:{transfer:"",content:"所筛选的时间段内，加微用户、注册绑定用户去重后总量","max-width":"200"}},[a("Icon",{attrs:{type:"ios-information-circle-outline"}})],1)],1)]),e._v(" "),a("div",[a("div",{staticClass:"data-num"},[e._v(e._s(e._f("toThousands")(e.flowData.addWxFlow)))]),e._v(" "),a("div",[a("span",{staticClass:"data-name"},[e._v("加微总量")]),e._v(" "),a("Tooltip",{attrs:{transfer:"",content:"所筛选的时间段内，加微用户量","max-width":"200"}},[a("Icon",{attrs:{type:"ios-information-circle-outline"}})],1)],1)]),e._v(" "),a("div",[a("div",{staticClass:"data-num"},[e._v(e._s(e._f("toThousands")(e.flowData.newRegFlow)))]),e._v(" "),a("div",[a("span",{staticClass:"data-name"},[e._v("新注册总量")]),e._v(" "),a("Tooltip",{attrs:{transfer:"",content:"所筛选的时间段内，注册用户量","max-width":"200"}},[a("Icon",{attrs:{type:"ios-information-circle-outline"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"chart-wrapper"},e._l(e.keyValueList,(function(t){return a("FlowItem",{key:t.key+t.value,attrs:{"key-map":t,max:e.max}})})),1),e._v(" "),a("div",{staticClass:"compare-wrapper"},[e.flowData.monthCompared?a("div",{class:e.fontSize+" compare-item"},[a("div",{staticClass:"compare-text"},[e._v("月环比")]),e._v(" "),a("div",{staticClass:"data-icon",class:-1===e.flowData.monthCompared.lastIndexOf("-")?"up":"down"}),e._v(" "),a("div",{staticClass:"data-mum-text",class:-1===e.flowData.monthCompared.lastIndexOf("-")?"up":"down"},[e._v(e._s(e.flowData.monthCompared))])]):e._e(),e._v(" "),e.flowData.dayCompared?a("div",{class:e.fontSize+" compare-item"},[a("div",{staticClass:"compare-text"},[e._v("日环比")]),e._v(" "),a("div",{staticClass:"data-icon",class:-1===e.flowData.dayCompared.lastIndexOf("-")?"up":"down"}),e._v(" "),a("div",{staticClass:"data-mum-text",class:-1===e.flowData.dayCompared.lastIndexOf("-")?"up":"down"},[e._v(e._s(e.flowData.dayCompared))])]):e._e()])])}),[],!1,null,"5751f0e4",null).exports),b=a("7618"),g=a("fa7d");i.a([o.a,c.a]);var f={name:"ChartItem",props:{name:String,num:[Number,Array],max:Number,noData:Boolean},computed:{numText:function(){return"number"==typeof this.num?Object(g.j)(this.num):"object"===Object(b.a)(this.num)?this.num.map((function(e){return Object(g.j)(e)})).join("/"):""}},watch:{max:function(e){e>=0&&this.renderChart()}},methods:{renderChart:function(){var e=this;this.$nextTick((function(){var t=l.b(e.$refs.chart);null==t&&(t=l.c(e.$refs.chart),window.addEventListener("resize",(function(){t.resize()})));var a={color:["#5B8FF9","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],legend:{show:!1,data:["Direct"]},grid:{left:1,right:1,top:1,bottom:1},xAxis:{show:!1,max:e.max},yAxis:{show:!1,type:"category",data:["Mon"]}},r=[];"object"===Object(b.a)(e.num)?r=e.num.map((function(e){return{type:"bar",stack:"total",showBackground:!0,data:[e]}})):"number"==typeof e.num&&(r=[{type:"bar",stack:"total",showBackground:!0,data:[e.num]}]),a.series=r,t.setOption(a)}))}},mounted:function(){this.renderChart()}},v=(a("b408"),Object(m.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-item",class:e.noData?"no-data":""},[a("div",{staticClass:"chart-name"},[e._v(e._s(e.name))]),e._v(" "),a("div",{ref:"chart",staticClass:"chart"}),e._v(" "),a("div",{staticClass:"chart-num"},[e._v(e._s(e.numText))])])}),[],!1,null,"584715b2",null).exports),y={props:["funnelData","keyMap"],data:function(){return{}}},_=(a("6f86"),Object(m.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content_box"},[e._t("title"),e._v(" "),a("div",{staticClass:"first_box"},[a("div",{staticClass:"num_box"},[a("span",[e._v(e._s(e._f("toThousands")(e.funnelData[e.keyMap[0].key])))]),e._v(" "),a("span",[e._v(e._s(e.keyMap[0].name)+"\n        "),a("Tooltip",{attrs:{content:e.keyMap[0].tooltip,transfer:"","max-width":"200"}},[a("Icon",{staticClass:"tooltipIcon",attrs:{type:"ios-information-circle-outline"}})],1)],1)]),e._v(" "),a("div",{staticClass:"num_box"},[a("span",[e._v(e._s(e._f("toThousands")(e.funnelData[e.keyMap[1].key])))]),e._v(" "),a("span",[e._v(e._s(e.keyMap[1].name)+"\n        "),a("Tooltip",{attrs:{content:e.keyMap[1].tooltip,transfer:"","max-width":"200"}},[a("Icon",{staticClass:"tooltipIcon",attrs:{type:"ios-information-circle-outline"}})],1)],1)]),e._v(" "),a("div",{staticClass:"num_box"},[a("span",[e._v(e._s(e._f("toThousands")(e.funnelData[e.keyMap[2].key])))]),e._v(" "),a("span",[e._v(e._s(e.keyMap[2].name)+"\n        "),a("Tooltip",{attrs:{content:e.keyMap[2].tooltip,transfer:"","max-width":"200"}},[a("Icon",{staticClass:"tooltipIcon",attrs:{type:"ios-information-circle-outline"}})],1)],1)])]),e._v(" "),e._t("chart"),e._v(" "),a("div",{staticClass:"secend_box"},[a("div",{staticClass:"info_box"},[a("div",{staticClass:"title_num"},[e._v(e._s(e.keyMap[3].name)+"\n        "),a("Tooltip",{attrs:{content:e.keyMap[3].tooltip,transfer:"","max-width":"200"}},[a("Icon",{staticClass:"tooltipIcon",attrs:{type:"ios-information-circle-outline"}})],1)],1),e._v(" "),a("div",[a("span",{staticClass:"person_num"},[e._v(e._s(e._f("toThousands")(e.funnelData[e.keyMap[3].key])))]),a("span",{staticClass:"person_unit"},[e._v(e._s(e.keyMap[3].unit))])])]),e._v(" "),a("div",{staticClass:"info_box"},[e.funnelData[e.keyMap[4].key]?a("div",{staticClass:"top_box"},[a("span",{staticClass:"title_week"},[e._v(e._s(e.keyMap[4].name))]),e._v(" "),a("span",{class:-1===e.funnelData[e.keyMap[4].key].lastIndexOf("-")?"upcolor":"downcolor"},[a("i",{class:-1===e.funnelData[e.keyMap[4].key].lastIndexOf("-")?"upIcon":"downIcon"}),e._v(" "),a("span",[e._v(e._s(e.funnelData[e.keyMap[4].key]))])])]):e._e(),e._v(" "),e.funnelData[e.keyMap[5].key]?a("div",{staticClass:"top_box",staticStyle:{"margin-bottom":"0"}},[a("span",{staticClass:"title_week"},[e._v(e._s(e.keyMap[5].name))]),e._v(" "),a("span",{class:-1===e.funnelData[e.keyMap[5].key].lastIndexOf("-")?"upcolor":"downcolor"},[a("i",{class:-1===e.funnelData[e.keyMap[5].key].lastIndexOf("-")?"upIcon":"downIcon"}),e._v(" "),a("span",[e._v(e._s(e.funnelData[e.keyMap[5].key]))])])]):e._e()])])],2)}),[],!1,null,"affd2e4c",null).exports),w={name:"ChartDetail",props:{detailData:Object,keyMap:Object},components:{ChartItem:v,FunnelData:_},data:function(){return{}},computed:{max:function(){var e=this;return Math.max.apply(Math,Object(n.a)(this.keyMap.charts.map((function(t){return e.detailData[t.key]||0}))))},userInfo:function(){return this.$store.state.roleRelativeData.userInfo}}},k=(a("45ba"),Object(m.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail-wrapper"},[a("FunnelData",{attrs:{funnelData:e.detailData,"key-map":e.keyMap.funnelItems}},[a("template",{slot:"title"},[a("div",{staticClass:"title-wrapper"},[a("span",{staticClass:"title1"},[e._v(e._s(e.keyMap.name))]),e._v(" "),a("Tooltip",{attrs:{transfer:"",content:e.keyMap.tooltip,"max-width":"200"}},[a("Icon",{attrs:{type:"ios-information-circle-outline",size:16}})],1)],1),e._v(" "),a("div",{staticClass:"target-wrapper"},[a("div",{staticClass:"target-item"},[a("Tooltip",{attrs:{transfer:"",content:e.keyMap.items[0].tooltip,"max-width":"200"}},[a("span",{staticClass:"item-name"},[e._v(e._s(e.keyMap.items[0].name))]),e._v(" "),a("span",{staticClass:"item-num"},[e._v(e._s(e._f("toThousands")(e.detailData[e.keyMap.items[0].key])))])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2!==e.userInfo.crmRoleId,expression:"userInfo.crmRoleId !== 2"}],staticClass:"target-item"},[a("Tooltip",{attrs:{transfer:"",content:e.keyMap.items[1].tooltip,"max-width":"200"}},[a("span",{staticClass:"item-name"},[e._v(e._s(e.keyMap.items[1].name))]),e._v(" "),a("span",{staticClass:"item-num"},[e._v(e._s(e._f("toThousands")(e.detailData[e.keyMap.items[1].key])))])])],1)])]),e._v(" "),a("div",{staticClass:"chart-wrapper",attrs:{slot:"chart"},slot:"chart"},e._l(e.keyMap.charts,(function(t){return a("ChartItem",{key:t.key,staticStyle:{"margin-bottom":"7px"},attrs:{name:t.name,num:e.detailData[t.key]||0,max:e.max,"no-data":t.noData}})})),1)],2)],1)}),[],!1,null,"f7e20fca",null).exports),x=(a("8e6e"),a("96cf"),a("3b8d")),C=(a("386d"),a("bd86")),D=a("66df");function P(e){return D.a.request({url:"/resource/getResourceRankingList",method:"post",data:e})}var O=a("2f62");function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var j,S={directives:{close:{inserted:function(e,t,a){window.addEventListener("click",(function(r){e.contains(r.target)||(a.context[t.value.data]=!1)}))}}},data:function(){return{cityList:[{value:"1",label:"长期班缴费人次"},{value:"2",label:"转化产品参与人数"},{value:"3",label:"加微人头"}],schoolList:[{value:"1",label:"同分校"},{value:"3",label:"全国"}],city:1,school:1,indexTcolor:{0:"firstNum",1:"secondNum",2:"thirdNum"},indexTranUnit:{1:"人次",2:"人数",3:"人头"},rankData:{},queryDate:13,showCity:!1,showSchool:!1,itemToField:{city:"showCity",school:"showSchool"},currentschool:"同分校",currentcity:"长期班缴费人次"}},props:["date"],created:function(){},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(C.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(O.e)("roleRelativeData",["userInfo"])),methods:{openValue:function(e){this[this.itemToField[e]]=!this[this.itemToField[e]]},getVal:function(e,t){var a=e.value,r=e.label;this[t]=a,this["current"+t]=r,this.openValue(t),this.search()},search:(j=Object(x.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={rankingType:this.city,dimensionalityType:this.school,empNo:this.userInfo.empNo,cityCode:this.userInfo.cityCode,queryDate:this.queryDate,crmRoleId:this.userInfo.crmRoleId},e.prev=1,e.next=4,P(t);case 4:this.rankData=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.$Message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return j.apply(this,arguments)})},watch:{date:{handler:function(e){this.queryDate=e,this.search()}}}},N=(a("d7fc"),Object(m.a)(S,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"context_box"},[a("div",{staticClass:"search_box"},[a("div",{directives:[{name:"close",rawName:"v-close",value:{data:"showCity"},expression:"{data:'showCity'}"}],staticClass:"select_content"},[a("div",{staticClass:"select_top"},[a("span",{class:e.showCity?"select_box bulecolor ":"select_box nomalcolor"},[e._v(e._s(e.currentcity))]),e._v(" "),a("span",{class:e.showCity?"select_icon borderdownbulecolor":"select_icon borderdowncolor",on:{click:function(t){return e.openValue("city")}}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCity,expression:"showCity"}],staticClass:"select_list"},[a("ul",e._l(e.cityList,(function(t){return a("li",{key:t.key,on:{click:function(a){return e.getVal(t,"city")}}},[e._v(e._s(t.label))])})),0)])]),e._v(" "),a("div",{directives:[{name:"close",rawName:"v-close",value:{data:"showSchool"},expression:"{data:'showSchool'}"}],staticClass:"select_content right"},[a("div",{staticClass:"select_top"},[a("span",{class:e.showSchool?"select_box bulecolor ":"select_box nomalcolor"},[e._v(e._s(e.currentschool))]),e._v(" "),a("span",{class:e.showSchool?"select_icon borderdownbulecolor":"select_icon borderdowncolor",on:{click:function(t){return e.openValue("school")}}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showSchool,expression:"showSchool"}],staticClass:"select_list",staticStyle:{width:"80px"}},[a("ul",e._l(e.schoolList,(function(t){return a("li",{key:t.key,on:{click:function(a){return e.getVal(t,"school")}}},[e._v(e._s(t.label))])})),0)])])]),e._v(" "),a("div",[e._m(0),e._v(" "),e.rankData&&e.rankData.resourceRankingList?a("div",{staticClass:"c_box"},e._l(e.rankData.resourceRankingList,(function(t,r){return a("div",{key:t.id+t.empName,class:t.id>20?"bg body":"body"},[a("div",[a("span",{class:[r<=2?e.indexTcolor[r]:"","nomalNum"]},[e._v(e._s(t.id))])]),e._v(" "),a("div",{staticClass:"sencond"},[a("span",[e._v(e._s(t.empName))]),t.empNo==e.userInfo.empNo?a("span",{staticClass:"myself"},[e._v("我")]):e._e()]),a("div",{staticClass:"cityInfo"},[e._v(e._s(t.cityName))]),a("div",[e._v(e._s(t.finishTotal+e.indexTranUnit[e.city]))])])})),0):e._e(),e._v(" "),5==e.userInfo.crmRoleId?a("div",{staticClass:"footer"},[a("span",[e._v(e._s("Hi～"+e.userInfo.empName+"老师"))]),e._v(" "),e.rankData&&1==e.rankData.encourageType?a("p",[e._v(e._s(e.currentschool+"有"+e.rankData.branchSchoolTotal+"名顾问老师，您目前的"+e.currentcity+"完成量在第"+e.rankData.branchSchoolRanking+"名，真棒哦～"))]):e._e(),e._v(" "),e.rankData&&2==e.rankData.encourageType?a("p",[e._v(e._s(e.currentschool+"有"+e.rankData.branchSchoolTotal+"名顾问老师，您目前的"+e.currentcity+"完成量在第"+e.rankData.branchSchoolRanking+"名，有希望赶超上一个老师哦～"))]):e._e(),e._v(" "),e.rankData&&3==e.rankData.encourageType?a("p",[e._v(e._s(e.currentschool+"有"+e.rankData.branchSchoolTotal+"名顾问老师，您目前的"+e.currentcity+"完成量在第"+e.rankData.branchSchoolRanking+"名，努努力，不做垫底～"))]):e._e()]):e._e()])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",[this._v("排名")]),this._v(" "),t("div",{staticClass:"sencond"},[this._v("姓名")]),this._v(" "),t("div",{staticClass:"cityInfo"},[this._v("分校")]),this._v(" "),t("div",[this._v("完成量")])])}],!1,null,"a69c4f36",null).exports),I=a("3620"),L=a("9394"),z=a("2da7"),$=a("4b2a"),R=a("ff32");i.a([L.a,z.a,$.a,R.a,I.a,c.a]);var E={props:["trendEchartsData","type"],data:function(){var e=this;return{btnType:"1",option:{color:["#D75E44"],title:{text:"测试",textStyle:{fontSize:16,fontWeight:500,lineHeight:24,color:"rgba(0,0,0,0.9)"},subtext:"danwei",subtextStyle:{verticalAlign:"bottom",lineHeight:40}},tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0.85)",axisPointer:{type:"line",label:{backgroundColor:"#9E9E9E",snap:!0},lineStyle:{cap:"round"}},formatter:function(t){var a=t[0].axisValue,r="",n="",s="",i="";return t.forEach((function(t){var l=t.data,o=t.seriesName,c=t.color,u=t.dataIndex;s=e.trendEchartsData.noTotal?'<div style="font-size:14px;font-weight:600;color:#fff;margin-bottom:16px"><span  style="font-size: 12px;color:rgba(255, 255, 255, 0.85)";line-height:16px >'+a+"</span></div>":'<div style="font-size:14px;display:flex; justify-content: space-between;font-weight:600;color:#fff;margin-bottom:16px"><span  style="font-size: 12px;color:rgba(255, 255, 255, 0.85)";line-height:16px >'+a+'</span><div style="line-height:22px;">总计<span style="display:inline-block;margin-left:8px;">'+e.trendEchartsData.total[u]+" </span> </div></div>";var m='<span style="display:inline-block;margin:0 6px 1px 0;border-radius:6px;width:6px;height:6px;background-color:'.concat(c,'"></span>');r+='<div style="display: flex;justify-content: space-between;font-size: 14px;color: #fff;" > <span style="font-size: 12px;rgba(255, 255, 255, 0.85)">'+m+o+'</span> <span style="font-weight:500">'+l+"</span> </div>",n=e.trendEchartsData.noNewPerson?"":'<div style="margin:12px 0 8px 0 ;font-size: 14px;color: #fff;" > <span style="color:rgba(255, 255, 255, 0.85);font-size: 12px;margin-right:12px">新生</span> <span style="font-weight:500">'+e.trendEchartsData.newPerson[u]+"</span> </div>",i=e.trendEchartsData.noNewPerson?"":'<div style="font-size: 14px;color: #fff;" > <span style="font-size: 12px;margin-right:12px;rgba(255, 255, 255, 0.85)">老生</span> <span style="font-weight:500">'+e.trendEchartsData.oldPerson[u]+"</span> </div>"})),'<div style="padding:8px; width:212px;box-sizing:border-box">'+s+r+(e.trendEchartsData.noNewPerson?"":n+i)+"</div>"}},legend:{data:["加微量"],borderRadius:2,top:"10%",right:0,icon:"circle",itemWidth:6,itemGap:40,textStyle:{fontSize:12,color:"#606366"}},grid:{top:"20%",left:"1%",right:"0%",bottom:"5%",containLabel:!0},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"],axisLine:{onZero:!0,lineStyle:{color:"rgba(0, 0, 0, 0.25)"}},axisLabel:{textStyle:{color:"#606366"}}},yAxis:{type:"value"},series:[{name:"加微量",type:"line",stack:!1,showSymbol:!1,emphasis:{focus:"series"},noNewPerson:!0,data:[120,132,210]}]}}},computed:{},mounted:function(){},methods:{changeTime:function(e){this.$emit("queryData",e,this.type)}},watch:{trendEchartsData:{handler:function(e){var t=this;this.$nextTick((function(){var a=e.lineColor,r=e.titleText,n=e.legendData,s=e.xAxisData,i=e.xAxisName,o=e.series,c=l.b(document.getElementById("echarts"+t.type));c||(c=l.c(document.getElementById("echarts"+t.type))),t.option.title.text=r,t.option.title.subtext=i,t.option.color=a,t.option.xAxis.data=s,t.option.legend.data=n,t.option.series=o,c.setOption(t.option),window.addEventListener("resize",(function(){c.resize()}))}))},deep:!0}}},M=(a("ea1e"),{name:"adviserDataKanban",components:{FlowPoll:h,ChartDetail:k,RankList:N,FunnelData:_,TrendEcharts:Object(m.a)(E,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content_box"},[a("div",{staticClass:"btn_list"},[a("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeTime},model:{value:e.btnType,callback:function(t){e.btnType=t},expression:"btnType"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近一个月")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近两个月")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近三个月")]),e._v(" "),a("el-radio-button",{attrs:{label:"4"}},[e._v("近半年")])],1)],1),e._v(" "),a("div",{staticClass:"echarts",staticStyle:{height:"395px"},attrs:{id:"echarts"+e.type}})])}),[],!1,null,"317ca364",null).exports},data:function(){return{monthList:[],updateTime:"",selectMonth:"",queryParams:{crmRoleId:"",baseDataId:"",empNo:"",queryDate:"",crmDeptId:""},resourceDetails:{},resourceDetailsKeyMap:[{key:"addWxFlowTotal",name:"加微量",tooltip:"所筛选的时间段内，产生的加微数据统计",items:[{key:"target",name:"有效加微目标",tooltip:"设置出的加微人头目标"},{key:"schoolSort",name:"分校排名",tooltip:"所筛选的时间段内，有效加微人头在分校的排名"}],funnelItems:[{key:"personHeadCount",name:"加微人头",tooltip:"所筛选的时间段内，加微用户量"},{key:"personCount",name:"有效加微人头",tooltip:"所筛选的时间段内，加微且备注手机号的用户量"},{key:"completeRate",name:"达成率",tooltip:"有效加微信人头/有效加微目标"},{key:"dayAddCount",name:"日均加微",tooltip:"有效加微信人头/筛选时间段天数",unit:"人头"},{key:"dayCompared",name:"日环比",tooltip:"截止今日有效加微量与截止昨日相比"},{key:"monthCompared",name:"月环比",tooltip:"x月截止到当月最后一天有效加微量，相比x月上一月最后一天的有效加微量"}],charts:[{key:"1111",name:"1v1加微",noData:!0},{key:"2222",name:"盘古注册",noData:!0},{key:"3333",name:"流通店/到店",noData:!0},{key:"4444",name:"其他",noData:!0}]},{key:"transProductsTotal",name:"转化产品",tooltip:"所筛选的时间段内，参与诊断、试听等转化产品的数据统计",items:[{key:"target",name:"转化产品人数目标",tooltip:"设置出的转化产品人数目标"},{key:"schoolSort",name:"分校排名",tooltip:"所筛选的时间段内，转化产品参与人数在分校的排名"}],funnelItems:[{key:"personHeadCount",name:"转化产品人头",tooltip:"所筛选的时间段内，诊断、试听等转化产品的参与人头。例如：\n参与语文试听1次  语文诊断1，数学诊断1：即为1人头（学员编号去重为1）"},{key:"personCount",name:"转化产品人数",tooltip:"所筛选的时间段内，诊断、试听等转化产品的参与人数。例如：\n参与语文试听1次  语文诊断1，数学诊断1：即为2人数（共参与语文和数学2个科目）"},{key:"completeRate",name:"达成率",tooltip:"参与转化产品转化的人数/目标参与人数"},{key:"dayAddCount",name:"日均参与",tooltip:"转化产品人数/筛选时间段天数",unit:"人数"},{key:"dayCompared",name:"日环比",tooltip:"截止今日转化产品参与人数与截止昨日相比"},{key:"monthCompared",name:"月环比",tooltip:"x月截止到当月最后一天转化产品参与人数，相比x月上一月最后一天的转化产品参与人数"}],charts:[{key:"exam",name:"诊断",tooltip:"所筛选的时间段内，诊断的参与人数。例如：\n参与语文诊断1，数学诊断1：即为2人数（共参与语文和数学2个科目）"},{key:"audition",name:"试听",tooltip:"所筛选的时间段内，试听的参与人数。例如：\n参与语文试听1，数学试听1：即为2人数（共参与语文和数学2个科目）"}]},{key:"longTermPayTotal",name:"缴费长期班",tooltip:"所筛选的时间段内，产生的缴费长期班数据统计",items:[{key:"target",name:"缴费人次目标",tooltip:"设置出的缴费长期班人次目标"},{key:"schoolSort",name:"分校排名",tooltip:"所筛选的时间段内，缴费长期班人次在分校的排名"}],funnelItems:[{key:"personHeadCount",name:"缴费人头",tooltip:"所筛选的时间段内，缴费长期班的人头"},{key:"personCount",name:"缴费人次",tooltip:"所筛选的时间段内，缴费长期班的人次"},{key:"completeRate",name:"达成率",tooltip:"缴费人次/缴费人次目标"},{key:"dayAddCount",name:"日均缴费",tooltip:"缴费人次/筛选时间段天数",unit:"人次"},{key:"dayCompared",name:"日环比",tooltip:"截止今日缴费人次与截止昨日相比"},{key:"monthCompared",name:"月环比",tooltip:"x月截止到当月最后一天缴费人次，相比x月上一月最后一天的缴费人次"}],charts:[{key:"newStu",name:"新注册"},{key:"oldStu",name:"老学员"},{key:"sleepStu",name:"沉睡学员"}]}],funnelData:{},funnelKeyMap:[{key:"wxTotal",items:[{key:"count",name:"加微人头",tooltip:"在筛选时间段内新注册用户中加微信用户量"},{key:"yesterdayCount",name:"昨日加微",tooltip:"注册时间在筛选时间段内的用户，加微日期在当前日期的前一天的所有加微量"},{key:"rate",name:"加微率",tooltip:"新注册用户加微量/新注册用户总量"},{key:"dayAddCount",name:"日均加微",tooltip:"新注册用户加微量/筛选时间段天数",unit:"人头"},{key:"dayCompared",name:"日环比",tooltip:"截止今日有效加微量与截止昨日相比"},{key:"monthCompared",name:"月环比",tooltip:"x月截止到当月最后一天有效加微量，相比x月上一月最后一天的有效加微量"}]},{key:"transProductsTotal",items:[{key:"count",name:"转化产品人头",tooltip:"所筛选的时间段内，新注册用户参与诊断、试听等转化产品的参与人头。例如：\n参与语文试听1次  语文诊断1，数学诊断1：即为1人头（学员编号去重为1）"},{key:"yesterdayCount",name:"昨日参与",tooltip:"注册日期在筛选时间段内的用户，参与日期在当前日期的前一天的所有转化产品参与人头"},{key:"rate",name:"参与率",tooltip:"参与转化产品的人头/新注册用户总量"},{key:"dayAddCount",name:"日均参与",tooltip:"新注册用户转化产品参与人头/筛选时间段天数",unit:"人数"},{key:"dayCompared",name:"日环比",tooltip:"截止今日转化产品参与人数与截止昨日相比"},{key:"monthCompared",name:"月环比",tooltip:"x月截止到当月最后一天转化产品参与人数，相比x月上一月最后一天的转化产品参与人数"}]},{key:"longTearPayTotal",items:[{key:"count",name:"缴费人次",tooltip:"在筛选时间段内新注册用户中30日缴费长期班人次"},{key:"yesterdayCount",name:"昨日缴费",tooltip:"注册日期在筛选时间段内的用户，缴费日期在当前日期的前一天的所有缴费量"},{key:"rate",name:"转化率",tooltip:"缴费人次（30日）/新注册总量"},{key:"dayAddCount",name:"日均缴费",tooltip:"缴费人次（30日）/新注册用户总量",unit:"人次"},{key:"dayCompared",name:"日环比",tooltip:"截止今日缴费人次与截止昨日相比"},{key:"monthCompared",name:"月环比",tooltip:"x月截止到当月最后一天缴费人次，相比x月上一月最后一天的缴费人次"}]}],addWeChatCountList:{lineColor:["#D75E44"],titleText:"每日加微量",legendData:["1v1加微"],xAxisData:["2021-06-01","2021-06-02","2021-06-03"],xAxisName:"单位：人头",series:[{name:"1V1加微量",type:"line",showSymbol:!1,emphasis:{focus:"series"},smooth:!0,data:[20,32,11]},{name:"盘古注册加微",type:"line",showSymbol:!1,smooth:!0,emphasis:{focus:"series"},data:[120,132,101]},{name:"流动店加微",type:"line",showSymbol:!1,smooth:!0,emphasis:{focus:"series"},data:[230,452,601]},{name:"到店加微",type:"line",showSymbol:!1,smooth:!0,emphasis:{focus:"series"},data:[10,42,71]}]},productConvertedCountList:{lineColor:["#3CB631","#5B8FF9"],titleText:"每日转化产品参与量",legendData:["试听","诊断"],xAxisData:["2021-06-01","2021-06-02","2021-06-03"],xAxisName:"单位：人数",series:[{name:"试听",type:"line",showSymbol:!1,smooth:!0,emphasis:{focus:"series"},data:[320,132,101]},{name:"诊断",type:"line",showSymbol:!1,smooth:!0,emphasis:{focus:"series"},data:[120,72,361]}]},dailyPayList:{lineColor:["#5B8FF9","#3CB631","#F9CD5B"],titleText:"每日缴费量",legendData:["新学员","老学员","沉睡学员"],xAxisData:["2021-06-01","2021-06-02","2021-06-03"],xAxisName:"单位：人次",noNewPerson:!0,series:[{name:"新学员",type:"line",showSymbol:!1,smooth:!0,emphasis:{focus:"series"},data:[120,132,101]},{name:"老学员",type:"line",smooth:!0,showSymbol:!1,emphasis:{focus:"series"},data:[190,12,41]},{name:"沉睡学员",type:"line",smooth:!0,showSymbol:!1,emphasis:{focus:"series"},data:[20,72,21]}]},dailyResourceList:{lineColor:["#5B8FF9"],titleText:"每日资源分配量",legendData:[],xAxisData:["2021-06-01","2021-06-02","2021-06-03","2021-06-03","2021-06-03","2021-06-03","2021-06-03","2021-06-03","2021-06-03","2021-06-03","2021-06-03","2021-06-03","2021-06-03"],xAxisName:"单位：人头",noNewPerson:!0,noTotal:!0,series:[{name:"试听",type:"line",showSymbol:!1,emphasis:{focus:"series"},smooth:!0,data:[120,132,101,12,45,67,89,87,45,123,567,334,98,87,67,98]}]},itemTransQueryPath:{addWeChatCountList:"1",productConvertedCountList:"2",dailyPayList:"3",dailyResourceList:"4"},ehartsItem:{addWeChatCountList:[{key:"addWeChat",value:"1v1加微"}],productConvertedCountList:[{key:"exam",value:"诊断"},{key:"audition",value:"试听"}],dailyPayList:[{key:"newPayTotalPeople",value:"新学员"},{key:"oldPayTotalPeople",value:"老学员"},{key:"sleepPayTotalPeople",value:"沉睡学员"}],dailyResourceList:[{key:"bindTotalSum",value:"分配量"}]}}},computed:{crmUserInfo:function(){return this.$store.state.roleRelativeData.userInfo},userInfo:function(){return this.$store.state.user.userInfo},getVar:function(){return function(e){return this[e]}}},mounted:function(){var e=this;this.$nextTick((function(){Object.keys(e.itemTransQueryPath).forEach((function(t){e.queryHandler(1,t)})),e.initMonthSelect()}))},methods:{queryHandler:function(e,t){var a,n=this,s=this,i=this.crmUserInfo,l=i.baseDataId,o=i.crmDeptId,c=i.empNo,u=i.crmRoleId,m=i.cityCode,p={dateType:e,projectType:this.itemTransQueryPath[t],crmRoleId:u,empNo:c,baseDataId:l,crmDeptId:o,cityCode:m};(a=p,D.a.request({url:"/resource/getResourceTendencyList",method:"post",data:a})).then((function(e){var a=e[t],i=a.map((function(e){return e.date}));if("dailyPayList"!==t&&"dailyResourceList"!==t){var l=a.map((function(e){return e.newPerson})),o=a.map((function(e){return e.oldPerson}));r.default.set(s[t],"newPerson",l),r.default.set(s[t],"oldPerson",o)}if("dailyResourceList"!==t){var c=a.map((function(e){return"dailyPayList"===t?e.payTotalSum:e.totalCount}));r.default.set(s[t],"total",c)}var u=n.ehartsItem[t].map((function(e){var t=a.map((function(t){return t[e.key]}));return{name:e.value,type:"line",showSymbol:!1,smooth:!0,data:t}}));r.default.set(s[t],"xAxisData",i),r.default.set(s[t],"series",u)})).catch((function(e){n.$Message.error({content:"查询数据趋势数据: "+e.message,duration:5})}))},initMonthSelect:function(){var e=this;Object(s.e)().then((function(t){e.monthList=t,e.selectMonth=t[t.length-1],e.queryParams.cityCode=e.crmUserInfo.cityCode,e.queryParams.queryDate=t[t.length-1],e.queryParams.baseDataId=e.crmUserInfo.baseDataId,e.queryParams.crmRoleId=e.crmUserInfo.crmRoleId,e.queryParams.empNo=e.userInfo.empNo,e.queryParams.crmDeptId=e.crmUserInfo.crmDeptId,e.$nextTick((function(){e.query()}))})).catch((function(t){e.$Message.error({content:"查询月份选项失败: "+t.message,duration:5})}))},queryResourceDetails:function(){var e=this;Object(s.f)(this.queryParams).then((function(t){e.resourceDetails=t})).catch((function(t){e.$Message.error({content:"查询资源看板详情统计失败: "+t.message,duration:5})}))},queryFunnelDate:function(){var e=this;Object(s.b)(this.queryParams).then((function(t){e.funnelData=t})).catch((function(t){e.$Message.error({content:"查询漏斗数据失败: "+t.message,duration:5})}))},selectChange:function(e){e&&("13"!==e&&"15"!==e&&"16"!==e||(this.selectMonth=""),this.queryParams.queryDate=e,this.query())},query:function(){this.$refs.flowPoll.initView(),this.queryResourceDetails(),this.queryFunnelDate()},getFlowData:function(){this.updateTime=this.$refs.flowPoll.flowData.updateTime}}}),q=(a("4555"),Object(m.a)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"time-select-wrapper"},[a("Select",{class:e.selectMonth?"month-select":"",staticStyle:{width:"119px"},attrs:{placeholder:"按月查询"},on:{"on-change":e.selectChange},model:{value:e.selectMonth,callback:function(t){e.selectMonth=t},expression:"selectMonth"}},e._l(e.monthList,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1),e._v(" "),a("Tooltip",{attrs:{placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(e._s(e.resourceDetails.performanceWeekTime))])]),e._v(" "),a("span",{staticClass:"range-text",class:"16"===e.queryParams.queryDate?"range-select":"",on:{click:function(t){return e.selectChange("16")}}},[e._v("绩效周")])]),e._v(" "),a("span",{staticClass:"range-text",class:"13"===e.queryParams.queryDate?"range-select":"",on:{click:function(t){return e.selectChange("13")}}},[e._v("昨日")]),e._v(" "),a("span",{staticClass:"range-text",class:"15"===e.queryParams.queryDate?"range-select":"",on:{click:function(t){return e.selectChange("15")}}},[e._v("近7日")]),e._v(" "),a("div",{staticClass:"updateTimeArea"},[a("p",[e._v("数据更新时间："+e._s(e.updateTime))])])],1),e._v(" "),a("div",{staticClass:"data-overview title1"},[e._v("数据概览")]),e._v(" "),a("div",{staticClass:"chart-wrapper"},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:6}},[a("FlowPoll",{ref:"flowPoll",attrs:{queryParams:e.queryParams},on:{theFlowData:e.getFlowData}})],1),e._v(" "),a("Col",{attrs:{span:18}},[a("Row",{attrs:{gutter:16}},e._l(e.resourceDetailsKeyMap,(function(t){return a("Col",{key:t.key,attrs:{span:8}},[a("ChartDetail",{attrs:{"detail-data":e.resourceDetails[t.key]||{},"key-map":t}})],1)})),1),e._v(" "),a("div",{staticClass:"new-register-title"},[e._v("\n          新注册流量漏斗数据\n        ")]),e._v(" "),a("Row",{attrs:{gutter:16}},e._l(e.funnelKeyMap,(function(t){return a("Col",{key:t.key,staticClass:"funnel_box",attrs:{span:8}},[a("FunnelData",{attrs:{funnelData:e.funnelData[t.key]||{},"key-map":t.items}})],1)})),1)],1)],1),e._v(" "),a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:6}},[a("div",{staticClass:"title1 title32-16"},[e._v("琅琊榜")]),e._v(" "),a("div",{staticStyle:{height:"928px",background:"#fff"}},[a("RankList",{attrs:{date:e.queryParams.queryDate}})],1)]),e._v(" "),a("Col",{attrs:{span:18}},[a("div",{staticClass:"title1 title32-16"},[e._v("数据趋势")]),e._v(" "),e._l(Object.keys(e.itemTransQueryPath),(function(t){return a("div",{key:t,staticStyle:{height:"419px",background:"#fff","margin-bottom":"16px"}},[a("TrendEcharts",{attrs:{trendEchartsData:e.getVar(t),type:t},on:{queryData:e.queryHandler}})],1)}))],2)],1)],1)])}),[],!1,null,"6a9c4089",null));t.default=q.exports},8598:function(e,t,a){"use strict";a("8e6e"),a("ac6a"),a("cadf"),a("456d");var r=a("bd86"),n=(a("386d"),a("097d"),a("6167")),s=a("c24f"),i=a("2f62");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}t.a={data:function(){return{performanceType:0,dateRange:[],scList:[],scIds:[],userList:[],userIds:[],collectType:"",tableData:[],pageNo:1,pageSize:50,pageSizes:[25,50,100,200],totalCount:0,loading:!1}},methods:{querySCList:function(){var e=this;Object(n.l)({areaCode:this.cityCode}).then((function(t){e.scList=t,e.scIds=t.map((function(e){return e.deptCode}))})).catch((function(t){e.$message.error("查询服务中心列表错误："+t.message)}))},queryUserList:function(e){var t=this;e.length>0&&Object(n.m)({areaCode:this.cityCode,startTime:e[0],endTime:e[1],roleId:this.roleId,deptId:this.deptId}).then((function(e){t.userList=e,t.userIds=e.map((function(e){return e.identityId}))})).catch((function(e){t.$message.error("查询顾问列表错误："+e.message)}))},search:function(e){var t=this;this.dateRange.length?"4"!==this.collectType||this.scIds.length?"5"!==this.collectType||this.userIds.length?(1===e&&(this.pageNo=1),this.loading=!0,Object(s.i)({areaCodeList:[this.cityCode],startDate:this.dateRange[0],endDate:this.dateRange[1],performanceQueryType:this.collectType,baseDataIdList:this.scIds,identityIdList:this.userIds,pageNo:this.pageNo,pageSize:this.pageSize,performanceType:this.performanceType}).then((function(e){t.tableData=e.records,t.totalCount=e.totalCount})).catch((function(e){t.$message.error("查询绩效数据错误："+e.message)})).finally((function(){t.loading=!1}))):this.$message.warning("请选择家庭顾问"):this.$message.warning("请选择服务中心"):this.$message.warning("请选择日期")},handleSizeChange:function(e){this.pageSize=e,this.pageNo=1,this.search()},handleCurrentChange:function(e){this.pageNo=e,this.search()},init:function(){this.collectType=String(this.roleId),this.baseDataId&&(this.scIds=[this.baseDataId])}},watch:{roleId:function(){this.init()},collectType:function(e){this.tableData=[],this.pageNo=1,this.totalCount=0,2===this.roleId&&"4"===e&&(this.scList.length||this.querySCList())}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.e)({roleId:function(e){return e.roleRelativeData.userInfo.crmRoleId},cityCode:function(e){return e.roleRelativeData.userInfo.cityCode},baseDataId:function(e){return e.roleRelativeData.userInfo.baseDataId},deptId:function(e){return e.roleRelativeData.userInfo.crmDeptId}})),mounted:function(){var e=this;this.$nextTick((function(){e.roleId&&e.init()}))}}},"8b77":function(e,t,a){"use strict";a.r(t);a("8e6e"),a("cadf"),a("456d"),a("f751"),a("6762");var r=a("7618"),n=(a("ac6a"),a("bd86")),s=(a("96cf"),a("3b8d")),i=(a("386d"),a("0808"),a("c82c")),l=a.n(i),o=a("325c"),c=a("ccbd"),u=a("f121"),m=a("c276");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h,b=Object(m.n)(),g={exportUrl:u.a.baseUrl[b]+"/SPLAT/crmPanelList/imChatDownload"},f={components:{},data:function(){var e=this;return{total:0,tableData:[],loading:!1,time:[],name:"",keyVal:"",params:{find_start_time:"",find_end_time:"",stu_userid:"",stu_name:"",msg_text:"",pagesize:10,page:1},oneSearch:!1,historyParams:{},pickerMinDate:"",pickerTime:{onPick:function(t){var a=t.maxDate,r=t.minDate;e.pickerMinDate=r.getTime(),a&&(e.pickerMinDate="")},disabledDate:function(t){var a=new Date((new Date).getTime()-864e5);if(""!==e.pickerMinDate){var r=e.pickerMinDate+25056e5;return r>a&&(r=a),t.getTime()>r}return t.getTime()>a}},viewer:null}},watch:{time:function(e){this.params.find_start_time=e[0],this.params.find_end_time=e[1],this.oneSearch||(this.search(),this.oneSearch=!0)},name:function(e){this.params.stu_name=e},keyVal:function(e){this.params.msg_text=e}},mounted:function(){var e=this;this.$store.commit("data/setShowImTag","reply"),this.typeWeek(),this.$route.query.id&&(this.params.stu_userid=this.$route.query.id),this.$nextTick((function(){e.viewer=new l.a(e.$refs.image,{viewed:function(){this.viewer.zoomTo(.3)},navbar:0,toolbar:{zoomIn:4,zoomOut:4,oneToOne:0,reset:4,prev:0,play:{show:0,size:"large"},next:0,rotateLeft:4,rotateRight:4,flipHorizontal:4,flipVertical:4}})}))},methods:{searchButton:function(){this.params.page=1,this.search()},search:(h=Object(s.a)(regeneratorRuntime.mark((function e(t){var a,n,s,i,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t||d({},this.params),this.historyParams=a,this.loading=!0,e.prev=3,e.next=6,Object(c.g)(a);case 6:n=e.sent,s=n.records,i=[],s.forEach((function(e){var t=e.msg||"";e.time=e.act_time_stu||e.act_time_tch;try{t=JSON.parse(t)}catch(e){}if("object"===Object(r.a)(t)){var a=t.ext&&t.ext.toLowerCase();["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"].includes(a)?(e.type="audio",e.src=t.url,e.dur=t.dur||0,e.md5=t.md5):["jpg","jpeg","png","bmp","gif"].includes(a)&&(e.type="image",e.src=t.url,e.w=t.w,e.h=t.h)}else/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/.test(t)?(e.type="url",e.url=t):(e.type="text",e.msg=e.msg);i.push(e)})),this.tableData=i||[],this.total=n.totalCount,this.$nextTick((function(){l.viewer.update()})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),this.$Message.error({content:"获取列表失败："+e.t0.message});case 18:return e.prev=18,this.loading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,15,18,21]])}))),function(e){return h.apply(this,arguments)}),typeWeek:function(){var e=o.a.getDayTime(1),t=o.a.getDayTime(7);this.time=[t.FullDate,e.FullDate]},handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},exportData:function(){var e=Object.assign({},this.historyParams,{empNo:this.$store.state.user.userInfo.id});delete e.page,delete e.pagesize,o.a.download(g.exportUrl,e,"get")}}},v=(a("5ed4"),a("2877")),y=Object(v.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("div",[a("el-form",{attrs:{size:"medium"}},[a("el-form-item",{attrs:{label:" "}},[a("el-col",{attrs:{span:8}},[a("span",[e._v("消息时间")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"260px"},attrs:{size:"small","picker-options":e.pickerTime,clearable:!1,type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",[e._v("学员姓名")]),e._v(" "),a("el-input",{staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"请输入学员姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",[e._v("信息关键词")]),e._v(" "),a("el-input",{staticStyle:{width:"160px"},attrs:{size:"small",placeholder:"请输入信息关键词"},model:{value:e.keyVal,callback:function(t){e.keyVal=t},expression:"keyVal"}}),e._v(" "),a("el-button",{staticClass:"search",attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("搜索")])],1),e._v(" "),a("el-col",{staticClass:"export",attrs:{span:3}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportData}},[e._v("导出数据")])],1)],1)],1)],1),e._v(" "),a("div",{ref:"image",staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"timestamp",label:"时间","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"学员","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stuid",label:"学员编号","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"接收/发送","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msg",label:"信息","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["image"===t.row.type?a("img",{attrs:{src:t.row.src,width:"50",height:"50"}}):"text"===t.row.type?a("span",[a("span",[e._v(e._s(t.row.msg))])]):"audio"===t.row.type?a("audio",{staticClass:"audio",attrs:{controls:"controls"}},[a("source",{attrs:{src:t.row.src}})]):"url"===t.row.type?a("a",{attrs:{href:t.row.url,target:"_blank"}},[e._v(e._s(t.row.url))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态","min-width":"80",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"43a267e4",null);t.default=y.exports},"8c32":function(e,t,a){"use strict";a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("386d");var r,n,s=a("75fc"),i=(a("7f7f"),a("0d6d"),a("96cf"),a("3b8d")),l=a("bd86"),o=a("1616"),c=a("c24f"),u=a("867e"),m=a("a78e"),p=a.n(m),d=a("2f62");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}t.a={components:{SelectAll:o.a},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({advisoryGroupChecked:function(){var e=this;return this.advisoryList.filter((function(t){return e.advisoryEmpNosChecked.indexOf(t.empNo)>-1}))},advisoryGroupString:function(){return this.advisoryGroup.reduce((function(e,t){return e+t.empName+", "}),"").slice(0,-1)}},Object(d.e)({roleId:function(e){return e.roleRelativeData.userInfo.crmRoleId},cityCode:function(e){return e.roleRelativeData.userInfo.cityCode},deptId:function(e){return e.roleRelativeData.userInfo.crmDeptId}})),data:function(){return{dateSection:[],formData:{date:"",useAdvisoryGroup:!1,pageNo:1,pageSize:50,pageSizes:[25,50,100,200],totalCount:0,stuLoginName:"",stuName:""},advisoryList:[],advisoryGroup:[],advisoryEmpNosChecked:[],tableData:[],monthList:[],loading:!1,exportIng:!1,allCityList:[],gradeList:[],termList:[],areaCodeList:[],claGradeIdList:[],claTermIdList:[]}},methods:{getGradeList:(n=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={cityCode:"010"},e.next=4,Object(u.g)(t);case 4:a=e.sent,this.gradeList=Object.freeze(a),this.claGradeIdList=a.map((function(e){return e.name=e.gradeTypeName+"-"+e.name,e.schoolId})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.$Message.warning({content:"获取年级失败:"+e.t0.message,duration:5});case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return n.apply(this,arguments)}),getTermList:function(){var e=this;Object(u.v)({cityCode:"010"}).then((function(t){e.termList=t.slice(0,4),e.claTermIdList=e.termList.map((function(e){return e.schoolId}))})).catch((function(t){e.$Message.error("获取学期失败:"+t.message)}))},getCityListHandler:function(){var e=this;Object(u.d)().then((function(t){e.allCityList=t,e.areaCodeList=t.map((function(e){return e.id}))})).catch((function(t){e.$Message.warning({content:"获取所有城市失败:"+t.message,duration:5})}))},downloadExcel:function(){window.open("https://speiyou-tbe-fe.oss-cn-beijing.aliyuncs.com/绩效规则.xlsx")},updateAdvisoryGroup:(r=Object(i.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],a=Object(s.a)(this.advisoryGroupChecked),this.formData.useAdvisoryGroup=!0,"delete"===t&&(a=[],this.formData.useAdvisoryGroup=!1),e.next=6,this.saveAdvisorGroup(a,t);case 6:this.queryGroupList();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),exportData:function(){var e=this;if(!this.formData.date)return this.$message.warning({message:"请选择月份"});var t=this.advisoryEmpNosChecked;this.formData.useAdvisoryGroup&&(t=this.advisoryGroup.map((function(e){return e.empNo})));var a=null;switch(this.roleId){case 2:case 4:a=2;break;case 5:t=[JSON.parse(p.a.get("columbusUserInfo")).id],a=5;break;case 1:t=void 0,a=1}var r={isLongTerm:this.isLongTerm,areaCodeList:1===this.roleId?this.areaCodeList:[this.cityCode],jxMonth:this.formData.date,jxMonthStart:this.formData.date[0],jxMonthEnd:this.formData.date[1],pageNo:this.formData.pageNo,pageSize:this.formData.pageSize,stuLoginName:this.formData.stuLoginName,stuName:this.formData.stuName,performanceQueryType:a,claGradeIdList:1===this.isLongTerm?this.claGradeIdList:void 0,claTermIdList:1===this.isLongTerm?this.claTermIdList:void 0,empNoList:t};this.exportIng=!0,this.$message.info({message:"正在导出excel，请勿关闭当前标签页",duration:5e3}),this.queryExportId(r).then((function(t){!function e(t,a){Object(c.a)({id:t,queryId:a.queryId}).then((function(r){r.filePath?(window.open(r.filePath),a.exportIng=!1):setTimeout((function(){e(t,a)}),2e3)})).catch((function(e){a.exportIng=!1,a.$message.error({message:e.message,duration:5e3})}))}(t.id,e)})).catch((function(t){e.exportIng=!1,e.$message.error({message:t.message,duration:5e3})}))},initView:function(){2!==this.roleId&&4!==this.roleId||(this.queryAdvisoryList(),this.queryGroupList()),"detail"===this.source&&this.queryPerformanceMonth(),1===this.roleId&&this.getCityListHandler(),this.getGradeList(),this.getTermList()},queryAdvisoryList:function(){var e=this;Object(c.j)({areaCode:this.cityCode,roleId:this.roleId,deptId:this.deptId}).then((function(t){e.advisoryList=t,e.advisoryEmpNosChecked=t.map((function(e){return e.empNo}))})).catch((function(t){e.$message.error("查询顾问列表失败："+t.message)}))},saveAdvisorGroup:function(e,t){var a=this,r=e;return Object(c.q)(r).then((function(){"delete"===t?a.$message.success({message:"删除成功"}):a.$message.success({message:"保存成功"})})).catch((function(e){"delete"===t?a.$message.error({message:"删除失败请重试"+e.message}):a.$message.error({message:"保存失败请重试"+e.message})}))},queryGroupList:function(){var e=this,t={empNo:JSON.parse(p.a.get("columbusUserInfo")).id};Object(c.f)(t).then((function(t){e.advisoryGroup=Object.freeze(t)})).catch((function(t){e.$message.error({message:t.message})}))},queryPerformanceMonth:function(){var e=this,t={empNo:JSON.parse(p.a.get("columbusUserInfo")).id};Object(c.l)(t).then((function(t){e.monthList=Object.freeze(t)})).catch((function(t){e.$message.error({message:t.message})}))},selectChange:function(e){this.queryAdvisoryList(e)},handleSizeChange:function(e){this.formData.pageSize=e,this.formData.pageNo=1,this.search()},handleCurrentChange:function(e){this.formData.pageNo=e,this.search()},search:function(){var e=this;if(!this.formData.date&&0===this.formData.date.length)return this.$message.warning({message:"请选择月份"});var t=this.advisoryEmpNosChecked;this.formData.useAdvisoryGroup&&(t=this.advisoryGroup.map((function(e){return e.empNo})));var a=null;switch(this.roleId){case 2:case 4:a=2;break;case 5:t=[JSON.parse(p.a.get("columbusUserInfo")).id],a=5;break;case 1:t=void 0,a=1}var r={isLongTerm:this.isLongTerm,areaCodeList:1===this.roleId?this.areaCodeList:[this.cityCode],jxMonth:this.formData.date,jxMonthStart:this.formData.date[0],jxMonthEnd:this.formData.date[1],pageNo:this.formData.pageNo,pageSize:this.formData.pageSize,stuLoginName:this.formData.stuLoginName,stuName:this.formData.stuName,performanceQueryType:a,claGradeIdList:1===this.isLongTerm?this.claGradeIdList:void 0,claTermIdList:1===this.isLongTerm?this.claTermIdList:void 0,empNoList:t};this.loading=!0,this.query(r).then((function(t){e.tableData=Object.freeze(t.records),e.formData.totalCount=t.totalCount,e.loading=!1})).catch((function(t){e.loading=!1,e.$message.error({message:t.message})}))}},watch:{roleId:function(){this.initView()}},mounted:function(){var e=this;"detail"===this.source?(this.query=c.g,this.queryExportId=c.k):"refund"===this.source&&(this.query=c.h,this.queryExportId=c.n),this.$nextTick((function(){e.roleId&&e.initView()}))}}},"8e75":function(e,t,a){"use strict";var r=a("325c"),n={props:{label:{type:String,default:"年份："},paramKey:{type:String,default:"transyear"}},data:function(){return{list:[],year:""}},watch:{year:function(e){var t={};t[this.paramKey]=e,this.$emit("getParams",t)}},mounted:function(){this.getNowYear()},methods:{getNowYear:function(){for(var e=r.a.getDayTime(0).year,t=2017;t<=e+1;t++)this.list.push(t);this.year=e}}},s=a("2877"),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:e.label}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},e._l(e.list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1)}),[],!1,null,"25ea7971",null);t.a=i.exports},"916c":function(e,t,a){},"92ec":function(e,t,a){"use strict";var r=a("9ac7");a.n(r).a},9964:function(e,t,a){},"9a2f3":function(e,t,a){},"9ac7":function(e,t,a){},a279:function(e,t,a){"use strict";var r=a("325c"),n={props:{initParams:{type:Object,default:function(){return{}}},typeList:{type:Array,default:function(){return["1","2","3","4","5"]}}},data:function(){return{time:[{name:"按天",value:"1"},{name:"按自然周",value:"2"},{name:"按自然月",value:"3"},{name:"按绩效月",value:"4"},{name:"按季度",value:"5"},{name:"按年份",value:"6"}],type:"1",time1:[],time2:"",lastDay:"",pickerTime:{disabledDate:function(e){return e.getTime()>new Date((new Date).getTime()-864e5)}}}},computed:{handleParams:function(){return{time1:this.time1,time2:this.time2,type:this.type}}},watch:{handleParams:function(){var e={counttime:this.type};"1"===this.type?(e.starttime=this.time2+" 00:00:00",e.endtime=this.time2+" 23:59:59"):(e.starttime=this.time1[0]+" 00:00:00",e.endtime=this.time1[1]+" 23:59:59"),this.$emit("getParams",e)}},mounted:function(){if(this.initParams.counttime){this.type=this.initParams.counttime;var e=r.a.formatTime(new Date(this.initParams.starttime).getTime()).FullDate,t=r.a.formatTime(new Date(this.initParams.endtime).getTime()).FullDate;"1"===this.type?this.time2=e:this.time1=[e,t]}else this.typeDay(),this.lastDay=r.a.getDayTime(1)},methods:{changeTime:function(e){var t=new Date(e[0]+" 00:00:00"),a=new Date(e[1]+" 23:59:59");switch(this.type){case"2":this.getWeekTime(t,a);break;case"3":this.getMonthTime(t,a);break;case"4":this.getJxMonthTime(t,a);break;case"5":this.getSeasontime(t,a);break;case"6":this.getYearTime(t,a)}},changeTimeType:function(e){switch(e){case"1":this.typeDay();break;case"2":this.typeWeek();break;case"3":this.typeMonth();break;case"4":this.typeJxMonth();break;case"5":this.typeSeason();break;case"6":this.typeYear()}},typeDay:function(){var e=r.a.getDayTime(1);this.time2=e.FullDate},typeWeek:function(){var e=r.a.getDayTime(1),t=r.a.getDayTime(e.week);this.time1=[t.FullDate,e.FullDate]},typeMonth:function(){var e=r.a.getDayTime(1),t=e.year+"-"+e.month+"-01";t=r.a.formatTime(new Date(t).getTime()).FullDate,this.time1=[t,e.FullDate]},typeJxMonth:function(){var e=r.a.getDayTime(1),t="";t=e.day>=20?e.year+"-"+e.month+"-20":(1===e.month?e.year-1:e.year)+"-"+(1===e.month?12:e.month-1)+"-20",t=r.a.formatTime(new Date(t).getTime()).FullDate,this.time1=[t,e.FullDate]},typeSeason:function(){var e=r.a.getDayTime(1),t="",a="";a=e.month<=3?1:e.month>3&&e.month<=6?4:e.month>6&&e.month<=9?7:10,t=e.year+"-"+a+"-01",t=r.a.formatTime(new Date(t).getTime()).FullDate,this.time1=[t,e.FullDate]},typeYear:function(){var e=r.a.getDayTime(1),t=e.year+"-01-01";this.time1=[t,e.FullDate]},getWeekTime:function(e,t){var a=0===e.getDay()?7:e.getDay(),n=0===t.getDay()?7:t.getDay(),s=[];s[0]=r.a.formatTime(e.getTime()-864e5*(a-1)).FullDate,s[1]=r.a.formatTime(t.getTime()+864e5*(7-n)).FullDate,this.time1=s},getMonthTime:function(e,t){var a=r.a.formatTime(e.getTime()),n=r.a.formatTime(t.getTime()),s=[];s[0]=new Date(a.year,a.month-1,1),s[1]=new Date(n.year,n.month,0);var i=r.a.formatTime(new Date(s[0]).getTime()),l=r.a.formatTime(new Date(s[1]).getTime());this.time1=[i.FullDate,l.FullDate]},getJxMonthTime:function(e,t){var a=r.a.formatTime(e.getTime()),n=r.a.formatTime(t.getTime()),s=[],i="",l="",o="",c="";a.day>=20?s[0]=a.year+"-"+a.month+"-20":(i=1===a.month?a.year-1:a.year,l=1===a.month?12:a.month-1,s[0]=i+"-"+l+"-20"),n.day<20?s[1]=n.year+"-"+n.month+"-19":(o=12===n.month?n.year+1:n.year,c=12===n.month?1:n.month+1,s[1]=o+"-"+c+"-19");var u=r.a.formatTime(new Date(s[0]).getTime()),m=r.a.formatTime(new Date(s[1]).getTime());this.time1=[u.FullDate,m.FullDate]},getSeasontime:function(e,t){var a=r.a.formatTime(e.getTime()),n=r.a.formatTime(t.getTime()),s=[],i="",l="";i=a.month<=3?1:a.month>3&&a.month<=6?4:a.month>6&&a.month<=9?7:10,l=n.month<=3?3:n.month>3&&n.month<=6?6:n.month>6&&n.month<=9?9:12,s[0]=a.year+"-"+i+"-01",s[1]=new Date(n.year,l,0);var o=r.a.formatTime(new Date(s[0]).getTime()),c=r.a.formatTime(new Date(s[1]).getTime());this.time1=[o.FullDate,c.FullDate]},getYearTime:function(e,t){var a=r.a.formatTime(e.getTime()),n=r.a.formatTime(t.getTime()),s=[],i=r.a.getDayTime(1).year;s[0]=a.year+"-01-01",n.year>=i?s[1]=r.a.getDayTime(1).FullDate:s[1]=n.year+"-12-31",this.time1=s}}},s=a("2877"),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"统计时间："}},[a("el-radio-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.time,(function(t){return a("el-radio",{directives:[{name:"show",rawName:"v-show",value:e.typeList.includes(t.value),expression:"typeList.includes(item.value)"}],key:t.value,attrs:{size:"small",label:t.value},on:{change:e.changeTimeType}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.type,expression:"type==='1'"}],attrs:{label:" "}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{size:"small","picker-options":e.pickerTime,clearable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.time2,callback:function(t){e.time2=t},expression:"time2"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"!==e.type,expression:"type!=='1'"}],attrs:{label:" "}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{size:"small","picker-options":e.pickerTime,clearable:!1,type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeTime},model:{value:e.time1,callback:function(t){e.time1=t},expression:"time1"}})],1)],1)}),[],!1,null,"c6cffb12",null);t.a=i.exports},a476:function(e,t,a){"use strict";var r=a("5253");a.n(r).a},a7c5:function(e,t,a){"use strict";var r=a("325c"),n={data:function(){return{time:"",pickerTime:{disabledDate:function(e){return e.getTime()>new Date((new Date).getTime()-864e5)}}}},watch:{time:function(e){var t="";e&&(t=e+" 23:59:59"),this.$emit("getParams",{deadline:t})}},mounted:function(){this.typeDay()},methods:{typeDay:function(){var e=r.a.getDayTime(1);this.time=e.FullDate}}},s=a("2877"),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"截止日期："}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{size:"small","picker-options":e.pickerTime,clearable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)],1)}),[],!1,null,"79cad7e8",null);t.a=i.exports},a8ff:function(e,t,a){"use strict";var r={props:{label:{type:String,default:"课程类型："}},data:function(){return{list:[{name:"全部",value:"0"},{name:"面授+双师",value:"7"},{name:"在线",value:"1"}],type:"0"}},watch:{type:function(e){this.$emit("getParams",{serviceline:e})}},mounted:function(){this.$emit("getParams",{serviceline:this.type})},methods:{}},n=a("2877"),s=Object(n.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:e.label}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)}),[],!1,null,"c585bd70",null);t.a=s.exports},ae93:function(e,t,a){},b408:function(e,t,a){"use strict";var r=a("1445");a.n(r).a},b744:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("f751");var r=a("bd86"),n=(a("96cf"),a("3b8d")),s=(a("386d"),a("325c")),i=a("ccbd"),l=a("f121"),o=a("c276");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m,p=Object(o.n)(),d={exportUrl:l.a.baseUrl[p]+"/SPLAT/crmPanelList/evaluationExport"},h={components:{},data:function(){return{total:0,tableData:[],loading:!1,time:[],params:{startTime:"",endTime:"",userId:"",pageSize:10,pageNo:1},oneSearch:!1,historyParams:{},pickerTime:{disabledDate:function(e){return e.getTime()>new Date((new Date).getTime()-864e5)}}}},watch:{time:function(e){this.params.startTime=s.a.getTimestamp(e[0]+" 00:00:00",10),this.params.endTime=s.a.getTimestamp(e[1]+" 23:59:59",10),this.oneSearch||(this.search(),this.oneSearch=!0)}},mounted:function(){this.typeWeek(),this.$route.query.id&&(this.params.userId=this.$route.query.id)},methods:{handleCurrentChange:function(e){this.params.pageNo=e,this.historyParams.pageNo=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pageSize=e,this.historyParams.pageSize=e,this.search(this.historyParams)},searchButton:function(){this.params.pageNo=1,this.search()},search:(m=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t||u({},this.params),this.historyParams=a,e.prev=2,this.loading=!0,e.next=6,Object(i.d)(a);case 6:r=e.sent,this.tableData=r.records||[],this.total=r.totalCount,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.$Message.error({content:"获取列表失败："+e.t0.message});case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,11,14,17]])}))),function(e){return m.apply(this,arguments)}),typeWeek:function(){var e=s.a.getDayTime(1),t=s.a.getDayTime(7);this.time=[t.FullDate,e.FullDate]},exportData:function(){var e=Object.assign({},this.historyParams,{empNo:this.$store.state.user.userInfo.id});delete e.pageNo,delete e.pageSize,s.a.download(d.exportUrl,e,"get")}}},b=(a("bde3"),a("2877")),g=Object(b.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"评价时间："}},[a("el-col",{attrs:{span:20}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{size:"small","picker-options":e.pickerTime,clearable:!1,type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("el-button",{staticClass:"search",attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("搜索")])],1),e._v(" "),a("el-col",{staticClass:"export",attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportData}},[e._v("导出数据")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"advisorName",label:"顾问","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departName",label:"服务中心","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"passionScore",label:"服务热情","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intimeScore",label:"回复及时","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"professionScore",label:"服务专业","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sovleScore",label:"问题解决","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"建议","min-width":"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"evaluateDate",label:"评价时间","min-width":"100",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{size:"small","current-page":e.params.pageNo,total:e.total,"page-size":e.params.pageSize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"015de4e1",null);t.default=g.exports},b95f:function(e,t,a){"use strict";var r=a("ae93");a.n(r).a},bde3:function(e,t,a){"use strict";var r=a("0153");a.n(r).a},c023:function(e,t,a){},c139:function(e,t,a){"use strict";a.r(t);var r=a("8c32"),n=a("ce61"),s={name:"shortPdKanban",mixins:[r.a],components:{ScrollWrap:n.a},data:function(){return{source:"detail",isLongTerm:0,queryId:1291,maxTableHeight:null}},methods:{handleOnResize:function(e){this.maxTableHeight=e.clientHeight-120}}},i=(a("1d41"),a("2877")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-data"},[a("el-form",{attrs:{"label-width":"120px",inline:!0,size:"medium"}},[a("el-form-item",{attrs:{label:"绩效月份："}},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"月份选择",filterable:""},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}},e._l(e.monthList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),1===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"分校："}},[a("select-all",{attrs:{"data-list":e.allCityList,"init-select":e.areaCodeList,"value-key":"id","label-key":"name"},model:{value:e.areaCodeList,callback:function(t){e.areaCodeList=t},expression:"areaCodeList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),2===e.roleId||4===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"家庭顾问："}},[a("select-all",{attrs:{"data-list":e.advisoryList,"init-select":e.advisoryEmpNosChecked,"value-key":"empNo","label-key":"empName"},model:{value:e.advisoryEmpNosChecked,callback:function(t){e.advisoryEmpNosChecked=t},expression:"advisoryEmpNosChecked"}}),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small",disabled:0===e.advisoryEmpNosChecked.length},on:{click:e.updateAdvisoryGroup}},[e._v("保存为顾问组")]),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"学员姓名"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuName,callback:function(t){e.$set(e.formData,"stuName",t)},expression:"formData.stuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学员编号"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuLoginName,callback:function(t){e.$set(e.formData,"stuLoginName",t)},expression:"formData.stuLoginName"}})],1)],2),e._v(" "),!e.advisoryGroup.length||2!==e.roleId&&4!==e.roleId?e._e():a("div",{staticClass:"advisory-group"},[a("el-checkbox",{staticStyle:{"margin-right":"5px"},model:{value:e.formData.useAdvisoryGroup,callback:function(t){e.$set(e.formData,"useAdvisoryGroup",t)},expression:"formData.useAdvisoryGroup"}}),e._v(" "),a("Tooltip",{staticClass:"item",attrs:{effect:"dark","max-width":"500",content:e.advisoryGroupString,placement:"top"}},[a("p",{staticClass:"advisory-names"},[e._v("已保存顾问组："+e._s(e.advisoryGroupString))])]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:function(t){return e.updateAdvisoryGroup("delete")}}},[e._v("删除顾问组")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{staticStyle:{width:"100px"},attrs:{loading:e.loading,type:"primary",size:"small"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.exportIng,size:"small"},on:{click:e.exportData}},[e._v("导出")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:e.downloadExcel}},[e._v("绩效规则")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("ScrollWrap",{attrs:{"open-resize":"","cus-style":{"max-height":"calc(100vh - 70px)"}},on:{"on-resize":e.handleOnResize}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":e.maxTableHeight}},[a("el-table-column",{attrs:{prop:"date",label:"时间信息",align:"center","label-class-name":"date-info"}},[a("el-table-column",{attrs:{align:"center",prop:"jxMonth",label:"绩效月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"payTime",label:"缴费时间"}})],1),e._v(" "),a("el-table-column",{staticStyle:{background:"#000"},attrs:{prop:"date",label:"学员信息",align:"center","label-class-name":"student-info"}},[a("el-table-column",{attrs:{align:"center",prop:"cityName",label:"分校"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuId",label:"stu_id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuUid",label:"学员uid"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuLoginName",label:"学员编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuName",label:"学员姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"regWay",label:"注册渠道"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"班次信息",align:"center","label-class-name":"class-info"}},[a("el-table-column",{attrs:{align:"center",prop:"regClassId",label:"报班ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claYear",label:"学年"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claTermName",label:"学期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGtName",label:"学部"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGradeName",label:"年级"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claSubjectNames",label:"科目"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claLevelName",label:"班次名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claPrice",label:"班级金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"finalPayPrice",label:"实缴总金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claId",label:"班级ID"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"注册人信息",align:"center","label-class-name":"register-info"}},[a("el-table-column",{attrs:{align:"center",prop:"tsEmpFlag",label:"注册人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsCreateDate",label:"学员注册时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpName",label:"注册人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsServiceCenterName",label:"注册人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsAreaName",label:"所属区域"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"维护人信息",align:"center","label-class-name":"preserve-info"}},[a("el-table-column",{attrs:{align:"center",prop:"whTime",label:"维护开始时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserName",label:"维护人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserWorkCode",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whServiceCenterName",label:"维护人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whAreaName",label:"维护人所属区域"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"报名信息",align:"center","label-class-name":"apply-info"}},[a("el-table-column",{attrs:{align:"center",prop:"trEmpFlag",label:"报名人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpName",label:"报名人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trServiceCenterName",label:"报名人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trAreaName",label:"报名人所属区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"regTime",label:"报名时间"}})],1)],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.formData.pageNo,"page-sizes":e.formData.pageSizes,"page-size":e.formData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.formData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"122cdc3d",null);t.default=l.exports},c24f:function(e,t,a){"use strict";a.d(t,"e",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"o",(function(){return p})),a.d(t,"m",(function(){return d})),a.d(t,"d",(function(){return h})),a.d(t,"g",(function(){return b})),a.d(t,"l",(function(){return g})),a.d(t,"q",(function(){return f})),a.d(t,"f",(function(){return v})),a.d(t,"k",(function(){return y})),a.d(t,"b",(function(){return _})),a.d(t,"j",(function(){return w})),a.d(t,"a",(function(){return k})),a.d(t,"h",(function(){return x})),a.d(t,"n",(function(){return C})),a.d(t,"p",(function(){return D})),a.d(t,"c",(function(){return P}));var r=a("66df"),n=(a("54f3"),a("bc3a")),s=a.n(n),i=a("c276"),l=Object(i.n)(),o="";switch(l){case"dev":o="/SPLAT";break;case"external":o="http://beta-gateway-one.speiyou.cn/".concat("SPLAT","/");break;case"beta":o="http://gateway.one.speiyou.net/".concat("SPLAT","/");break;case"prod":o="https://gateway-one.speiyou.cn/".concat("SPLAT","/")}sessionStorage.setItem("currentEnv",l);var c=s.a.create({baseURL:o,withCredentials:!0,timeout:3e4,headers:{platform:"splat","X-Ca-platform":"service"},responseType:"blob"}),u=function(e){return c.request({url:"user/queryDimensionCode",method:"get",params:e,headers:{cityCode:e.cityCode}})};function m(e){return r.a.request({url:"user/queryPerformanceByCondition",method:"post",data:e})}function p(e){return r.a.request({url:"user/queryServicePerformance",method:"get",params:e})}function d(e){return r.a.request({url:"user/queryPersonalPerformance",method:"get",params:e})}function h(e){return r.a.request({url:"user/queryDateSection",method:"get",params:e})}function b(e){return r.a.request({url:"user/queryPerformDailyDetail",method:"post",data:e})}function g(e){return r.a.request({url:"user/queryPerformanceMonth",method:"get",params:e})}function f(e){return r.a.request({url:"user/saveAdvisorGroup",method:"post",data:e})}function v(e){return r.a.request({url:"user/queryGroupList",method:"get",params:e})}function y(e){return r.a.request({url:"user/queryPerformanceDetailId",method:"post",data:e})}function _(e){return r.a.request({url:"user/exprotPerformanceById",method:"get",params:e})}function w(e){return r.a.request({url:"user/queryPerformanceConsult",method:"get",params:e})}function k(e){return r.a.request({url:"user/exportById",method:"get",params:e})}function x(e){return r.a.request({url:"user/queryPerformRefundDetail",method:"post",data:e})}function C(e){return r.a.request({url:"user/queryRefundPerformanceDataPath",method:"post",data:e})}function D(e){return r.a.request({url:"user/queryStoreActivityLabelList",method:"get",params:e})}function P(e){return r.a.request({url:"user/getChannelUserInfo",method:"get",params:e})}},c2d9:function(e,t,a){},c80d:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var r=a("3b8d"),n=a("bd86"),s=(a("386d"),a("4bca")),i=a("a279"),l=a("8e75"),o=a("a8ff"),c=a("7e42"),u=a("07f7"),m=a("325c"),p=a("1501"),d=a("ccbd"),h=a("f121"),b=a("c276");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v,y=Object(b.n)(),_={exportUrl:h.a.baseUrl[y]+"/SPLAT/crmPanelList/download"},w={name:"dataReportPayment",components:{selectArea:s.a,selectTime:i.a,selectYear:l.a,classType:o.a,classTerm:c.a,classSubject:u.a},data:function(){return{total:0,timeList:["1","2","3","5","6"],params:{starttime:"",endtime:"",counttime:"1",cities:"",areas:"",servcenters:"",collect:"",users:"",serviceline:"",year:"",termid:"",subjectid:"",pagesize:10,page:1},historyParams:{},tableData:[],loading:!1,value1:""}},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},getParams:function(e){var t=f(f({},this.params),e);this.params=t},searchButton:function(){this.params.page=1,this.search()},search:(v=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||f({},this.params),(r=Object(p.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:return a.type=a.counttime,a.operate="payment",this.historyParams=a,e.prev=8,this.loading=!0,e.next=12,Object(d.h)(a);case 12:n=e.sent,this.tableData=n.records||[],this.total=n.totalCount,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),this.$Message.error({content:"获取列表失败："+e.t0.message});case 20:return e.prev=20,this.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[8,17,20,23]])}))),function(e){return v.apply(this,arguments)}),exprot:function(){m.a.download(_.exportUrl,this.historyParams)}}},k=(a("b95f"),a("2877")),x=Object(k.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("select-time",{attrs:{"type-list":e.timeList},on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"end-time":e.params.endtime},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("class-type",{on:{getParams:e.getParams}}),e._v(" "),a("select-year",{attrs:{"param-key":"year"},on:{getParams:e.getParams}}),e._v(" "),a("class-term",{attrs:{"has-short-term":!0},on:{getParams:e.getParams}}),e._v(" "),a("class-subject",{on:{getParams:e.getParams}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"日期","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payManTime",label:"缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perPayManTime",label:"人均缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netPayNum",label:"净缴费人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netPayManTime",label:"净缴费人次","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perNetPayManTime",label:"人均净缴费人次","min-width":"100",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"02cdc20c",null);t.default=x.exports},ccbd:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"h",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"d",(function(){return m}));var r=a("66df");function n(e){return r.a.request({url:"/crmPanelList/getCallGradeList",method:"get",params:e})}function s(e){return r.a.request({url:"/crmPanelList/list",method:"post",data:e})}function i(e){return r.a.request({url:"/crmPanelList/getDepartChildrenHistory",method:"post",data:e})}function l(e){return r.a.request({url:"/crmPanelList/getUserByIdentityHistory",method:"post",data:e})}function o(e){return r.a.request({url:"/crmPanelList/getIdentityHistory",method:"post",data:e})}function c(e){return r.a.request({url:"/crmPanelList/getDepartHistory",method:"post",data:e})}function u(e){return r.a.request({url:"/crmPanelList/imchatList",method:"post",data:e})}function m(e){return r.a.request({url:"/crmPanelList/getEvaluationByUid",method:"post",data:e})}},ce61:function(e,t,a){"use strict";var r=a("90de"),n={props:{openResize:{type:Boolean,default:!1},cusStyle:{type:Object,default:null}},mounted:function(){this.openResize&&(this.getClientHeight(),Object(r.g)(window,"resize",this.getClientHeight))},beforeDestroy:function(){this.openResize&&Object(r.f)(window,"resize",this.getClientHeight)},methods:{getClientHeight:function(){var e=document.body.clientHeight,t=document.body.clientWidth;console.log(e),this.$emit("on-resize",{clientHeight:e,clientWidth:t})}}},s=(a("ee56"),a("2877")),i=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"scroll-wrap",style:this.cusStyle},[this._t("default")],2)}),[],!1,null,"d57f6b8e",null);t.a=i.exports},d02d:function(e,t,a){"use strict";var r=a("c023");a.n(r).a},d0df:function(e,t,a){},d28f:function(e,t,a){"use strict";var r=a("77eb");a.n(r).a},d755:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var r=a("3b8d"),n=a("bd86"),s=(a("386d"),a("4bca")),i=a("a279"),l=a("8e75"),o=a("a8ff"),c=a("7e42"),u=a("07f7"),m=a("325c"),p=a("1501"),d=a("ccbd"),h=a("f121"),b=a("c276");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v,y=Object(b.n)(),_={exportUrl:h.a.baseUrl[y]+"/SPLAT/crmPanelList/download"},w={name:"dataReportKeep",components:{selectArea:s.a,selectTime:i.a,selectYear:l.a,classType:o.a,classTerm:c.a,classSubject:u.a},data:function(){return{total:0,timeList:["1","2","3","5","6"],params:{cities:"",areas:"",servcenters:"",collect:"",users:"",stattype:"1",serviceline:"0",inyear:"",interm:"",insubject:"",continueyear:"",continueterm:"",continuesubid:"",page:1,pagesize:10},historyParams:{},tableData:[],loading:!1,value1:"",searchStattype:"1"}},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},getParams:function(e){var t=f(f({},this.params),e);this.params=t},searchButton:function(){this.params.page=1,this.search()},search:(v=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("1"===(a=t||f({},this.params)).stattype&&delete a.continuesubid,(r=Object(p.a)(a)).check){e.next=6;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 6:return a.operate="resubmit",this.historyParams=a,e.prev=8,this.loading=!0,e.next=12,Object(d.h)(a);case 12:n=e.sent,this.searchStattype=this.params.stattype,this.tableData=n.records||[],this.total=n.totalCount,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),this.$Message.error({content:"获取列表失败："+e.t0.message});case 21:return e.prev=21,this.loading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[8,18,21,24]])}))),function(e){return v.apply(this,arguments)}),exprot:function(){m.a.download(_.exportUrl,this.historyParams)}}},k=(a("a476"),a("2877")),x=Object(k.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("select-area",{attrs:{"has-time":!1},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"统计项："}},[a("el-radio",{attrs:{label:"1"},model:{value:e.params.stattype,callback:function(t){e.$set(e.params,"stattype",t)},expression:"params.stattype"}},[e._v("续报")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.params.stattype,callback:function(t){e.$set(e.params,"stattype",t)},expression:"params.stattype"}},[e._v("扩科")])],1)],1),e._v(" "),a("class-type",{attrs:{label:"在读课程类型："},on:{getParams:e.getParams}}),e._v(" "),a("select-year",{attrs:{label:"在读年份：","param-key":"inyear"},on:{getParams:e.getParams}}),e._v(" "),a("class-term",{attrs:{label:"在读学期：","param-key":"interm"},on:{getParams:e.getParams}}),e._v(" "),a("class-subject",{attrs:{label:"在读学科：","param-key":"insubject"},on:{getParams:e.getParams}}),e._v(" "),"1"===e.params.stattype?a("div",[a("select-year",{attrs:{label:"续报年份：","param-key":"continueyear"},on:{getParams:e.getParams}}),e._v(" "),a("class-term",{attrs:{label:"续报学期：","param-key":"continueterm"},on:{getParams:e.getParams}})],1):e._e(),e._v(" "),"2"===e.params.stattype?a("div",[a("select-year",{attrs:{label:"扩科年份：","param-key":"continueyear"},on:{getParams:e.getParams}}),e._v(" "),a("class-term",{attrs:{label:"扩科学期：","param-key":"continueterm"},on:{getParams:e.getParams}}),e._v(" "),a("class-subject",{attrs:{label:"扩科学科：","param-key":"continuesubid"},on:{getParams:e.getParams}})],1):e._e(),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inNum",label:"在读学员人数","min-width":"120",align:"center"}}),e._v("searchStattype\n        "),a("el-table-column",{attrs:{prop:"inManTime",label:"在读学员人次","min-width":"100",align:"center"}}),e._v(" "),"1"===e.searchStattype?a("el-table-column",{attrs:{prop:"continueNum",label:"续报学员人数","min-width":"100",align:"center"}}):e._e(),e._v(" "),"1"===e.searchStattype?a("el-table-column",{attrs:{prop:"continueManTime",label:"续报学员人次","min-width":"100",align:"center"}}):e._e(),e._v(" "),"1"===e.searchStattype?a("el-table-column",{attrs:{prop:"continueRate",label:"续报率","min-width":"100",align:"center"}}):e._e(),e._v(" "),"2"===e.searchStattype?a("el-table-column",{attrs:{prop:"continueNum",label:"扩科学员人数","min-width":"100",align:"center"}}):e._e(),e._v(" "),"2"===e.searchStattype?a("el-table-column",{attrs:{prop:"continueManTime",label:"扩科学员人次","min-width":"100",align:"center"}}):e._e(),e._v(" "),"2"===e.searchStattype?a("el-table-column",{attrs:{prop:"continueRate",label:"扩科率","min-width":"100",align:"center"}}):e._e()],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"00798592",null);t.default=x.exports},d7de:function(e,t,a){},d7fc:function(e,t,a){"use strict";var r=a("9964");a.n(r).a},dca8:function(e,t,a){},e0a5:function(e,t,a){"use strict";a.d(t,"j",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"h",(function(){return i})),a.d(t,"l",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"n",(function(){return c})),a.d(t,"m",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"i",(function(){return d})),a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return b})),a.d(t,"k",(function(){return g})),a.d(t,"d",(function(){return f}));var r=a("66df"),n=function(e){return r.a.request({url:"/register/querySourceClass",data:e,method:"post"})},s=function(e){return r.a.request({url:"/register/getChangeClassType",params:e,method:"get"})};var i=function(e){return r.a.request({url:"/register/queryRegisterClassList",data:e,method:"post"})},l=function(e){return r.a.request({url:"register/queryWaitClassList",params:e,method:"get"})},o=function(e){return r.a.request({url:"/register/deleteAlternateRecord",data:e,method:"post"})},c=function(e){return r.a.request({url:"register/recoverCancelRegisters",params:e,method:"GET"})},u=function(e){return r.a.request({url:"register/queryWaitList",data:e,method:"post"})},m=function(e){return r.a.request({url:"register/batchRemoveWait",data:e,method:"post"})},p=function(e){return r.a.request({url:"register/exportWaitListExportExcel",data:e,method:"post",responseType:"blob"})},d=function(e){return r.a.request({url:"register/queryRegisterList",data:e,method:"post"})},h=function(e){return r.a.request({url:"register/queryRegisterClassGeneral",data:e,method:"post"})},b=function(e){return r.a.request({url:"register/getNotPayClassList",params:e,method:"get"})},g=function(e){return r.a.request({url:"register/queryWaitClassGeneral",params:e,method:"get"})},f=function(e){return r.a.request({url:"register/getCancellationsClassPage",data:e,method:"post"})}},e4a8:function(e,t,a){},e864:function(e,t,a){"use strict";a.r(t);var r=a("8c32"),n=a("ce61"),s={name:"shortPdKanban",mixins:[r.a],components:{ScrollWrap:n.a},data:function(){return{source:"refund",isLongTerm:0,queryId:1312,maxTableHeight:null}},methods:{handleOnResize:function(e){this.maxTableHeight=e.clientHeight-120}}},i=(a("fb49"),a("2877")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-data"},[a("el-form",{attrs:{"label-width":"120px",inline:!0,size:"medium"}},[a("el-form-item",{attrs:{label:"退费月份："}},[a("el-date-picker",{attrs:{type:"monthrange","range-separator":"~","value-format":"yyyy-MM","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1),e._v(" "),1===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"分校："}},[a("select-all",{attrs:{"data-list":e.allCityList,"init-select":e.areaCodeList,"value-key":"id","label-key":"name"},model:{value:e.areaCodeList,callback:function(t){e.areaCodeList=t},expression:"areaCodeList"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),2===e.roleId||4===e.roleId?[a("br"),e._v(" "),a("el-form-item",{attrs:{label:"家庭顾问："}},[a("select-all",{attrs:{"data-list":e.advisoryList,"init-select":e.advisoryEmpNosChecked,"value-key":"empNo","label-key":"empName"},model:{value:e.advisoryEmpNosChecked,callback:function(t){e.advisoryEmpNosChecked=t},expression:"advisoryEmpNosChecked"}}),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small",disabled:0===e.advisoryEmpNosChecked.length},on:{click:e.updateAdvisoryGroup}},[e._v("保存为顾问组")]),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"学员姓名"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuName,callback:function(t){e.$set(e.formData,"stuName",t)},expression:"formData.stuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学员编号"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formData.stuLoginName,callback:function(t){e.$set(e.formData,"stuLoginName",t)},expression:"formData.stuLoginName"}})],1)],2),e._v(" "),!e.advisoryGroup.length||2!==e.roleId&&4!==e.roleId?e._e():a("div",{staticClass:"advisory-group"},[a("el-checkbox",{staticStyle:{"margin-right":"5px"},model:{value:e.formData.useAdvisoryGroup,callback:function(t){e.$set(e.formData,"useAdvisoryGroup",t)},expression:"formData.useAdvisoryGroup"}}),e._v(" "),a("Tooltip",{staticClass:"item",attrs:{effect:"dark","max-width":"500",content:e.advisoryGroupString,placement:"top"}},[a("p",{staticClass:"advisory-names"},[e._v("已保存顾问组："+e._s(e.advisoryGroupString))])]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:function(t){return e.updateAdvisoryGroup("delete")}}},[e._v("删除顾问组")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("div",{staticClass:"btns-container"},[a("el-button",{staticStyle:{width:"100px"},attrs:{loading:e.loading,type:"primary",size:"small"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.exportIng,size:"small"},on:{click:e.exportData}},[e._v("导出")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:e.downloadExcel}},[e._v("绩效规则")])],1),e._v(" "),a("br"),a("br"),e._v(" "),a("ScrollWrap",{attrs:{"open-resize":"","cus-style":{"max-height":"calc(100vh - 70px)"}},on:{"on-resize":e.handleOnResize}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":e.maxTableHeight}},[a("el-table-column",{attrs:{prop:"date",label:"时间信息",align:"center","label-class-name":"date-info"}},[a("el-table-column",{attrs:{align:"center",prop:"jxMonth",label:"绩效月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundDate",label:"退费日期"}})],1),e._v(" "),a("el-table-column",{staticStyle:{background:"#000"},attrs:{prop:"date",label:"学员信息",align:"center","label-class-name":"student-info"}},[a("el-table-column",{attrs:{align:"center",prop:"stuId",label:"stu_id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuUid",label:"学员uid"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuLoginname",label:"学员编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"stuName",label:"学员姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"zcQd",label:"注册渠道"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"班级信息",align:"center","label-class-name":"class-info"}},[a("el-table-column",{attrs:{align:"center",prop:"regId",label:"报班ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claYear",label:"学年"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claTermName",label:"学期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGtName",label:"学部"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claGradeName",label:"年级"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claSubjectNames",label:"科目"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claLevelName",label:"班次名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claPrice",label:"班级金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"finaPayprice",label:"实缴总金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"claId",label:"班级ID"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"注册人信息",align:"center","label-class-name":"register-info"}},[a("el-table-column",{attrs:{align:"center",prop:"tsEmpFlag",label:"注册人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsCreateDate",label:"学员注册时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpName",label:"注册人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsDeptName",label:"注册人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tsAreaName",label:"所属区域"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"维护人信息",align:"center","label-class-name":"preserve-info"}},[a("el-table-column",{attrs:{align:"center",prop:"whTime",label:"维护开始时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserName",label:"维护人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whUserWorkCode",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whServicecenterName",label:"维护人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"whAreaName",label:"维护人所属区域"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"报名信息",align:"center","label-class-name":"apply-info"}},[a("el-table-column",{attrs:{align:"center",prop:"trEmpFlag",label:"报名人是用户还是员工"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpName",label:"报名人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trEmpNo",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trDeptName",label:"报名人所属服务中心"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"trAreaName",label:"报名人所属区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"regCreateDateOld",label:"报名时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"finaCreateDate",label:"缴费时间"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"退费信息",align:"center","label-class-name":"apply-info"}},[a("el-table-column",{attrs:{align:"center",prop:"ifKqt",label:"是否退费扣除"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"rcCreateDate",label:"退费时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifKqtKkq",label:"开课前全额退费"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifKqtCb",label:"插班未刷课时退费"}})],1)],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.formData.pageNo,"page-sizes":e.formData.pageSizes,"page-size":e.formData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.formData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"65d15de6",null);t.default=l.exports},ea1e:function(e,t,a){"use strict";var r=a("7ab2");a.n(r).a},eb1b:function(e,t,a){},ee56:function(e,t,a){"use strict";var r=a("eb1b");a.n(r).a},f4f8:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("96cf");var r,n=a("3b8d"),s=a("bd86"),i=(a("386d"),a("1501")),l=a("325c"),o=a("4bca"),c=a("1616"),u=a("ccbd"),m={components:{selectAll:c.a},data:function(){return{gradeList:[],grade:[],initGetList:!0}},watch:{grade:function(e){this.$emit("getParams",{grades:e.join(",")}),this.initGetList&&(this.initGetList=!1,this.$emit("getInitList"))}},mounted:function(){this.getGrade()},methods:{getGrade:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)();case 3:t=e.sent,this.gradeList=t||[],a=this.gradeList.map((function(e){return e.gradeId})),this.grade=a,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.$Message.error({content:"获取学员可用年级失败："+e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return r.apply(this,arguments)})}},p=a("2877"),d=Object(p.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"from-item-400"},[a("el-form",{attrs:{"label-width":"120px",size:"medium"}},[a("el-form-item",{attrs:{label:"学员年级："}},[a("select-all",{attrs:{"data-list":e.gradeList,"init-select":e.grade,"all-key":"全部年级","value-key":"gradeId","label-key":"gradeName"},model:{value:e.grade,callback:function(t){e.grade=t},expression:"grade"}}),e._v(" "),a("span",{staticClass:"remarks"},[e._v("（可多选，默认选择全部）")])],1)],1)],1)}),[],!1,null,"a38b4af2",null).exports,h=a("a7c5"),b=a("f121"),g=a("c276");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y,_=Object(g.n)(),w={exportUrl:b.a.baseUrl[_]+"/SPLAT/crmPanelList/download"},k={name:"dataReportResource",components:{selectArea:o.a,grade:d,deadlineTime:h.a},data:function(){return{total:0,params:{deadline:"",cities:"",areas:"",servcenters:"",grades:"",collect:"",users:"",pagesize:10,page:1},historyParams:{},tableData:[],loading:!1,value1:""}},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},getParams:function(e){var t=v(v({},this.params),e);this.params=t},searchButton:function(){this.params.page=1,this.search()},search:(y=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,r,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||v({},this.params),(r=Object(i.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:if(n="",a.deadline||(n="截止日期不能为空"),a.grades||(n="学员年级不能为空"),!n){e.next=11;break}return this.$message({message:n,type:"warning"}),e.abrupt("return");case 11:return a.operate="student-resource",this.historyParams=a,e.prev=13,this.loading=!0,e.next=17,Object(u.h)(a);case 17:s=e.sent,this.tableData=s.records||[],this.total=s.totalCount,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(13),this.$Message.error({content:"获取列表失败："+e.t0.message});case 25:return e.prev=25,this.loading=!1,e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[13,22,25,28]])}))),function(e){return y.apply(this,arguments)}),exprot:function(){l.a.download(w.exportUrl,this.historyParams)},getInitList:function(){"4"===this.params.collect||"5"===this.params.collect?this.params.users&&this.params.grades&&this.search():this.params.servcenters&&this.params.grades&&this.search()}}},x=(a("00b6"),Object(p.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("deadline-time",{on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"end-time":e.params.deadline},on:{getInitList:function(t){return e.getInitList()},getParams:e.getParams}}),e._v(" "),a("grade",{on:{getParams:e.getParams,getInitList:function(t){return e.getInitList()}}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{width:"100%",data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"时间","min-width":"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            截止"+e._s(t.row.queryDate)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"studentSumNumber",label:"学员总人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newStudentNumber",label:"新学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sleepStudentNumber",label:"沉睡老学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"readingStudentNumber",label:"在读学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"readingNewNumber",label:"在读新学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"readingOldNumber",label:"在读老学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notBindingStudentNumber",label:"未绑定学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedStudentNumber",label:"已绑定学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedMaintainStudentNum",label:"已绑定维护中学员人数","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedMaintainActiveNum",label:"已绑定维护中-活跃学员人数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedMaintainWarningNum",label:"已绑定维护中-预警学员人数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bindedSleepStudentNum",label:"已绑定沉睡学员人数","min-width":"100",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"35cc9176",null));t.default=x.exports},f904:function(e,t,a){},fb49:function(e,t,a){"use strict";var r=a("c2d9");a.n(r).a},fc9d:function(e,t,a){"use strict";a.r(t);a("ac6a"),a("097d"),a("28a5"),a("0d6d");var r=a("7014"),n=a("2801"),s=a("fa7d"),i=a("867e"),l=a("e0a5"),o=a("6167"),c={name:"cancelOrderKanBan",mixins:[r.a,n.a],data:function(){var e=this;return{formData:{year:"",termId:"",classType:"",empNo:"",cancelStartDate:"",cancelEndDate:"",page:1,pageCount:10},totalCount:0,tableLoading:!1,tableData:[],classTypeMap:{1:"在线",2:"双师",4:"面授",8:"线上班"},tableColumns:Object.freeze([{title:"操作",align:"center",minWidth:100,slot:"operation"},{title:"报名ID",align:"center",minWidth:150,slot:"registId"},{title:"班级名称",key:"name",align:"center",minWidth:200,render:function(t,a){return t("div",[t("a",{on:{click:function(){e.showClassDetail(a.row.classId)}}},a.row.className),t("div",{style:{"text-align":"right",display:"inline-block"}},[t("Tag",{style:{display:1===a.row.businessType?"inline-block":"none"},props:{color:"green"}},"全国班")])])}},{title:"授课类型",key:"classType",align:"center",render:function(t,a){return t("span",{style:{}},e.classTypeMap[a.row.classType])}},{title:"报班状态",align:"center",render:function(e,t){return e("span",{style:{}},"已撤单")}},{title:"学科",key:"subjectNames",align:"center"},{title:"主讲教师",key:"teacherNames",align:"center",minWidth:100,render:function(t,a){var r=a.row.teacherNames.split(","),n=a.row.teacherIds.split(",");return t("div",r.map((function(a,r){return t("a",{on:{click:function(){e.showTeacherDetail(e.cityCode,n[r],"0")}}},a)})))}},{title:"辅导教师",key:"tutorRealName",align:"center"},{title:"开课日期",key:"startDate",align:"center"},{title:"结课日期",key:"endDate",align:"center"},{title:"上课时间",slot:"classtimeNames",align:"center"},{title:"教室",key:"classroomName",align:"center"},{title:"上课进度",align:"center",render:function(e,t){return e("span",{},t.row.passedCount+"/"+t.row.classCount)}},{title:"总金额",key:"price",align:"center"},{title:"变动记录",align:"center",render:function(t,a){return t("Poptip",{props:{trigger:"hover",width:"300","word-wrap":!0,transfer:!0,content:a.row.classChangeName}},1!==a.row.businessType?e.getNameLength(a.row.classChangeName):"——")}},{title:"缴费截止日期",key:"payEndDate",align:"center"},{title:"操作人",key:"creatorName",align:"center"},{title:"操作时间",key:"createTime",align:"center"},{title:"备注",slot:"remark",align:"center"}]),yearList:[],termList:[],classTypeList:[],adviserList:[]}},computed:{cityCode:function(){return this.$store.state.roleRelativeData.userInfo.cityCode}},methods:{getYearList:function(){var e=this;Object(i.q)().then((function(t){e.yearList=t})).catch((function(t){e.$Message.warning({content:"获取年份失败:"+t.message,duration:5})}))},getTermList:function(){var e=this,t={cityCode:this.cityCode,queryType:"t"};Object(i.i)(t).then((function(t){e.termList=t})).catch((function(t){e.$Message.warning({content:"获取学期失败:"+t.message,duration:5})}))},getTypeListHandler:function(){var e=this;Object(i.e)({}).then((function(t){e.classTypeList=t})).catch((function(t){e.$Message.warning({content:"获取授课类型失败:"+t.message,duration:5})}))},getAdviserList:function(){var e=this;Object(o.r)({areaCode:this.cityCode}).then((function(t){e.adviserList=t})).catch((function(t){e.$Message.error({content:"获取数据失败："+t.message})}))},dateChange:function(e){this.formData.cancelStartDate=e[0],this.formData.cancelEndDate=e[1]},search:function(){this.formData.page=1,this.tableData=[],this.getTableData()},getTableData:function(){var e=this;this.tableLoading=!0,this.formData.areaCode=this.cityCode,Object(l.d)(this.formData).then((function(t){e.tableData=[],t&&(e.totalCount=t.totalCount,t.records&&(e.tableData=t.records,e.tableData.forEach((function(e){e.startDate&&(e.startDate=e.startDate.substring(0,10)),e.endDate&&(e.endDate=e.endDate.substring(0,10))}))))})).catch((function(t){e.tableData=[],e.$Message.warning({content:"获取数据失败:"+t.message,duration:5})})).finally((function(){e.tableLoading=!1}))},recovery:function(e){var t=this,a={cityCode:this.cityCode,registId:e.id};this.$Modal.confirm({title:"恢复",content:"你确定恢复吗？",onOk:function(){Object(l.n)(a).then((function(e){t.$Message.success("恢复成功"),t.getTableData()})).catch((function(e){t.$Message.warning({content:"恢复失败:"+e.message,duration:5})}))}})},changePage:function(e){this.formData.page=e,this.getTableData()},pageSizeChange:function(e){this.formData.pageCount=e,this.getTableData()},getNameLength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return e&&e.length>t?e.substring(0,t)+"...":e},copy:function(e){Object(s.b)(e)}},mounted:function(){this.getYearList(),this.getTermList(),this.getTypeListHandler(),this.getAdviserList()}},u=a("2877"),m=Object(u.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",padding:"10px",background:"#f5f7f9"}},[a("Form",{staticStyle:{"margin-bottom":"10px","padding-top":"16px",width:"100%",background:"#ffffff"},attrs:{inline:"","label-width":80}},[a("FormItem",{attrs:{label:"年份"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.formData.year,callback:function(t){e.$set(e.formData,"year",t)},expression:"formData.year"}},e._l(e.yearList,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),e._v(" "),a("FormItem",{attrs:{label:"学期"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.formData.termId,callback:function(t){e.$set(e.formData,"termId",t)},expression:"formData.termId"}},e._l(e.termList,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),a("FormItem",{attrs:{label:"授课类型"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.formData.classType,callback:function(t){e.$set(e.formData,"classType",t)},expression:"formData.classType"}},e._l(e.classTypeList,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),a("FormItem",{attrs:{label:"操作人"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",filterable:""},model:{value:e.formData.empNo,callback:function(t){e.$set(e.formData,"empNo",t)},expression:"formData.empNo"}},e._l(e.adviserList,(function(t){return a("Option",{key:t.empNo,attrs:{value:t.empNo}},[e._v(e._s(t.userName))])})),1)],1),e._v(" "),a("FormItem",{attrs:{label:"操作日期"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,type:"daterange",separator:"~"},on:{"on-change":e.dateChange}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("Table",{attrs:{stripe:"",columns:e.tableColumns,data:e.tableData,loading:e.tableLoading},scopedSlots:e._u([{key:"operation",fn:function(t){var r=t.row;return[a("a",{staticStyle:{"margin-right":"5px"},on:{click:function(t){return e.recovery(r)}}},[e._v("恢复")])]}},{key:"registId",fn:function(t){var r=t.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"primary",ghost:""},on:{click:function(t){return e.copy(r.registId)}}},[e._v("复制")]),e._v(" "),a("span",[e._v(e._s(r.registId))])]}},{key:"classtimeNames",fn:function(t){var r=t.row;return[r.classtimeNames&&r.classtimeNames.length>15?a("Poptip",{attrs:{trigger:"hover",width:"300","word-wrap":"",content:r.classtimeNames,transfer:""}},[e._v("\n        "+e._s(e.getNameLength(r.classtimeNames))+"\n      ")]):[e._v("\n        "+e._s(r.classtimeNames||"--")+"\n      ")]]}},{key:"remark",fn:function(t){var r=t.row;return[r.remark&&r.remark.length>15?a("Poptip",{attrs:{trigger:"hover",width:"300","word-wrap":"",content:r.remark,transfer:""}},[e._v("\n        "+e._s(e.getNameLength(r.remark))+"\n      ")]):[e._v("\n        "+e._s(r.remark||"--")+"\n      ")]]}}])}),e._v(" "),a("div",{class:{"page-fix":e.tableData.length<3},staticStyle:{margin:"10px"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalCount,"page-size":e.formData.pageCount,current:e.formData.page,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-page-size-change":e.pageSizeChange,"on-change":e.changePage}})],1)]),e._v(" "),a("tal-teacher-details",{ref:"teacherRef",attrs:{schoolCode:e.teacherDetail.cityCode,teacherId:e.teacherDetail.id,type:e.teacherDetail.type,creatorEmpNo:e.teacherDetail.empNo}}),e._v(" "),a("tal-class-detail",{attrs:{"class-id":e.classDetail.id,show:e.classDetail.show},on:{close:function(t){e.classDetail.show=!1}}})],1)}),[],!1,null,"2630018a",null);t.default=m.exports},ff3c:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("cadf"),a("456d");var r=a("bd86"),n=(a("96cf"),a("3b8d")),s=(a("386d"),a("325c")),i=a("4bca"),l=a("a279"),o=a("1501"),c=a("ccbd"),u=a("f121"),m=a("c276");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h,b=Object(m.n)(),g={exportUrl:u.a.baseUrl[b]+"/SPLAT/crmPanelList/download"},f={name:"dataReportTask",components:{selectArea:i.a,selectTime:l.a},data:function(){return{total:0,params:{starttime:"",endtime:"",cities:"",areas:"",servcenters:"",collect:"",counttime:"",users:"",page:1,pagesize:10},historyParams:{},tableData:[],loading:!1}},methods:{handleCurrentChange:function(e){this.params.page=e,this.historyParams.page=e,this.search(this.historyParams)},handleSizeChange:function(e){this.params.page=1,this.historyParams.page=1,this.params.pagesize=e,this.historyParams.pagesize=e,this.search(this.historyParams)},searchButton:function(){this.params.page=1,this.search()},search:(h=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||d({},this.params),(r=Object(o.a)(a)).check){e.next=5;break}return this.$message({message:r.msg,type:"warning"}),e.abrupt("return");case 5:return a.operate="task",this.historyParams=a,e.prev=7,this.loading=!0,e.next=11,Object(c.h)(a);case 11:n=e.sent,this.tableData=n.records||[],this.total=n.totalCount,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),this.$Message.error({content:"获取列表失败："+e.t0.message});case 19:return e.prev=19,this.loading=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[7,16,19,22]])}))),function(e){return h.apply(this,arguments)}),getParams:function(e){var t=d(d({},this.params),e);this.params=t},exprot:function(){s.a.download(g.exportUrl,this.historyParams)}}},v=(a("0286"),a("2877")),y=Object(v.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"content-data"},[a("div",{staticClass:"content-data-card"},[a("select-time",{on:{getParams:e.getParams}}),e._v(" "),a("select-area",{attrs:{"has-time":!0,"start-time":e.params.starttime,"end-time":e.params.endtime},on:{getInitList:function(t){return e.search()},getParams:e.getParams}}),e._v(" "),a("div",{staticClass:"exprot"},[a("el-button",{attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.searchButton()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exprot}},[e._v("导出数据")])],1),e._v(" "),a("div",{staticClass:"table-basic"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queryDate",label:"时间","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"区域","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"servicecenterName",label:"服务中心","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"家庭顾问","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newProduceTaskNum",label:"新产生任务条数","min-width":"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newProduceTaskPerson",label:"新产生任务人数","min-width":"140",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newProduceFollowNum",label:"新任务维护条数","min-width":"140",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newProduceFollowPerson",label:"新任务维护人数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newProduceFollowRatio",label:"新任务维护率","min-width":"110",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statNewProduceFollowNum",label:"统计时间范围内维护任务的条数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statNewProducePerson",label:"统计时间范围内维护任务的人数","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgResponseTime",label:"任务平均响应时长","min-width":"100",align:"center"}})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page,total:e.total,"page-size":e.params.pagesize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"d9953fb4",null);t.default=y.exports}}]);
//# sourceMappingURL=dataReport.e4156714.js.map