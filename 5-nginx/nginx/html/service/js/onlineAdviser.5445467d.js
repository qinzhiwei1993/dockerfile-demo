(window.webpackJsonp=window.webpackJsonp||[]).push([["onlineAdviser"],{8096:function(t,e,n){},a00d:function(t,e,n){"use strict";var i=n("8096");n.n(i).a},ac7a:function(t,e,n){},c17f:function(t,e,n){"use strict";var i=n("ac7a");n.n(i).a},fc65:function(t,e,n){"use strict";n.r(e);n("96cf");var i,a=n("3b8d"),r=(n("097d"),n("a474")),o={data:function(){return{value6:"",tags:[{id:1,label:"报名意向强",checked:!1},{id:2,label:"诊断已解析",checked:!1}]}}},s=(n("c17f"),n("2877")),c={name:"onlineAdviserSchedule",components:{CommitOrder:Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("学员标签：")]),t._v(" "),n("div",{staticClass:"margin10 tags"},t._l(t.tags,(function(e){return n("div",{key:e.id,staticClass:"tag",class:e.checked?"checked":"",on:{click:function(t){e.checked=!e.checked}}},[t._v(t._s(e.label))])})),0),t._v(" "),n("h2",[t._v("沟通结果：")]),t._v(" "),n("Input",{staticClass:"margin10",attrs:{type:"textarea",rows:4},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}}),t._v(" "),n("h2",[t._v("用户信息：")]),t._v(" "),t._m(0),t._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("Button",{attrs:{type:"primary"}},[t._v("提交")])],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"margin10 info"},[e("strong",[this._v("使大锤 | 在读 | 小学二年级 | 111111111 | 注册城市：北京 | 归属城市：xxxx | 归属服务中心：xxxxx | 绑定人：无 | 北京直播（标题） | 诊断报告：无")]),this._v("\n    | 年级：三年级 | 科目：数学 | 分数：78 | 班次级别：创新 | 班次名称：创新A班 | 成绩来源：微信 | 成绩是否有效：有效 | 作答时间：2020-01-20 08:02:22\n  ")])}],!1,null,"0e98f5a9",null).exports},data:function(){return{weekDay:"1",tableData:[],intervalList:[],scheduleList:[],onlineAdvisers:[],dataList:{},loading:!1,commitOrderModal:!1}},methods:{getDataByDate:function(t){var e=this;this.loading=!0,Object(r.h)({cityCode:"010",weekDay:t}).then((function(t){e.scheduleList=t})).catch((function(t){e.$Message.error({content:"查询排班信息错误："+t.message,duration:5})})).finally((function(){e.loading=!1}))},changeSchedule:function(t,e){var n=this.scheduleList.find((function(n){return n.workHour===t.workHour&&n.onlineIdentityId===String(e.identityId)}));n?n.deleted=0===n.deleted?1:0:this.scheduleList.push({workStartTime:t.workStartTime,workEndTime:t.workEndTime,deleted:0,onlineIdentityId:String(e.identityId),workHour:t.workHour})},save:function(){var t=this;this.$Modal.confirm({title:"保存排班",content:'<p>1.编辑完成一天的排班后请务必保存后再继续编辑；连续编辑多天排班后再点击保存时，系统只会保存最后一天的排班；</p><p>2.排班更改将在点击"确定"后实时生效，是否仍要更改？</p>',onOk:function(){Object(r.m)({weekDay:t.weekDay,details:t.scheduleList}).then((function(e){t.$Message.success({content:"保存成功",duration:5}),t.$Modal.remove(),t.getDataByDate(t.weekDay)})).catch((function(e){t.$Message.error({content:"保存失败："+e.message,duration:5})}))}})},displayOnOff:function(t,e){var n=this.scheduleList.find((function(n){return n.workHour===t.workHour&&n.onlineIdentityId===String(e.identityId)}));return!!n&&0===n.deleted},openCommitOrder:function(){this.commitOrderModal=!0}},mounted:(i=Object(a.a)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(r.g)();case 4:return this.onlineAdvisers=t.sent,t.next=7,Object(r.i)({});case 7:for(e=t.sent,n=e.startHour;n<=e.endHour;n++)this.intervalList.push({workHour:n,workStartTime:"".concat(n,":00"),workEndTime:"".concat(n+1,":00")});this.getDataByDate(1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),this.$Message.error({content:"初始化失败："+t.t0.message||!1,duration:5}),this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return i.apply(this,arguments)})},l=(n("a00d"),Object(s.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{staticClass:"gary",attrs:{id:"onlineAdviserSchedule"}},[n("RadioGroup",{attrs:{type:"button",size:"large"},on:{"on-change":t.getDataByDate},model:{value:t.weekDay,callback:function(e){t.weekDay=e},expression:"weekDay"}},[n("Radio",{attrs:{label:"1"}},[t._v("周一")]),t._v(" "),n("Radio",{attrs:{label:"2"}},[t._v("周二")]),t._v(" "),n("Radio",{attrs:{label:"3"}},[t._v("周三")]),t._v(" "),n("Radio",{attrs:{label:"4"}},[t._v("周四")]),t._v(" "),n("Radio",{attrs:{label:"5"}},[t._v("周五")]),t._v(" "),n("Radio",{attrs:{label:"6"}},[t._v("周六")]),t._v(" "),n("Radio",{attrs:{label:"7"}},[t._v("周日")])],1),t._v(" "),n("div",{staticClass:"notice"},[n("p",[t._v("【注意事项】")]),t._v(" "),n("p",[t._v(" 1.编辑完成一天的排班后请务必保存后再继续编辑；连续编辑多天排班后再点击保存时，系统只会保存最后一天的排班；")]),t._v(" "),n("p",[t._v(" 2.点击保存后，排班更改实时生效，请确认编辑无误后再保存；")]),t._v(" "),n("p",[t._v(" 3.建议每次编辑后，将排班表整体核实一遍，以免编辑错误影响工作；")])]),t._v(" "),t.loading?n("Spin",{attrs:{fix:""}},[n("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}})],1):n("table",{staticStyle:{"table-layout":"fixed",border:"1px solid #000","border-collapse":"collapse","margin-top":"10px"},attrs:{border:"1",width:"100%",cellspacing:"0",cellpadding:"0",bgcolor:"#ffffff",bordercolordark:"#ffffff",bordercolorlight:"#000000"}},[n("thead",[n("tr",{},[n("th",{staticStyle:{height:"50px"}},[t._v(" ")]),t._v(" "),t._l(t.onlineAdvisers,(function(e){return n("th",{key:e.identityId,staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(e.userName))])}))],2)]),t._v(" "),n("tbody",t._l(t.intervalList,(function(e){return n("tr",{key:e.workHour},[n("td",{staticStyle:{"text-align":"center",width:"100px","font-size":"16px","font-weight":"bold"}},[t._v(t._s(e.workStartTime+"-"+e.workEndTime))]),t._v(" "),t._l(t.onlineAdvisers,(function(i){return n("td",{key:i.identityId,class:t.displayOnOff(e,i)?"schedule-on":"schedule-off",on:{click:function(n){return t.changeSchedule(e,i)}}},[t._v(" ")])}))],2)})),0)]),t._v(" "),n("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[n("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1),t._v(" "),n("Modal",{attrs:{title:"学员工单","footer-hide":!0,closable:!1},model:{value:t.commitOrderModal,callback:function(e){t.commitOrderModal=e},expression:"commitOrderModal"}},[n("CommitOrder")],1)],1)}),[],!1,null,"5263fc33",null));e.default=l.exports}}]);
//# sourceMappingURL=onlineAdviser.5445467d.js.map