(window.webpackJsonp=window.webpackJsonp||[]).push([["mallMgt"],{"091f":function(t,e,a){},"6f1e":function(t,e,a){"use strict";var o=a("091f");a.n(o).a},"8a18":function(t,e,a){"use strict";a.r(e);a("7f7f"),a("386d");var o=a("66df"),r=a("15b1");var n={name:"accountMgt",data:function(){return{formData:{areaCode:"",name:"",phone:"",empNo:""},totalCount:0,cols:[{title:"序号",type:"index",align:"center",width:100},{title:"真实姓名",key:"name",align:"center"},{title:"手机号码",key:"phone",align:"center"},{title:"员工编号",key:"empNo",align:"center"},{title:"地区",key:"areaName",align:"center"},{title:"操作",slot:"opt",align:"center"}],dataList:[],cityList:[],editModal:!1,row:{cityCode:"",name:"",phone:"",empNo:""},rules:{cityCode:[{required:!0,message:"地区不能为空",trigger:"blur"}],name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"电话号码不能为空",trigger:"blur"}],empNo:[{required:!0,message:"员工编号不能为空",trigger:"blur"}]}}},methods:{getTableData:function(){var t,e=this;(t=this.formData,o.a.request({url:"/padMgmt/getUserListByCondition",data:t,method:"post"})).then((function(t){e.dataList=t.records,e.totalCount=t.totalCount})).catch((function(t){e.$Message.error({content:"查询列表数据失败："+t.message,duration:5})}))},getCityList:function(){var t,e=this;r.a.request({url:"/MASTER-BD/bd-web/organ/findList",method:"get",params:t}).then((function(t){e.cityList=t})).catch((function(t){e.$Message.error({content:"查询城市列表失败："+t.message,duration:5})}))},pageSizeChange:function(t){this.formData.pageNo=1,this.formData.pageSize=t,this.getTableData()},changePage:function(t){this.formData.pageNo=t,this.getTableData()},search:function(){this.formData.pageNo=1,this.getTableData()},delUser:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"您确定删除此条记录吗？",onOk:function(){var a;(a={id:t},o.a.request({url:"/padMgmt/deleteUser",params:a,method:"get"})).then((function(){e.$Message.success({content:"删除成功",duration:5}),e.search()})).catch((function(t){e.$Message.error({content:"删除失败："+t.message,duration:5})}))}})},add:function(){this.$refs.formValidate.resetFields(),this.row={areaCode:"",name:"",phone:"",empNo:""},this.editModal=!0},edit:function(t){this.$refs.formValidate.resetFields(),this.row=t,this.editModal=!0},save:function(){var t=this;this.$refs.formValidate.validate((function(e){var a;e&&(t.row.areaName=t.cityList.find((function(e){return e.cityCode===t.row.cityCode})).name,t.row.id?(a=t.row,o.a.request({url:"/padMgmt/updateUser",data:a,method:"post"})).then((function(){t.$Message.success({content:"修改成功",duration:5}),t.search(),t.editModal=!1})).catch((function(e){t.$Message.error({content:"修改失败："+e.message,duration:5})})):function(t){return o.a.request({url:"/padMgmt/addUser",data:t,method:"post"})}(t.row).then((function(){t.$Message.success({content:"新增成功",duration:5}),t.search(),t.editModal=!1})).catch((function(e){t.$Message.error({content:"新增失败："+e.message,duration:5})})))}))}},mounted:function(){this.getCityList(),this.search()}},i=(a("6f1e"),a("2877")),s=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{staticClass:"account-mgt gary"},[a("Form",{attrs:{inline:"","label-width":80}},[a("FormItem",{attrs:{label:"姓名"}},[a("Input",{attrs:{placeholder:"请输入真实姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"电话号码"}},[a("Input",{attrs:{placeholder:"请输入电话号码"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),t._v(" "),a("FormItem",{attrs:{label:"员工编号"}},[a("Input",{attrs:{placeholder:"请输入员工编号"},model:{value:t.formData.empNo,callback:function(e){t.$set(t.formData,"empNo",e)},expression:"formData.empNo"}})],1),t._v(" "),a("FormItem",{attrs:{label:"地区"}},[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.formData.areaCode,callback:function(e){t.$set(t.formData,"areaCode",e)},expression:"formData.areaCode"}},t._l(t.cityList,(function(e){return a("Option",{key:e.id,attrs:{value:e.cityCode}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")])],1),t._v(" "),a("Table",{staticStyle:{"margin-bottom":"10px"},attrs:{columns:t.cols,data:t.dataList},scopedSlots:t._u([{key:"opt",fn:function(e){var o=e.row;return[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.edit(o)}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:function(e){return t.delUser(o.id)}}},[t._v("删除")])]}}])}),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("Page",{attrs:{total:t.totalCount,"page-size":t.formData.pageSize,current:t.formData.pageNo,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.changePage}})],1),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,width:"400",title:"账号编辑"},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("Form",{ref:"formValidate",attrs:{"label-width":80,model:t.row,rules:t.rules}},[a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入真实姓名"},model:{value:t.row.name,callback:function(e){t.$set(t.row,"name",e)},expression:"row.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"电话号码",prop:"phone"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入电话号码"},model:{value:t.row.phone,callback:function(e){t.$set(t.row,"phone",e)},expression:"row.phone"}})],1),t._v(" "),a("FormItem",{attrs:{label:"员工编号",prop:"empNo"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入员工编号"},model:{value:t.row.empNo,callback:function(e){t.$set(t.row,"empNo",e)},expression:"row.empNo"}})],1),t._v(" "),a("FormItem",{attrs:{label:"地区",prop:"cityCode"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:""},model:{value:t.row.cityCode,callback:function(e){t.$set(t.row,"cityCode",e)},expression:"row.cityCode"}},t._l(t.cityList,(function(e){return a("Option",{key:e.id,attrs:{value:e.cityCode}},[t._v(t._s(e.name))])})),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("Button",{on:{click:function(e){t.editModal=!1}}},[t._v("取消")])],1)],1)],1)}),[],!1,null,"19680b8e",null);e.default=s.exports}}]);
//# sourceMappingURL=mallMgt.caaed3f6.js.map