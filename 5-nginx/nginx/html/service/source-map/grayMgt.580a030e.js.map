{"version":3,"sources":["webpack:///./src/view/grayMgt/grayCity/index.vue?b7af","webpack:///./src/api/store.js","webpack:///src/view/grayMgt/grayCity/index.vue","webpack:///./src/view/grayMgt/grayCity/index.vue?b4e5","webpack:///./src/view/grayMgt/grayCity/index.vue","webpack:///./src/view/grayMgt/grayCity/index.vue?8ec1","webpack:///./src/components/scrollWrap.vue?46f6","webpack:///./src/components/scrollWrap.vue?e88f","webpack:///src/components/scrollWrap.vue","webpack:///./src/components/scrollWrap.vue","webpack:///./src/components/scrollWrap.vue?01eb"],"names":["saveCityGray","params","axios","request","url","method","data","getServiceCenterList","saveServiceCenterGray","components","ScrollWrap","cityList","areaList","tableLoading","tableData","columns","formData","cityCode","status","wechatStatus","areaId","likeName","totalCount","pageSize","pageNo","grayStatusMap","0","1","2","currentCity","maxTableHeight","mounted","this","queryCityGrayList","methods","handleOnResize","client","clientHeight","search","getTableData","handleCityChange","Object","assign","getAreaList","component","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","on","model","value","callback","$$v","$set","expression","_l","item","index","key","_v","_s","cityName","handleGrayStatusChange","handleWechatStatusChange","_e","schoolId","name","props","openResize","type","Boolean","default","cusStyle","getClientHeight","beforeDestroy","console","log","$emit","style","_t"],"mappings":"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","file":"js/grayMgt.580a030e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout\"},[_c('div',{staticClass:\"top\"},[_c('Select',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"20px\"},attrs:{\"filterable\":\"\",\"placeholder\":\"请选择分校\"},on:{\"on-change\":_vm.handleCityChange},model:{value:(_vm.formData.cityCode),callback:function ($$v) {_vm.$set(_vm.formData, \"cityCode\", $$v)},expression:\"formData.cityCode\"}},_vm._l((_vm.cityList),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item.cityCode}},[_vm._v(_vm._s(item.cityName + '-' + _vm.grayStatusMap[item.status]))])}),1),_vm._v(\" \"),(_vm.formData.cityCode)?[_c('RadioGroup',{on:{\"on-change\":_vm.handleGrayStatusChange},model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_c('Radio',{attrs:{\"label\":2}},[_c('span',[_vm._v(\"全量\")])]),_vm._v(\" \"),_c('Radio',{attrs:{\"label\":1}},[_c('span',[_vm._v(\"部分\")])]),_vm._v(\" \"),_c('Radio',{attrs:{\"label\":0}},[_c('span',[_vm._v(\"关闭\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"border\"}),_vm._v(\" \"),_c('div',{staticClass:\"add-wx\"},[_vm._v(\"\\n        加微方式:\\n        \"),_c('RadioGroup',{staticStyle:{\"margin-left\":\"20px\"},on:{\"on-change\":_vm.handleWechatStatusChange},model:{value:(_vm.formData.wechatStatus),callback:function ($$v) {_vm.$set(_vm.formData, \"wechatStatus\", $$v)},expression:\"formData.wechatStatus\"}},[_c('Radio',{attrs:{\"label\":1}},[_c('span',[_vm._v(\"企微\")])]),_vm._v(\" \"),_c('Radio',{attrs:{\"label\":0}},[_c('span',[_vm._v(\"个微\")])])],1)],1)]:_vm._e()],2),_vm._v(\" \"),_c('ScrollWrap',{attrs:{\"open-resize\":\"\",\"cus-style\":{'max-height': 'calc(100vh - 132px)'}},on:{\"on-resize\":_vm.handleOnResize}},[_c('div',{staticClass:\"bottom\"},[_c('div',{staticClass:\"search\"},[_c('Select',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"20px\"},attrs:{\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择区域\",\"inline\":\"\"},model:{value:(_vm.formData.areaId),callback:function ($$v) {_vm.$set(_vm.formData, \"areaId\", $$v)},expression:\"formData.areaId\"}},_vm._l((_vm.areaList),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item.schoolId}},[_vm._v(_vm._s(item.name))])}),1),_vm._v(\" \"),_c('Input',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"20px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"请输入服务中心\"},model:{value:(_vm.formData.likeName),callback:function ($$v) {_vm.$set(_vm.formData, \"likeName\", $$v)},expression:\"formData.likeName\"}}),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('Table',{attrs:{\"border\":\"\",\"loading\":_vm.tableLoading,\"columns\":_vm.columns,\"data\":_vm.tableData,\"max-height\":_vm.maxTableHeight}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from '@/libs/api.request'\n\n/**\n * 获取分校灰度数据 @韩士杰  http://apidoc.speiyou.cn/api/view/19304#\n * @param params\n * @returns {*}\n */\nexport function queryCityGrayList (params) {\n  return axios.request({\n    url: 'store/queryCityGrayList',\n    method: 'get',\n    params\n  })\n}\n\n/**\n * 获取分校灰度数据 @韩士杰  http://apidoc.speiyou.cn/api/view/19305#\n * @param params\n * @returns {*}\n */\nexport function saveCityGray (params) {\n  return axios.request({\n    url: 'store/saveCityGray',\n    method: 'post',\n    data: params\n  })\n}\n\n/**\n * 查询服务中心 @韩士杰  http://apidoc.speiyou.cn/api/view/19307#\n * @param params\n * @returns {*}\n */\nexport function getServiceCenterList (params) {\n  return axios.request({\n    url: 'store/getServiceCenterList',\n    method: 'get',\n    params\n  })\n}\n\n/**\n * 服务中心灰度保存@韩士杰  http://apidoc.speiyou.cn/api/view/19306#\n * @param params\n * @returns {*}\n */\nexport function saveServiceCenterGray (params) {\n  return axios.request({\n    url: 'store/saveServiceCenterGray',\n    method: 'post',\n    data: params\n  })\n}\n","<template>\n  <div class=\"layout\">\n    <div class=\"top\">\n      <Select v-model=\"formData.cityCode\" @on-change=\"handleCityChange\" filterable placeholder=\"请选择分校\" style=\"width:200px;margin-right: 20px;\">\n        <Option v-for=\"(item, index) in cityList\" :value=\"item.cityCode\" :key=\"index\">{{ item.cityName + '-' + grayStatusMap[item.status] }}</Option>\n      </Select>\n      <template v-if=\"formData.cityCode\">\n        <RadioGroup @on-change=\"handleGrayStatusChange\" v-model=\"formData.status\">\n          <Radio :label=\"2\">\n              <span>全量</span>\n          </Radio>\n          <Radio :label=\"1\">\n              <span>部分</span>\n          </Radio>\n          <Radio :label=\"0\">\n              <span>关闭</span>\n          </Radio>\n        </RadioGroup>\n\n        <div class=\"border\"></div>\n\n        <div class=\"add-wx\">\n          加微方式:\n          <RadioGroup style=\"margin-left:20px;\" @on-change=\"handleWechatStatusChange\" v-model=\"formData.wechatStatus\">\n            <Radio :label=\"1\">\n                <span>企微</span>\n            </Radio>\n            <Radio :label=\"0\">\n                <span>个微</span>\n            </Radio>\n          </RadioGroup>\n        </div>\n      </template>\n    </div>\n    <ScrollWrap open-resize :cus-style=\"{'max-height': 'calc(100vh - 132px)'}\" @on-resize=\"handleOnResize\">\n      <div class=\"bottom\">\n        <div class=\"search\">\n          <Select\n              v-model=\"formData.areaId\"\n              clearable\n              style=\"width:200px;margin-right: 20px;\"\n              filterable\n              placeholder=\"请选择区域\"\n              inline\n            >\n              <Option\n                v-for=\"(item,index) in areaList\"\n                :value=\"item.schoolId\"\n                :key=\"index\"\n              >{{ item.name }}</Option>\n            </Select>\n            <Input style=\"width:200px;margin-right: 20px;\" clearable placeholder=\"请输入服务中心\" v-model=\"formData.likeName\" />\n            <Button type=\"primary\" @click=\"search\">查询</Button>\n        </div>\n        <Table\n          border\n          :loading=\"tableLoading\"\n          :columns=\"columns\"\n          :data=\"tableData\"\n          :max-height=\"maxTableHeight\"\n        ></Table>\n      </div>\n    </ScrollWrap>\n  </div>\n</template>\n\n<script>\nimport { getAreaList } from '@/api/bd'\nimport { Switch } from 'view-design'\nimport {\n  queryCityGrayList,\n  saveCityGray,\n  getServiceCenterList,\n  saveServiceCenterGray\n} from '@/api/store'\nimport ScrollWrap from '@/components/scrollWrap'\nexport default {\n  components: {\n    ScrollWrap\n  },\n  data () {\n    return {\n      cityList: [],\n      areaList: [],\n      tableLoading: false,\n      tableData: [],\n      columns: [\n        {\n          title: '服务中心',\n          key: 'serviceCenterName',\n          align: 'center'\n        },\n        {\n          title: '操作时间',\n          key: 'createDate',\n          align: 'center'\n        },\n        {\n          title: '状态',\n          key: 'status',\n          align: 'center',\n          render: (h, params) => {\n            return h(Switch, {\n              props: {\n                value: params.row.status,\n                disabled: this.formData.status !== 1,\n                'true-value': 1,\n                'false-value': 0\n              },\n              on: {\n                'on-change': (val) => {\n                  this.saveServiceCenterGray(params.row, val)\n                }\n              }\n            })\n          }\n        }\n      ],\n      formData: {\n        cityCode: '',\n        status: '', // 当前灰度状态\n        wechatStatus: '', // 加微信状态 0 个微 1 企微\n        areaId: '',\n        likeName: '',\n        totalCount: 0,\n        pageSize: 10,\n        pageNo: 1\n      },\n      grayStatusMap: {\n        0: '关闭',\n        1: '部分',\n        2: '全量'\n      },\n      currentCity: null, // 当前选中分校\n      maxTableHeight: null\n    }\n  },\n  mounted () {\n    this.queryCityGrayList()\n  },\n  methods: {\n    handleOnResize (client) {\n      this.maxTableHeight = client.clientHeight - 132 - 92 - 10\n    },\n    async saveServiceCenterGray (item, status) {\n      item.status = status\n      try {\n        const params = {\n          cityName: this.formData.cityName,\n          cityCode: this.formData.cityCode,\n          status,\n          serviceCenterId: item.serviceCenterId,\n          serviceCenterName: item.serviceCenterName,\n          areaId: item.areaId\n        }\n        await saveServiceCenterGray(params)\n        this.$Message.success('服务中心灰度状态修改成功')\n      } catch (error) {\n        item.status = status === 1 ? 0 : 1\n        this.$Message.error({\n          content: `服务中心灰度状态修改失败: ${error.message}`,\n          duration: 5\n        })\n      }\n    },\n    search () {\n      this.getTableData()\n    },\n    // 迁移企业微信灰度\n    async handleWechatStatusChange (val) {\n      try {\n        const params = {\n          cityName: this.formData.cityName,\n          cityCode: this.formData.cityCode,\n          wechatStatus: val\n        }\n        await saveCityGray(params)\n        // 更改分校筛选项中灰度状态\n        this.currentCity.wechatStatus = val\n        this.$Message.success('灰度状态变更成功')\n      } catch (error) {\n        this.formData.wechatStatus = this.currentCity.wechatStatus\n        this.$Message.error({\n          content: `灰度状态变更失败: ${error.message}`,\n          duration: 5\n        })\n      }\n    },\n    async handleGrayStatusChange (val) {\n      try {\n        const params = {\n          cityName: this.formData.cityName,\n          cityCode: this.formData.cityCode,\n          status: val\n        }\n        await saveCityGray(params)\n\n        // 更改分校筛选项中灰度状态\n        this.currentCity.status = val\n        this.cityList.forEach((item) => {\n          if (item.cityCode === this.currentCity.cityCode) {\n            this.$set(item, this.currentCity)\n          }\n        })\n        this.search()\n        this.$Message.success('灰度状态变更成功')\n      } catch (error) {\n        this.formData.status = this.currentCity.status\n        this.$Message.error({\n          content: `灰度状态变更失败: ${error.message}`,\n          duration: 5\n        })\n      }\n    },\n    handleCityChange (val) {\n      const currentCity = this.cityList.filter(\n        (item) => item.cityCode === val\n      )[0]\n      this.currentCity = currentCity\n      Object.assign(this.formData, { ...currentCity })\n      this.getAreaList()\n      this.search()\n    },\n    async getTableData () {\n      if (!this.formData.cityCode) {\n        return this.$Message.warning('请选择分校')\n      }\n\n      this.tableLoading = true\n      try {\n        const params = {\n          cityCode: this.formData.cityCode,\n          areaId: this.formData.areaId,\n          likeName: this.formData.likeName\n        }\n        const data = await getServiceCenterList(params)\n        this.tableData = data\n      } catch (error) {\n        this.$Message.error({\n          content: `获取服务服务中心灰度列表失败: ${error.message}`,\n          duration: 5\n        })\n      }\n\n      this.tableLoading = false\n    },\n    async getAreaList () {\n      try {\n        const params = { cityCode: this.formData.cityCode }\n        const data = await getAreaList(params)\n        this.areaList = Object.freeze(data)\n      } catch (error) {\n        this.$Message.error({\n          content: `获取区域列表失败: ${error.message}`,\n          duration: 5\n        })\n      }\n    },\n    async queryCityGrayList () {\n      try {\n        const data = await queryCityGrayList()\n        this.cityList = Object.freeze(data) || []\n      } catch (error) {\n        this.$Message.error({\n          content: `获取灰度分校列表失败: ${error.message}`,\n          duration: 5\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.layout {\n  padding: 10px;\n  width: 100%;\n}\n\n.top,\n.bottom {\n  background-color: #fff;\n  padding: 20px;\n  border-radius: 8px;\n}\n\n.top {\n  display: flex;\n  align-items: center;\n}\n\n.add-wx {\n  display: flex;\n  align-items: center;\n}\n\n.border {\n  width: 1px;\n  height: 15px;\n  background-color: gray;\n  margin-left: 20px;\n  margin-right: 28px;\n}\n\n.bottom {\n  margin-top: 20px;\n  .search {\n    margin-bottom: 20px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=af8a12f2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=af8a12f2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af8a12f2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=af8a12f2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=af8a12f2&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scroll-wrap\",style:(_vm.cusStyle)},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scrollWrap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scrollWrap.vue?vue&type=script&lang=js&\"","<template>\n  <!-- 滚动组件 -->\n  <div class=\"scroll-wrap\" :style=\"cusStyle\">\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nimport { on, off } from '@/libs/tools'\nexport default {\n  props: {\n    openResize: { // 是否开启监听resize事件\n      type: Boolean,\n      default: false\n    },\n    cusStyle: {\n      type: Object,\n      default: null\n    }\n  },\n  mounted () {\n    if (this.openResize) {\n      this.getClientHeight()\n      on(window, 'resize', this.getClientHeight)\n    }\n  },\n  beforeDestroy () {\n    if (this.openResize) {\n      off(window, 'resize', this.getClientHeight)\n    }\n  },\n  methods: {\n    getClientHeight () {\n      const clientHeight = document.body.clientHeight\n      const clientWidth = document.body.clientWidth\n      console.log(clientHeight)\n      this.$emit('on-resize', { clientHeight, clientWidth })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.scroll-wrap {\n  overflow: hidden;\n  max-height: calc(~\"100vh - 30px\");\n}\n</style>\n","import { render, staticRenderFns } from \"./scrollWrap.vue?vue&type=template&id=d57f6b8e&scoped=true&\"\nimport script from \"./scrollWrap.vue?vue&type=script&lang=js&\"\nexport * from \"./scrollWrap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./scrollWrap.vue?vue&type=style&index=0&id=d57f6b8e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d57f6b8e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scrollWrap.vue?vue&type=style&index=0&id=d57f6b8e&scoped=true&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scrollWrap.vue?vue&type=style&index=0&id=d57f6b8e&scoped=true&lang=less&\""],"sourceRoot":""}