(window.webpackJsonp=window.webpackJsonp||[]).push([["login"],{dc3f:function(e,t,o){"use strict";o.r(t);var n=(o("caad"),o("2532"),o("99af"),o("ac1f"),o("5319"),o("5f98")),i=o.n(n),c=(o("f682"),o("f121")),a=o("ed08"),s={components:{xesLogin:i.a},data:function(){var e=Object(a.d)(),t=c.a.root[e],o=c.a.appId[e],n=encodeURIComponent(location.href),i=this.$route.params,s=i.fromPath,r=i.fromName;c.a.noAuthRouter.includes(r)&&("/"===s&&(s=""),n=encodeURIComponent("".concat(location.origin).concat(t).concat(s))),n=n.replace(/\/+$/,"");var l="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(o,"&redirect_uri=").concat(n,"&response_type=code&scope=snsapi_base&state=123#wechat_redirect"),u=c.a.qy[e],p="test";return"prod"!==e&&"release"!==e||(p="prod"),{wxAuthUrl:l,isSwitchAccount:!0,wxUnionid:"",clientId:u.clientId,appId:u.appId,plat:u.plat,home:"Transform_List",env:p}},mounted:function(){try{var e=this.$route.query;e.code&&(this.isSwitchAccount=!0,this.wxUnionid=e.code||"")}catch(e){this.$toast.error({message:e.message})}},methods:{onSuccessLogin:function(e){console.log("====获取用户信息======",e),this.$cookie.set("user",JSON.stringify(e));var t=this.$route.query.redirectUrl;if(t)location.replace(t);else{var o=this.$cookie.get("beforeLoginRouterName")||this.home;this.$router.replace({name:"Login"===o?this.home:o})}this.$store.commit("setUserInfo",e)},loginComplateFail:function(e){this.$toast.error({message:e.message})}}},r=o("2877"),l=Object(r.a)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("xesLogin",{attrs:{env:e.env,appId:e.appId,businessChannel:e.plat,clientId:e.clientId,wxUnionid:e.wxUnionid,wxAuthUrl:e.wxAuthUrl,wxRedirectUrl:"",isSwitchAccount:e.isSwitchAccount},on:{onSuccessLogin:e.onSuccessLogin,loginComplateFail:e.loginComplateFail}})}),[],!1,null,null,null);t.default=l.exports}}]);